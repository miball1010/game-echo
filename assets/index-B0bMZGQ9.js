const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-SvbXDzTh.js","assets/Logo-Cmo_Lykr.js","assets/Logo-tnxwrumv.css","assets/Login-5pLUszDi.css","assets/Home-Dyb9itQo.js","assets/Home-9g1BGrwv.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function ou(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ke={},Ts=[],un=()=>{},tg=()=>!1,La=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),au=t=>t.startsWith("onUpdate:"),Je=Object.assign,cu=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},JE=Object.prototype.hasOwnProperty,Se=(t,e)=>JE.call(t,e),se=Array.isArray,Is=t=>to(t)==="[object Map]",Fa=t=>to(t)==="[object Set]",ff=t=>to(t)==="[object Date]",he=t=>typeof t=="function",Fe=t=>typeof t=="string",Yt=t=>typeof t=="symbol",Ne=t=>t!==null&&typeof t=="object",ng=t=>(Ne(t)||he(t))&&he(t.then)&&he(t.catch),rg=Object.prototype.toString,to=t=>rg.call(t),XE=t=>to(t).slice(8,-1),sg=t=>to(t)==="[object Object]",Ua=t=>Fe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ii=ou(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ba=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},ZE=/-\w/g,Bt=Ba(t=>t.replace(ZE,e=>e.slice(1).toUpperCase())),ev=/\B([A-Z])/g,Cr=Ba(t=>t.replace(ev,"-$1").toLowerCase()),ja=Ba(t=>t.charAt(0).toUpperCase()+t.slice(1)),Mc=Ba(t=>t?`on${ja(t)}`:""),dr=(t,e)=>!Object.is(t,e),$o=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},ig=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},lu=t=>{const e=parseFloat(t);return isNaN(e)?t:e},tv=t=>{const e=Fe(t)?Number(t):NaN;return isNaN(e)?t:e};let df;const qa=()=>df||(df=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $a(t){if(se(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Fe(r)?iv(r):$a(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Fe(t)||Ne(t))return t}const nv=/;(?![^(]*\))/g,rv=/:([^]+)/,sv=/\/\*[^]*?\*\//g;function iv(t){const e={};return t.replace(sv,"").split(nv).forEach(n=>{if(n){const r=n.split(rv);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function no(t){let e="";if(Fe(t))e=t;else if(se(t))for(let n=0;n<t.length;n++){const r=no(t[n]);r&&(e+=r+" ")}else if(Ne(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function YN(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Fe(e)&&(t.class=no(e)),n&&(t.style=$a(n)),t}const ov="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",av=ou(ov);function og(t){return!!t||t===""}function cv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=ks(t[r],e[r]);return n}function ks(t,e){if(t===e)return!0;let n=ff(t),r=ff(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Yt(t),r=Yt(e),n||r)return t===e;if(n=se(t),r=se(e),n||r)return n&&r?cv(t,e):!1;if(n=Ne(t),r=Ne(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const c=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(c&&!l||!c&&l||!ks(t[o],e[o]))return!1}}return String(t)===String(e)}function ag(t,e){return t.findIndex(n=>ks(n,e))}const cg=t=>!!(t&&t.__v_isRef===!0),lg=t=>Fe(t)?t:t==null?"":se(t)||Ne(t)&&(t.toString===rg||!he(t.toString))?cg(t)?lg(t.value):JSON.stringify(t,ug,2):String(t),ug=(t,e)=>cg(e)?ug(t,e.value):Is(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Lc(r,i)+" =>"]=s,n),{})}:Fa(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Lc(n))}:Yt(e)?Lc(e):Ne(e)&&!se(e)&&!sg(e)?String(e):e,Lc=(t,e="")=>{var n;return Yt(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let pt;class hg{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=pt,!e&&pt&&(this.index=(pt.scopes||(pt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=pt;try{return pt=this,e()}finally{pt=n}}}on(){++this._on===1&&(this.prevScope=pt,pt=this)}off(){this._on>0&&--this._on===0&&(pt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function fg(t){return new hg(t)}function dg(){return pt}function lv(t,e=!1){pt&&pt.cleanups.push(t)}let Oe;const Fc=new WeakSet;class pg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,pt&&pt.active&&pt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Fc.has(this)&&(Fc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||mg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,pf(this),_g(this);const e=Oe,n=Kt;Oe=this,Kt=!0;try{return this.fn()}finally{yg(this),Oe=e,Kt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)fu(e);this.deps=this.depsTail=void 0,pf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Fc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){fl(this)&&this.run()}get dirty(){return fl(this)}}let gg=0,wi,Ai;function mg(t,e=!1){if(t.flags|=8,e){t.next=Ai,Ai=t;return}t.next=wi,wi=t}function uu(){gg++}function hu(){if(--gg>0)return;if(Ai){let e=Ai;for(Ai=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;wi;){let e=wi;for(wi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function _g(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function yg(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),fu(r),uv(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function fl(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Eg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Eg(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Li)||(t.globalVersion=Li,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!fl(t))))return;t.flags|=2;const e=t.dep,n=Oe,r=Kt;Oe=t,Kt=!0;try{_g(t);const s=t.fn(t._value);(e.version===0||dr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Oe=n,Kt=r,yg(t),t.flags&=-3}}function fu(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)fu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function uv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Kt=!0;const vg=[];function Ln(){vg.push(Kt),Kt=!1}function Fn(){const t=vg.pop();Kt=t===void 0?!0:t}function pf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Oe;Oe=void 0;try{e()}finally{Oe=n}}}let Li=0;class hv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class du{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Oe||!Kt||Oe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Oe)n=this.activeLink=new hv(Oe,this),Oe.deps?(n.prevDep=Oe.depsTail,Oe.depsTail.nextDep=n,Oe.depsTail=n):Oe.deps=Oe.depsTail=n,Tg(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Oe.depsTail,n.nextDep=void 0,Oe.depsTail.nextDep=n,Oe.depsTail=n,Oe.deps===n&&(Oe.deps=r)}return n}trigger(e){this.version++,Li++,this.notify(e)}notify(e){uu();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{hu()}}}function Tg(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Tg(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ia=new WeakMap,Gr=Symbol(""),dl=Symbol(""),Fi=Symbol("");function mt(t,e,n){if(Kt&&Oe){let r=ia.get(t);r||ia.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new du),s.map=r,s.key=n),s.track()}}function kn(t,e,n,r,s,i){const o=ia.get(t);if(!o){Li++;return}const c=l=>{l&&l.trigger()};if(uu(),e==="clear")o.forEach(c);else{const l=se(t),u=l&&Ua(n);if(l&&n==="length"){const f=Number(r);o.forEach((p,g)=>{(g==="length"||g===Fi||!Yt(g)&&g>=f)&&c(p)})}else switch((n!==void 0||o.has(void 0))&&c(o.get(n)),u&&c(o.get(Fi)),e){case"add":l?u&&c(o.get("length")):(c(o.get(Gr)),Is(t)&&c(o.get(dl)));break;case"delete":l||(c(o.get(Gr)),Is(t)&&c(o.get(dl)));break;case"set":Is(t)&&c(o.get(Gr));break}}hu()}function fv(t,e){const n=ia.get(t);return n&&n.get(e)}function hs(t){const e=we(t);return e===t?e:(mt(e,"iterate",Fi),Lt(t)?e:e.map(Jt))}function Ha(t){return mt(t=we(t),"iterate",Fi),t}function sr(t,e){return Un(t)?hn(t)?Ds(Jt(e)):Ds(e):Jt(e)}const dv={__proto__:null,[Symbol.iterator](){return Uc(this,Symbol.iterator,t=>sr(this,t))},concat(...t){return hs(this).concat(...t.map(e=>se(e)?hs(e):e))},entries(){return Uc(this,"entries",t=>(t[1]=sr(this,t[1]),t))},every(t,e){return Sn(this,"every",t,e,void 0,arguments)},filter(t,e){return Sn(this,"filter",t,e,n=>n.map(r=>sr(this,r)),arguments)},find(t,e){return Sn(this,"find",t,e,n=>sr(this,n),arguments)},findIndex(t,e){return Sn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Sn(this,"findLast",t,e,n=>sr(this,n),arguments)},findLastIndex(t,e){return Sn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Sn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Bc(this,"includes",t)},indexOf(...t){return Bc(this,"indexOf",t)},join(t){return hs(this).join(t)},lastIndexOf(...t){return Bc(this,"lastIndexOf",t)},map(t,e){return Sn(this,"map",t,e,void 0,arguments)},pop(){return fi(this,"pop")},push(...t){return fi(this,"push",t)},reduce(t,...e){return gf(this,"reduce",t,e)},reduceRight(t,...e){return gf(this,"reduceRight",t,e)},shift(){return fi(this,"shift")},some(t,e){return Sn(this,"some",t,e,void 0,arguments)},splice(...t){return fi(this,"splice",t)},toReversed(){return hs(this).toReversed()},toSorted(t){return hs(this).toSorted(t)},toSpliced(...t){return hs(this).toSpliced(...t)},unshift(...t){return fi(this,"unshift",t)},values(){return Uc(this,"values",t=>sr(this,t))}};function Uc(t,e,n){const r=Ha(t),s=r[e]();return r!==t&&!Lt(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const pv=Array.prototype;function Sn(t,e,n,r,s,i){const o=Ha(t),c=o!==t&&!Lt(t),l=o[e];if(l!==pv[e]){const p=l.apply(t,i);return c?Jt(p):p}let u=n;o!==t&&(c?u=function(p,g){return n.call(this,sr(t,p),g,t)}:n.length>2&&(u=function(p,g){return n.call(this,p,g,t)}));const f=l.call(o,u,r);return c&&s?s(f):f}function gf(t,e,n,r){const s=Ha(t);let i=n;return s!==t&&(Lt(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,sr(t,c),l,t)}),s[e](i,...r)}function Bc(t,e,n){const r=we(t);mt(r,"iterate",Fi);const s=r[e](...n);return(s===-1||s===!1)&&Ka(n[0])?(n[0]=we(n[0]),r[e](...n)):s}function fi(t,e,n=[]){Ln(),uu();const r=we(t)[e].apply(t,n);return hu(),Fn(),r}const gv=ou("__proto__,__v_isRef,__isVue"),Ig=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Yt));function mv(t){Yt(t)||(t=String(t));const e=we(this);return mt(e,"has",t),e.hasOwnProperty(t)}class wg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Pg:Cg:i?Sg:bg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=se(e);if(!s){let l;if(o&&(l=dv[n]))return l;if(n==="hasOwnProperty")return mv}const c=Reflect.get(e,n,Le(e)?e:r);if((Yt(n)?Ig.has(n):gv(n))||(s||mt(e,"get",n),i))return c;if(Le(c)){const l=o&&Ua(n)?c:c.value;return s&&Ne(l)?gl(l):l}return Ne(c)?s?gl(c):Er(c):c}}class Ag extends wg{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const o=se(e)&&Ua(n);if(!this._isShallow){const u=Un(i);if(!Lt(r)&&!Un(r)&&(i=we(i),r=we(r)),!o&&Le(i)&&!Le(r))return u||(i.value=r),!0}const c=o?Number(n)<e.length:Se(e,n),l=Reflect.set(e,n,r,Le(e)?e:s);return e===we(s)&&(c?dr(r,i)&&kn(e,"set",n,r):kn(e,"add",n,r)),l}deleteProperty(e,n){const r=Se(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&kn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Yt(n)||!Ig.has(n))&&mt(e,"has",n),r}ownKeys(e){return mt(e,"iterate",se(e)?"length":Gr),Reflect.ownKeys(e)}}class Rg extends wg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const _v=new Ag,yv=new Rg,Ev=new Ag(!0),vv=new Rg(!0),pl=t=>t,Po=t=>Reflect.getPrototypeOf(t);function Tv(t,e,n){return function(...r){const s=this.__v_raw,i=we(s),o=Is(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),f=n?pl:e?Ds:Jt;return!e&&mt(i,"iterate",l?dl:Gr),{next(){const{value:p,done:g}=u.next();return g?{value:p,done:g}:{value:c?[f(p[0]),f(p[1])]:f(p),done:g}},[Symbol.iterator](){return this}}}}function No(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Iv(t,e){const n={get(s){const i=this.__v_raw,o=we(i),c=we(s);t||(dr(s,c)&&mt(o,"get",s),mt(o,"get",c));const{has:l}=Po(o),u=e?pl:t?Ds:Jt;if(l.call(o,s))return u(i.get(s));if(l.call(o,c))return u(i.get(c));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&mt(we(s),"iterate",Gr),s.size},has(s){const i=this.__v_raw,o=we(i),c=we(s);return t||(dr(s,c)&&mt(o,"has",s),mt(o,"has",c)),s===c?i.has(s):i.has(s)||i.has(c)},forEach(s,i){const o=this,c=o.__v_raw,l=we(c),u=e?pl:t?Ds:Jt;return!t&&mt(l,"iterate",Gr),c.forEach((f,p)=>s.call(i,u(f),u(p),o))}};return Je(n,t?{add:No("add"),set:No("set"),delete:No("delete"),clear:No("clear")}:{add(s){!e&&!Lt(s)&&!Un(s)&&(s=we(s));const i=we(this);return Po(i).has.call(i,s)||(i.add(s),kn(i,"add",s,s)),this},set(s,i){!e&&!Lt(i)&&!Un(i)&&(i=we(i));const o=we(this),{has:c,get:l}=Po(o);let u=c.call(o,s);u||(s=we(s),u=c.call(o,s));const f=l.call(o,s);return o.set(s,i),u?dr(i,f)&&kn(o,"set",s,i):kn(o,"add",s,i),this},delete(s){const i=we(this),{has:o,get:c}=Po(i);let l=o.call(i,s);l||(s=we(s),l=o.call(i,s)),c&&c.call(i,s);const u=i.delete(s);return l&&kn(i,"delete",s,void 0),u},clear(){const s=we(this),i=s.size!==0,o=s.clear();return i&&kn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Tv(s,t,e)}),n}function Ga(t,e){const n=Iv(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Se(n,s)&&s in r?n:r,s,i)}const wv={get:Ga(!1,!1)},Av={get:Ga(!1,!0)},Rv={get:Ga(!0,!1)},bv={get:Ga(!0,!0)},bg=new WeakMap,Sg=new WeakMap,Cg=new WeakMap,Pg=new WeakMap;function Sv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Cv(t){return t.__v_skip||!Object.isExtensible(t)?0:Sv(XE(t))}function Er(t){return Un(t)?t:Wa(t,!1,_v,wv,bg)}function Ng(t){return Wa(t,!1,Ev,Av,Sg)}function gl(t){return Wa(t,!0,yv,Rv,Cg)}function JN(t){return Wa(t,!0,vv,bv,Pg)}function Wa(t,e,n,r,s){if(!Ne(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Cv(t);if(i===0)return t;const o=s.get(t);if(o)return o;const c=new Proxy(t,i===2?r:n);return s.set(t,c),c}function hn(t){return Un(t)?hn(t.__v_raw):!!(t&&t.__v_isReactive)}function Un(t){return!!(t&&t.__v_isReadonly)}function Lt(t){return!!(t&&t.__v_isShallow)}function Ka(t){return t?!!t.__v_raw:!1}function we(t){const e=t&&t.__v_raw;return e?we(e):t}function pu(t){return!Se(t,"__v_skip")&&Object.isExtensible(t)&&ig(t,"__v_skip",!0),t}const Jt=t=>Ne(t)?Er(t):t,Ds=t=>Ne(t)?gl(t):t;function Le(t){return t?t.__v_isRef===!0:!1}function ze(t){return Dg(t,!1)}function kg(t){return Dg(t,!0)}function Dg(t,e){return Le(t)?t:new Pv(t,e)}class Pv{constructor(e,n){this.dep=new du,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:we(e),this._value=n?e:Jt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Lt(e)||Un(e);e=r?e:we(e),dr(e,n)&&(this._rawValue=e,this._value=r?e:Jt(e),this.dep.trigger())}}function zt(t){return Le(t)?t.value:t}function XN(t){return he(t)?t():zt(t)}const Nv={get:(t,e,n)=>e==="__v_raw"?t:zt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Le(s)&&!Le(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Og(t){return hn(t)?t:new Proxy(t,Nv)}function kv(t){const e=se(t)?new Array(t.length):{};for(const n in t)e[n]=Vg(t,n);return e}class Dv{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=we(e);let s=!0,i=e;if(!se(e)||!Ua(String(n)))do s=!Ka(i)||Lt(i);while(s&&(i=i.__v_raw));this._shallow=s}get value(){let e=this._object[this._key];return this._shallow&&(e=zt(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&Le(this._raw[this._key])){const n=this._object[this._key];if(Le(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return fv(this._raw,this._key)}}class Ov{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Vv(t,e,n){return Le(t)?t:he(t)?new Ov(t):Ne(t)&&arguments.length>1?Vg(t,e,n):ze(t)}function Vg(t,e,n){return new Dv(t,e,n)}class xv{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new du(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Li-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Oe!==this)return mg(this,!0),!0}get value(){const e=this.dep.track();return Eg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Mv(t,e,n=!1){let r,s;return he(t)?r=t:(r=t.get,s=t.set),new xv(r,s,n)}const ko={},oa=new WeakMap;let Br;function Lv(t,e=!1,n=Br){if(n){let r=oa.get(n);r||oa.set(n,r=[]),r.push(t)}}function Fv(t,e,n=ke){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:c,call:l}=n,u=$=>s?$:Lt($)||s===!1||s===0?Dn($,1):Dn($);let f,p,g,E,C=!1,k=!1;if(Le(t)?(p=()=>t.value,C=Lt(t)):hn(t)?(p=()=>u(t),C=!0):se(t)?(k=!0,C=t.some($=>hn($)||Lt($)),p=()=>t.map($=>{if(Le($))return $.value;if(hn($))return u($);if(he($))return l?l($,2):$()})):he(t)?e?p=l?()=>l(t,2):t:p=()=>{if(g){Ln();try{g()}finally{Fn()}}const $=Br;Br=f;try{return l?l(t,3,[E]):t(E)}finally{Br=$}}:p=un,e&&s){const $=p,z=s===!0?1/0:s;p=()=>Dn($(),z)}const S=dg(),L=()=>{f.stop(),S&&S.active&&cu(S.effects,f)};if(i&&e){const $=e;e=(...z)=>{$(...z),L()}}let j=k?new Array(t.length).fill(ko):ko;const U=$=>{if(!(!(f.flags&1)||!f.dirty&&!$))if(e){const z=f.run();if(s||C||(k?z.some((J,R)=>dr(J,j[R])):dr(z,j))){g&&g();const J=Br;Br=f;try{const R=[z,j===ko?void 0:k&&j[0]===ko?[]:j,E];j=z,l?l(e,3,R):e(...R)}finally{Br=J}}}else f.run()};return c&&c(U),f=new pg(p),f.scheduler=o?()=>o(U,!1):U,E=$=>Lv($,!1,f),g=f.onStop=()=>{const $=oa.get(f);if($){if(l)l($,4);else for(const z of $)z();oa.delete(f)}},e?r?U(!0):j=f.run():o?o(U.bind(null,!0),!0):f.run(),L.pause=f.pause.bind(f),L.resume=f.resume.bind(f),L.stop=L,L}function Dn(t,e=1/0,n){if(e<=0||!Ne(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Le(t))Dn(t.value,e,n);else if(se(t))for(let r=0;r<t.length;r++)Dn(t[r],e,n);else if(Fa(t)||Is(t))t.forEach(r=>{Dn(r,e,n)});else if(sg(t)){for(const r in t)Dn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Dn(t[r],e,n)}return t}function ro(t,e,n,r){try{return r?t(...r):t()}catch(s){za(s,e,n)}}function Xt(t,e,n,r){if(he(t)){const s=ro(t,e,n,r);return s&&ng(s)&&s.catch(i=>{za(i,e,n)}),s}if(se(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Xt(t[i],e,n,r));return s}}function za(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ke;if(e){let c=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const f=c.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,l,u)===!1)return}c=c.parent}if(i){Ln(),ro(i,null,10,[t,l,u]),Fn();return}}Uv(t,n,s,r,o)}function Uv(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const bt=[];let an=-1;const ws=[];let ir=null,ds=0;const xg=Promise.resolve();let aa=null;function gu(t){const e=aa||xg;return t?e.then(this?t.bind(this):t):e}function Bv(t){let e=an+1,n=bt.length;for(;e<n;){const r=e+n>>>1,s=bt[r],i=Ui(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function mu(t){if(!(t.flags&1)){const e=Ui(t),n=bt[bt.length-1];!n||!(t.flags&2)&&e>=Ui(n)?bt.push(t):bt.splice(Bv(e),0,t),t.flags|=1,Mg()}}function Mg(){aa||(aa=xg.then(Fg))}function jv(t){se(t)?ws.push(...t):ir&&t.id===-1?ir.splice(ds+1,0,t):t.flags&1||(ws.push(t),t.flags|=1),Mg()}function mf(t,e,n=an+1){for(;n<bt.length;n++){const r=bt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;bt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Lg(t){if(ws.length){const e=[...new Set(ws)].sort((n,r)=>Ui(n)-Ui(r));if(ws.length=0,ir){ir.push(...e);return}for(ir=e,ds=0;ds<ir.length;ds++){const n=ir[ds];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ir=null,ds=0}}const Ui=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Fg(t){try{for(an=0;an<bt.length;an++){const e=bt[an];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ro(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;an<bt.length;an++){const e=bt[an];e&&(e.flags&=-2)}an=-1,bt.length=0,Lg(),aa=null,(bt.length||ws.length)&&Fg()}}let ot=null,Ug=null;function ca(t){const e=ot;return ot=t,Ug=t&&t.type.__scopeId||null,e}function qv(t,e=ot,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&ha(-1);const i=ca(e);let o;try{o=t(...s)}finally{ca(i),r._d&&ha(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ZN(t,e){if(ot===null)return t;const n=ec(ot),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,c,l=ke]=e[s];i&&(he(i)&&(i={mounted:i,updated:i}),i.deep&&Dn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function Mr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];i&&(c.oldValue=i[o].value);let l=c.dir[r];l&&(Ln(),Xt(l,n,8,[t.el,c,t,e]),Fn())}}function Ho(t,e){if(vt){let n=vt.provides;const r=vt.parent&&vt.parent.provides;r===n&&(n=vt.provides=Object.create(r)),n[t]=e}}function fn(t,e,n=!1){const r=$s();if(r||Kr){let s=Kr?Kr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&he(e)?e.call(r&&r.proxy):e}}function $v(){return!!($s()||Kr)}const Hv=Symbol.for("v-scx"),Gv=()=>fn(Hv);function Wr(t,e,n){return Bg(t,e,n)}function Bg(t,e,n=ke){const{immediate:r,deep:s,flush:i,once:o}=n,c=Je({},n),l=e&&r||!e&&i!=="post";let u;if($i){if(i==="sync"){const E=Gv();u=E.__watcherHandles||(E.__watcherHandles=[])}else if(!l){const E=()=>{};return E.stop=un,E.resume=un,E.pause=un,E}}const f=vt;c.call=(E,C,k)=>Xt(E,f,C,k);let p=!1;i==="post"?c.scheduler=E=>{At(E,f&&f.suspense)}:i!=="sync"&&(p=!0,c.scheduler=(E,C)=>{C?E():mu(E)}),c.augmentJob=E=>{e&&(E.flags|=4),p&&(E.flags|=2,f&&(E.id=f.uid,E.i=f))};const g=Fv(t,e,c);return $i&&(u?u.push(g):l&&g()),g}function Wv(t,e,n){const r=this.proxy,s=Fe(t)?t.includes(".")?jg(r,t):()=>r[t]:t.bind(r,r);let i;he(e)?i=e:(i=e.handler,n=e);const o=so(this),c=Bg(s,i.bind(r),n);return o(),c}function jg(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const qg=Symbol("_vte"),$g=t=>t.__isTeleport,Ri=t=>t&&(t.disabled||t.disabled===""),_f=t=>t&&(t.defer||t.defer===""),yf=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Ef=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,ml=(t,e)=>{const n=t&&t.to;return Fe(n)?e?e(n):null:n},Hg={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,c,l,u){const{mc:f,pc:p,pbc:g,o:{insert:E,querySelector:C,createText:k,createComment:S}}=u,L=Ri(e.props);let{shapeFlag:j,children:U,dynamicChildren:$}=e;if(t==null){const z=e.el=k(""),J=e.anchor=k("");E(z,n,r),E(J,n,r);const R=(_,I)=>{j&16&&f(U,_,I,s,i,o,c,l)},y=()=>{const _=e.target=ml(e.props,C),I=Gg(_,e,k,E);_&&(o!=="svg"&&yf(_)?o="svg":o!=="mathml"&&Ef(_)&&(o="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(_),L||(R(_,I),Go(e,!1)))};L&&(R(n,J),Go(e,!0)),_f(e.props)?(e.el.__isMounted=!1,At(()=>{y(),delete e.el.__isMounted},i)):y()}else{if(_f(e.props)&&t.el.__isMounted===!1){At(()=>{Hg.process(t,e,n,r,s,i,o,c,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const z=e.anchor=t.anchor,J=e.target=t.target,R=e.targetAnchor=t.targetAnchor,y=Ri(t.props),_=y?n:J,I=y?z:R;if(o==="svg"||yf(J)?o="svg":(o==="mathml"||Ef(J))&&(o="mathml"),$?(g(t.dynamicChildren,$,_,s,i,o,c),vu(t,e,!0)):l||p(t,e,_,I,s,i,o,c,!1),L)y?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Do(e,n,z,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const w=e.target=ml(e.props,C);w&&Do(e,w,null,u,0)}else y&&Do(e,J,R,u,1);Go(e,L)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:c,anchor:l,targetStart:u,targetAnchor:f,target:p,props:g}=t;if(p&&(s(u),s(f)),i&&s(l),o&16){const E=i||!Ri(g);for(let C=0;C<c.length;C++){const k=c[C];r(k,e,n,E,!!k.dynamicChildren)}}},move:Do,hydrate:Kv};function Do(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:c,shapeFlag:l,children:u,props:f}=t,p=i===2;if(p&&r(o,e,n),(!p||Ri(f))&&l&16)for(let g=0;g<u.length;g++)s(u[g],e,n,2);p&&r(c,e,n)}function Kv(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:c,querySelector:l,insert:u,createText:f}},p){function g(k,S,L,j){S.anchor=p(o(k),S,c(k),n,r,s,i),S.targetStart=L,S.targetAnchor=j}const E=e.target=ml(e.props,l),C=Ri(e.props);if(E){const k=E._lpa||E.firstChild;if(e.shapeFlag&16)if(C)g(t,e,k,k&&o(k));else{e.anchor=o(t);let S=k;for(;S;){if(S&&S.nodeType===8){if(S.data==="teleport start anchor")e.targetStart=S;else if(S.data==="teleport anchor"){e.targetAnchor=S,E._lpa=e.targetAnchor&&o(e.targetAnchor);break}}S=o(S)}e.targetAnchor||Gg(E,e,f,u),p(k&&o(k),e,E,n,r,s,i)}Go(e,C)}else C&&e.shapeFlag&16&&g(t,e,t,o(t));return e.anchor&&o(e.anchor)}const ek=Hg;function Go(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Gg(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[qg]=i,t&&(r(s,t),r(i,t)),i}const Nn=Symbol("_leaveCb"),Oo=Symbol("_enterCb");function Wg(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Zg(()=>{t.isMounted=!0}),tm(()=>{t.isUnmounting=!0}),t}const Ft=[Function,Array],Kg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ft,onEnter:Ft,onAfterEnter:Ft,onEnterCancelled:Ft,onBeforeLeave:Ft,onLeave:Ft,onAfterLeave:Ft,onLeaveCancelled:Ft,onBeforeAppear:Ft,onAppear:Ft,onAfterAppear:Ft,onAppearCancelled:Ft},zg=t=>{const e=t.subTree;return e.component?zg(e.component):e},zv={name:"BaseTransition",props:Kg,setup(t,{slots:e}){const n=$s(),r=Wg();return()=>{const s=e.default&&_u(e.default(),!0);if(!s||!s.length)return;const i=Qg(s),o=we(t),{mode:c}=o;if(r.isLeaving)return jc(i);const l=vf(i);if(!l)return jc(i);let u=Bi(l,o,r,n,p=>u=p);l.type!==Et&&Qr(l,u);let f=n.subTree&&vf(n.subTree);if(f&&f.type!==Et&&!qr(f,l)&&zg(n).type!==Et){let p=Bi(f,o,r,n);if(Qr(f,p),c==="out-in"&&l.type!==Et)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,f=void 0},jc(i);c==="in-out"&&l.type!==Et?p.delayLeave=(g,E,C)=>{const k=Yg(r,f);k[String(f.key)]=f,g[Nn]=()=>{E(),g[Nn]=void 0,delete u.delayedLeave,f=void 0},u.delayedLeave=()=>{C(),delete u.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return i}}};function Qg(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Et){e=n;break}}return e}const Qv=zv;function Yg(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Bi(t,e,n,r,s){const{appear:i,mode:o,persisted:c=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:f,onEnterCancelled:p,onBeforeLeave:g,onLeave:E,onAfterLeave:C,onLeaveCancelled:k,onBeforeAppear:S,onAppear:L,onAfterAppear:j,onAppearCancelled:U}=e,$=String(t.key),z=Yg(n,t),J=(_,I)=>{_&&Xt(_,r,9,I)},R=(_,I)=>{const w=I[1];J(_,I),se(_)?_.every(A=>A.length<=1)&&w():_.length<=1&&w()},y={mode:o,persisted:c,beforeEnter(_){let I=l;if(!n.isMounted)if(i)I=S||l;else return;_[Nn]&&_[Nn](!0);const w=z[$];w&&qr(t,w)&&w.el[Nn]&&w.el[Nn](),J(I,[_])},enter(_){let I=u,w=f,A=p;if(!n.isMounted)if(i)I=L||u,w=j||f,A=U||p;else return;let v=!1;const te=_[Oo]=fe=>{v||(v=!0,fe?J(A,[_]):J(w,[_]),y.delayedLeave&&y.delayedLeave(),_[Oo]=void 0)};I?R(I,[_,te]):te()},leave(_,I){const w=String(t.key);if(_[Oo]&&_[Oo](!0),n.isUnmounting)return I();J(g,[_]);let A=!1;const v=_[Nn]=te=>{A||(A=!0,I(),te?J(k,[_]):J(C,[_]),_[Nn]=void 0,z[w]===t&&delete z[w])};z[w]=t,E?R(E,[_,v]):v()},clone(_){const I=Bi(_,e,n,r,s);return s&&s(I),I}};return y}function jc(t){if(Ya(t))return t=vr(t),t.children=null,t}function vf(t){if(!Ya(t))return $g(t.type)&&t.children?Qg(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&he(n.default))return n.default()}}function Qr(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Qr(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function _u(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const c=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===_t?(o.patchFlag&128&&s++,r=r.concat(_u(o.children,e,c))):(e||o.type!==Et)&&r.push(c!=null?vr(o,{key:c}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Qa(t,e){return he(t)?Je({name:t.name},e,{setup:t}):t}function Jg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function tk(t){const e=$s(),n=kg(null);if(e){const s=e.refs===ke?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>n.value,set:i=>n.value=i})}return n}const la=new WeakMap;function bi(t,e,n,r,s=!1){if(se(t)){t.forEach((C,k)=>bi(C,e&&(se(e)?e[k]:e),n,r,s));return}if(As(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&bi(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?ec(r.component):r.el,o=s?null:i,{i:c,r:l}=t,u=e&&e.r,f=c.refs===ke?c.refs={}:c.refs,p=c.setupState,g=we(p),E=p===ke?tg:C=>Se(g,C);if(u!=null&&u!==l){if(Tf(e),Fe(u))f[u]=null,E(u)&&(p[u]=null);else if(Le(u)){u.value=null;const C=e;C.k&&(f[C.k]=null)}}if(he(l))ro(l,c,12,[o,f]);else{const C=Fe(l),k=Le(l);if(C||k){const S=()=>{if(t.f){const L=C?E(l)?p[l]:f[l]:l.value;if(s)se(L)&&cu(L,i);else if(se(L))L.includes(i)||L.push(i);else if(C)f[l]=[i],E(l)&&(p[l]=f[l]);else{const j=[i];l.value=j,t.k&&(f[t.k]=j)}}else C?(f[l]=o,E(l)&&(p[l]=o)):k&&(l.value=o,t.k&&(f[t.k]=o))};if(o){const L=()=>{S(),la.delete(t)};L.id=-1,la.set(t,L),At(L,n)}else Tf(t),S()}}}function Tf(t){const e=la.get(t);e&&(e.flags|=8,la.delete(t))}qa().requestIdleCallback;qa().cancelIdleCallback;const As=t=>!!t.type.__asyncLoader,Ya=t=>t.type.__isKeepAlive;function Yv(t,e){Xg(t,"a",e)}function Jv(t,e){Xg(t,"da",e)}function Xg(t,e,n=vt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Ja(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Ya(s.parent.vnode)&&Xv(r,e,n,s),s=s.parent}}function Xv(t,e,n,r){const s=Ja(e,t,r,!0);nm(()=>{cu(r[e],s)},n)}function Ja(t,e,n=vt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Ln();const c=so(n),l=Xt(e,n,t,o);return c(),Fn(),l});return r?s.unshift(i):s.push(i),i}}const Hn=t=>(e,n=vt)=>{(!$i||t==="sp")&&Ja(t,(...r)=>e(...r),n)},Zv=Hn("bm"),Zg=Hn("m"),eT=Hn("bu"),em=Hn("u"),tm=Hn("bum"),nm=Hn("um"),tT=Hn("sp"),nT=Hn("rtg"),rT=Hn("rtc");function sT(t,e=vt){Ja("ec",t,e)}const rm="components";function iT(t,e){return im(rm,t,!0,e)||t}const sm=Symbol.for("v-ndc");function nk(t){return Fe(t)?im(rm,t,!1)||t:t||sm}function im(t,e,n=!0,r=!1){const s=ot||vt;if(s){const i=s.type;{const c=$T(i,!1);if(c&&(c===e||c===Bt(e)||c===ja(Bt(e))))return i}const o=If(s[t]||i[t],e)||If(s.appContext[t],e);return!o&&r?i:o}}function If(t,e){return t&&(t[e]||t[Bt(e)]||t[ja(Bt(e))])}function rk(t,e,n,r){let s;const i=n,o=se(t);if(o||Fe(t)){const c=o&&hn(t);let l=!1,u=!1;c&&(l=!Lt(t),u=Un(t),t=Ha(t)),s=new Array(t.length);for(let f=0,p=t.length;f<p;f++)s[f]=e(l?u?Ds(Jt(t[f])):Jt(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,i)}else if(Ne(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,u=c.length;l<u;l++){const f=c[l];s[l]=e(t[f],f,l,i)}}else s=[];return s}function sk(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(se(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return t}function ik(t,e,n={},r,s){if(ot.ce||ot.parent&&As(ot.parent)&&ot.parent.ce){const u=Object.keys(n).length>0;return e!=="default"&&(n.name=e),zr(),Il(_t,null,[at("slot",n,r&&r())],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),zr();const o=i&&om(i(n)),c=n.key||o&&o.key,l=Il(_t,{key:(c&&!Yt(c)?c:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function om(t){return t.some(e=>qi(e)?!(e.type===Et||e.type===_t&&!om(e.children)):!0)?t:null}const _l=t=>t?bm(t)?ec(t):_l(t.parent):null,Si=Je(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>_l(t.parent),$root:t=>_l(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>cm(t),$forceUpdate:t=>t.f||(t.f=()=>{mu(t.update)}),$nextTick:t=>t.n||(t.n=gu.bind(t.proxy)),$watch:t=>Wv.bind(t)}),qc=(t,e)=>t!==ke&&!t.__isScriptSetup&&Se(t,e),oT={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:c,appContext:l}=t;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(qc(r,e))return o[e]=1,r[e];if(s!==ke&&Se(s,e))return o[e]=2,s[e];if(Se(i,e))return o[e]=3,i[e];if(n!==ke&&Se(n,e))return o[e]=4,n[e];El&&(o[e]=0)}}const u=Si[e];let f,p;if(u)return e==="$attrs"&&mt(t.attrs,"get",""),u(t);if((f=c.__cssModules)&&(f=f[e]))return f;if(n!==ke&&Se(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,Se(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return qc(s,e)?(s[e]=n,!0):r!==ke&&Se(r,e)?(r[e]=n,!0):Se(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:o}},c){let l;return!!(n[c]||t!==ke&&c[0]!=="$"&&Se(t,c)||qc(e,c)||Se(i,c)||Se(r,c)||Se(Si,c)||Se(s.config.globalProperties,c)||(l=o.__cssModules)&&l[c])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Se(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function ok(){return aT().slots}function aT(t){const e=$s();return e.setupContext||(e.setupContext=Cm(e))}function yl(t){return se(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function ak(t,e){const n=yl(t);for(const r in e){if(r.startsWith("__skip"))continue;let s=n[r];s?se(s)||he(s)?s=n[r]={type:s,default:e[r]}:s.default=e[r]:s===null&&(s=n[r]={default:e[r]}),s&&e[`__skip_${r}`]&&(s.skipFactory=!0)}return n}let El=!0;function cT(t){const e=cm(t),n=t.proxy,r=t.ctx;El=!1,e.beforeCreate&&wf(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:c,provide:l,inject:u,created:f,beforeMount:p,mounted:g,beforeUpdate:E,updated:C,activated:k,deactivated:S,beforeDestroy:L,beforeUnmount:j,destroyed:U,unmounted:$,render:z,renderTracked:J,renderTriggered:R,errorCaptured:y,serverPrefetch:_,expose:I,inheritAttrs:w,components:A,directives:v,filters:te}=e;if(u&&lT(u,r,null),o)for(const ce in o){const de=o[ce];he(de)&&(r[ce]=de.bind(n))}if(s){const ce=s.call(n,n);Ne(ce)&&(t.data=Er(ce))}if(El=!0,i)for(const ce in i){const de=i[ce],lt=he(de)?de.bind(n,n):he(de.get)?de.get.bind(n,n):un,tn=!he(de)&&he(de.set)?de.set.bind(n):un,kt=St({get:lt,set:tn});Object.defineProperty(r,ce,{enumerable:!0,configurable:!0,get:()=>kt.value,set:nt=>kt.value=nt})}if(c)for(const ce in c)am(c[ce],r,n,ce);if(l){const ce=he(l)?l.call(n):l;Reflect.ownKeys(ce).forEach(de=>{Ho(de,ce[de])})}f&&wf(f,t,"c");function _e(ce,de){se(de)?de.forEach(lt=>ce(lt.bind(n))):de&&ce(de.bind(n))}if(_e(Zv,p),_e(Zg,g),_e(eT,E),_e(em,C),_e(Yv,k),_e(Jv,S),_e(sT,y),_e(rT,J),_e(nT,R),_e(tm,j),_e(nm,$),_e(tT,_),se(I))if(I.length){const ce=t.exposed||(t.exposed={});I.forEach(de=>{Object.defineProperty(ce,de,{get:()=>n[de],set:lt=>n[de]=lt,enumerable:!0})})}else t.exposed||(t.exposed={});z&&t.render===un&&(t.render=z),w!=null&&(t.inheritAttrs=w),A&&(t.components=A),v&&(t.directives=v),_&&Jg(t)}function lT(t,e,n=un){se(t)&&(t=vl(t));for(const r in t){const s=t[r];let i;Ne(s)?"default"in s?i=fn(s.from||r,s.default,!0):i=fn(s.from||r):i=fn(s),Le(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function wf(t,e,n){Xt(se(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function am(t,e,n,r){let s=r.includes(".")?jg(n,r):()=>n[r];if(Fe(t)){const i=e[t];he(i)&&Wr(s,i)}else if(he(t))Wr(s,t.bind(n));else if(Ne(t))if(se(t))t.forEach(i=>am(i,e,n,r));else{const i=he(t.handler)?t.handler.bind(n):e[t.handler];he(i)&&Wr(s,i,t)}}function cm(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>ua(l,u,o,!0)),ua(l,e,o)),Ne(e)&&i.set(e,l),l}function ua(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&ua(t,i,n,!0),s&&s.forEach(o=>ua(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const c=uT[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const uT={data:Af,props:Rf,emits:Rf,methods:mi,computed:mi,beforeCreate:wt,created:wt,beforeMount:wt,mounted:wt,beforeUpdate:wt,updated:wt,beforeDestroy:wt,beforeUnmount:wt,destroyed:wt,unmounted:wt,activated:wt,deactivated:wt,errorCaptured:wt,serverPrefetch:wt,components:mi,directives:mi,watch:fT,provide:Af,inject:hT};function Af(t,e){return e?t?function(){return Je(he(t)?t.call(this,this):t,he(e)?e.call(this,this):e)}:e:t}function hT(t,e){return mi(vl(t),vl(e))}function vl(t){if(se(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function wt(t,e){return t?[...new Set([].concat(t,e))]:e}function mi(t,e){return t?Je(Object.create(null),t,e):e}function Rf(t,e){return t?se(t)&&se(e)?[...new Set([...t,...e])]:Je(Object.create(null),yl(t),yl(e??{})):e}function fT(t,e){if(!t)return e;if(!e)return t;const n=Je(Object.create(null),t);for(const r in e)n[r]=wt(t[r],e[r]);return n}function lm(){return{app:null,config:{isNativeTag:tg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let dT=0;function pT(t,e){return function(r,s=null){he(r)||(r=Je({},r)),s!=null&&!Ne(s)&&(s=null);const i=lm(),o=new WeakSet,c=[];let l=!1;const u=i.app={_uid:dT++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:GT,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&he(f.install)?(o.add(f),f.install(u,...p)):he(f)&&(o.add(f),f(u,...p))),u},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),u},component(f,p){return p?(i.components[f]=p,u):i.components[f]},directive(f,p){return p?(i.directives[f]=p,u):i.directives[f]},mount(f,p,g){if(!l){const E=u._ceVNode||at(r,s);return E.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(E,f,g),l=!0,u._container=f,f.__vue_app__=u,ec(E.component)}},onUnmount(f){c.push(f)},unmount(){l&&(Xt(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(f,p){return i.provides[f]=p,u},runWithContext(f){const p=Kr;Kr=u;try{return f()}finally{Kr=p}}};return u}}let Kr=null;const gT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Bt(e)}Modifiers`]||t[`${Cr(e)}Modifiers`];function mT(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ke;let s=n;const i=e.startsWith("update:"),o=i&&gT(r,e.slice(7));o&&(o.trim&&(s=n.map(f=>Fe(f)?f.trim():f)),o.number&&(s=n.map(lu)));let c,l=r[c=Mc(e)]||r[c=Mc(Bt(e))];!l&&i&&(l=r[c=Mc(Cr(e))]),l&&Xt(l,t,6,s);const u=r[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,Xt(u,t,6,s)}}const _T=new WeakMap;function um(t,e,n=!1){const r=n?_T:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},c=!1;if(!he(t)){const l=u=>{const f=um(u,e,!0);f&&(c=!0,Je(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(Ne(t)&&r.set(t,null),null):(se(i)?i.forEach(l=>o[l]=null):Je(o,i),Ne(t)&&r.set(t,o),o)}function Xa(t,e){return!t||!La(e)?!1:(e=e.slice(2).replace(/Once$/,""),Se(t,e[0].toLowerCase()+e.slice(1))||Se(t,Cr(e))||Se(t,e))}function bf(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:c,emit:l,render:u,renderCache:f,props:p,data:g,setupState:E,ctx:C,inheritAttrs:k}=t,S=ca(t);let L,j;try{if(n.shapeFlag&4){const $=s||r,z=$;L=ln(u.call(z,$,f,p,E,g,C)),j=c}else{const $=e;L=ln($.length>1?$(p,{attrs:c,slots:o,emit:l}):$(p,null)),j=e.props?c:yT(c)}}catch($){Ci.length=0,za($,t,1),L=at(Et)}let U=L;if(j&&k!==!1){const $=Object.keys(j),{shapeFlag:z}=U;$.length&&z&7&&(i&&$.some(au)&&(j=ET(j,i)),U=vr(U,j,!1,!0))}return n.dirs&&(U=vr(U,null,!1,!0),U.dirs=U.dirs?U.dirs.concat(n.dirs):n.dirs),n.transition&&Qr(U,n.transition),L=U,ca(S),L}const yT=t=>{let e;for(const n in t)(n==="class"||n==="style"||La(n))&&((e||(e={}))[n]=t[n]);return e},ET=(t,e)=>{const n={};for(const r in t)(!au(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function vT(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:c,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Sf(r,o,u):!!o;if(l&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const g=f[p];if(o[g]!==r[g]&&!Xa(u,g))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?Sf(r,o,u):!0:!!o;return!1}function Sf(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Xa(n,i))return!0}return!1}function TT({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const hm={},fm=()=>Object.create(hm),dm=t=>Object.getPrototypeOf(t)===hm;function IT(t,e,n,r=!1){const s={},i=fm();t.propsDefaults=Object.create(null),pm(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Ng(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function wT(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,c=we(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let g=f[p];if(Xa(t.emitsOptions,g))continue;const E=e[g];if(l)if(Se(i,g))E!==i[g]&&(i[g]=E,u=!0);else{const C=Bt(g);s[C]=Tl(l,c,C,E,t,!1)}else E!==i[g]&&(i[g]=E,u=!0)}}}else{pm(t,e,s,i)&&(u=!0);let f;for(const p in c)(!e||!Se(e,p)&&((f=Cr(p))===p||!Se(e,f)))&&(l?n&&(n[p]!==void 0||n[f]!==void 0)&&(s[p]=Tl(l,c,p,void 0,t,!0)):delete s[p]);if(i!==c)for(const p in i)(!e||!Se(e,p))&&(delete i[p],u=!0)}u&&kn(t.attrs,"set","")}function pm(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(Ii(l))continue;const u=e[l];let f;s&&Se(s,f=Bt(l))?!i||!i.includes(f)?n[f]=u:(c||(c={}))[f]=u:Xa(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=we(n),u=c||ke;for(let f=0;f<i.length;f++){const p=i[f];n[p]=Tl(s,l,p,u[p],t,!Se(u,p))}}return o}function Tl(t,e,n,r,s,i){const o=t[n];if(o!=null){const c=Se(o,"default");if(c&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&he(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const f=so(s);r=u[n]=l.call(null,e),f()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!c?r=!1:o[1]&&(r===""||r===Cr(n))&&(r=!0))}return r}const AT=new WeakMap;function gm(t,e,n=!1){const r=n?AT:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},c=[];let l=!1;if(!he(t)){const f=p=>{l=!0;const[g,E]=gm(p,e,!0);Je(o,g),E&&c.push(...E)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!l)return Ne(t)&&r.set(t,Ts),Ts;if(se(i))for(let f=0;f<i.length;f++){const p=Bt(i[f]);Cf(p)&&(o[p]=ke)}else if(i)for(const f in i){const p=Bt(f);if(Cf(p)){const g=i[f],E=o[p]=se(g)||he(g)?{type:g}:Je({},g),C=E.type;let k=!1,S=!0;if(se(C))for(let L=0;L<C.length;++L){const j=C[L],U=he(j)&&j.name;if(U==="Boolean"){k=!0;break}else U==="String"&&(S=!1)}else k=he(C)&&C.name==="Boolean";E[0]=k,E[1]=S,(k||Se(E,"default"))&&c.push(p)}}const u=[o,c];return Ne(t)&&r.set(t,u),u}function Cf(t){return t[0]!=="$"&&!Ii(t)}const yu=t=>t==="_"||t==="_ctx"||t==="$stable",Eu=t=>se(t)?t.map(ln):[ln(t)],RT=(t,e,n)=>{if(e._n)return e;const r=qv((...s)=>Eu(e(...s)),n);return r._c=!1,r},mm=(t,e,n)=>{const r=t._ctx;for(const s in t){if(yu(s))continue;const i=t[s];if(he(i))e[s]=RT(s,i,r);else if(i!=null){const o=Eu(i);e[s]=()=>o}}},_m=(t,e)=>{const n=Eu(e);t.slots.default=()=>n},ym=(t,e,n)=>{for(const r in e)(n||!yu(r))&&(t[r]=e[r])},bT=(t,e,n)=>{const r=t.slots=fm();if(t.vnode.shapeFlag&32){const s=e._;s?(ym(r,e,n),n&&ig(r,"_",s,!0)):mm(e,r)}else e&&_m(t,e)},ST=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=ke;if(r.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:ym(s,e,n):(i=!e.$stable,mm(e,s)),o=e}else e&&(_m(t,e),o={default:1});if(i)for(const c in s)!yu(c)&&o[c]==null&&delete s[c]},At=DT;function CT(t){return PT(t)}function PT(t,e){const n=qa();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:c,createComment:l,setText:u,setElementText:f,parentNode:p,nextSibling:g,setScopeId:E=un,insertStaticContent:C}=t,k=(T,b,P,O=null,B=null,V=null,K=void 0,G=null,H=!!b.dynamicChildren)=>{if(T===b)return;T&&!qr(T,b)&&(O=x(T),nt(T,B,V,!0),T=null),b.patchFlag===-2&&(H=!1,b.dynamicChildren=null);const{type:q,ref:oe,shapeFlag:Y}=b;switch(q){case Za:S(T,b,P,O);break;case Et:L(T,b,P,O);break;case Hc:T==null&&j(b,P,O,K);break;case _t:A(T,b,P,O,B,V,K,G,H);break;default:Y&1?z(T,b,P,O,B,V,K,G,H):Y&6?v(T,b,P,O,B,V,K,G,H):(Y&64||Y&128)&&q.process(T,b,P,O,B,V,K,G,H,ne)}oe!=null&&B?bi(oe,T&&T.ref,V,b||T,!b):oe==null&&T&&T.ref!=null&&bi(T.ref,null,V,T,!0)},S=(T,b,P,O)=>{if(T==null)r(b.el=c(b.children),P,O);else{const B=b.el=T.el;b.children!==T.children&&u(B,b.children)}},L=(T,b,P,O)=>{T==null?r(b.el=l(b.children||""),P,O):b.el=T.el},j=(T,b,P,O)=>{[T.el,T.anchor]=C(T.children,b,P,O,T.el,T.anchor)},U=({el:T,anchor:b},P,O)=>{let B;for(;T&&T!==b;)B=g(T),r(T,P,O),T=B;r(b,P,O)},$=({el:T,anchor:b})=>{let P;for(;T&&T!==b;)P=g(T),s(T),T=P;s(b)},z=(T,b,P,O,B,V,K,G,H)=>{if(b.type==="svg"?K="svg":b.type==="math"&&(K="mathml"),T==null)J(b,P,O,B,V,K,G,H);else{const q=T.el&&T.el._isVueCE?T.el:null;try{q&&q._beginPatch(),_(T,b,B,V,K,G,H)}finally{q&&q._endPatch()}}},J=(T,b,P,O,B,V,K,G)=>{let H,q;const{props:oe,shapeFlag:Y,transition:re,dirs:ae}=T;if(H=T.el=o(T.type,V,oe&&oe.is,oe),Y&8?f(H,T.children):Y&16&&y(T.children,H,null,O,B,$c(T,V),K,G),ae&&Mr(T,null,O,"created"),R(H,T,T.scopeId,K,O),oe){for(const Pe in oe)Pe!=="value"&&!Ii(Pe)&&i(H,Pe,null,oe[Pe],V,O);"value"in oe&&i(H,"value",null,oe.value,V),(q=oe.onVnodeBeforeMount)&&sn(q,O,T)}ae&&Mr(T,null,O,"beforeMount");const ye=NT(B,re);ye&&re.beforeEnter(H),r(H,b,P),((q=oe&&oe.onVnodeMounted)||ye||ae)&&At(()=>{q&&sn(q,O,T),ye&&re.enter(H),ae&&Mr(T,null,O,"mounted")},B)},R=(T,b,P,O,B)=>{if(P&&E(T,P),O)for(let V=0;V<O.length;V++)E(T,O[V]);if(B){let V=B.subTree;if(b===V||Tm(V.type)&&(V.ssContent===b||V.ssFallback===b)){const K=B.vnode;R(T,K,K.scopeId,K.slotScopeIds,B.parent)}}},y=(T,b,P,O,B,V,K,G,H=0)=>{for(let q=H;q<T.length;q++){const oe=T[q]=G?or(T[q]):ln(T[q]);k(null,oe,b,P,O,B,V,K,G)}},_=(T,b,P,O,B,V,K)=>{const G=b.el=T.el;let{patchFlag:H,dynamicChildren:q,dirs:oe}=b;H|=T.patchFlag&16;const Y=T.props||ke,re=b.props||ke;let ae;if(P&&Lr(P,!1),(ae=re.onVnodeBeforeUpdate)&&sn(ae,P,b,T),oe&&Mr(b,T,P,"beforeUpdate"),P&&Lr(P,!0),(Y.innerHTML&&re.innerHTML==null||Y.textContent&&re.textContent==null)&&f(G,""),q?I(T.dynamicChildren,q,G,P,O,$c(b,B),V):K||de(T,b,G,null,P,O,$c(b,B),V,!1),H>0){if(H&16)w(G,Y,re,P,B);else if(H&2&&Y.class!==re.class&&i(G,"class",null,re.class,B),H&4&&i(G,"style",Y.style,re.style,B),H&8){const ye=b.dynamicProps;for(let Pe=0;Pe<ye.length;Pe++){const Re=ye[Pe],ht=Y[Re],ft=re[Re];(ft!==ht||Re==="value")&&i(G,Re,ht,ft,B,P)}}H&1&&T.children!==b.children&&f(G,b.children)}else!K&&q==null&&w(G,Y,re,P,B);((ae=re.onVnodeUpdated)||oe)&&At(()=>{ae&&sn(ae,P,b,T),oe&&Mr(b,T,P,"updated")},O)},I=(T,b,P,O,B,V,K)=>{for(let G=0;G<b.length;G++){const H=T[G],q=b[G],oe=H.el&&(H.type===_t||!qr(H,q)||H.shapeFlag&198)?p(H.el):P;k(H,q,oe,null,O,B,V,K,!0)}},w=(T,b,P,O,B)=>{if(b!==P){if(b!==ke)for(const V in b)!Ii(V)&&!(V in P)&&i(T,V,b[V],null,B,O);for(const V in P){if(Ii(V))continue;const K=P[V],G=b[V];K!==G&&V!=="value"&&i(T,V,G,K,B,O)}"value"in P&&i(T,"value",b.value,P.value,B)}},A=(T,b,P,O,B,V,K,G,H)=>{const q=b.el=T?T.el:c(""),oe=b.anchor=T?T.anchor:c("");let{patchFlag:Y,dynamicChildren:re,slotScopeIds:ae}=b;ae&&(G=G?G.concat(ae):ae),T==null?(r(q,P,O),r(oe,P,O),y(b.children||[],P,oe,B,V,K,G,H)):Y>0&&Y&64&&re&&T.dynamicChildren&&T.dynamicChildren.length===re.length?(I(T.dynamicChildren,re,P,B,V,K,G),(b.key!=null||B&&b===B.subTree)&&vu(T,b,!0)):de(T,b,P,oe,B,V,K,G,H)},v=(T,b,P,O,B,V,K,G,H)=>{b.slotScopeIds=G,T==null?b.shapeFlag&512?B.ctx.activate(b,P,O,K,H):te(b,P,O,B,V,K,H):fe(T,b,H)},te=(T,b,P,O,B,V,K)=>{const G=T.component=UT(T,O,B);if(Ya(T)&&(G.ctx.renderer=ne),BT(G,!1,K),G.asyncDep){if(B&&B.registerDep(G,_e,K),!T.el){const H=G.subTree=at(Et);L(null,H,b,P),T.placeholder=H.el}}else _e(G,T,b,P,B,V,K)},fe=(T,b,P)=>{const O=b.component=T.component;if(vT(T,b,P))if(O.asyncDep&&!O.asyncResolved){ce(O,b,P);return}else O.next=b,O.update();else b.el=T.el,O.vnode=b},_e=(T,b,P,O,B,V,K)=>{const G=()=>{if(T.isMounted){let{next:Y,bu:re,u:ae,parent:ye,vnode:Pe}=T;{const Ot=Em(T);if(Ot){Y&&(Y.el=Pe.el,ce(T,Y,K)),Ot.asyncDep.then(()=>{T.isUnmounted||G()});return}}let Re=Y,ht;Lr(T,!1),Y?(Y.el=Pe.el,ce(T,Y,K)):Y=Pe,re&&$o(re),(ht=Y.props&&Y.props.onVnodeBeforeUpdate)&&sn(ht,ye,Y,Pe),Lr(T,!0);const ft=bf(T),Dt=T.subTree;T.subTree=ft,k(Dt,ft,p(Dt.el),x(Dt),T,B,V),Y.el=ft.el,Re===null&&TT(T,ft.el),ae&&At(ae,B),(ht=Y.props&&Y.props.onVnodeUpdated)&&At(()=>sn(ht,ye,Y,Pe),B)}else{let Y;const{el:re,props:ae}=b,{bm:ye,m:Pe,parent:Re,root:ht,type:ft}=T,Dt=As(b);Lr(T,!1),ye&&$o(ye),!Dt&&(Y=ae&&ae.onVnodeBeforeMount)&&sn(Y,Re,b),Lr(T,!0);{ht.ce&&ht.ce._def.shadowRoot!==!1&&ht.ce._injectChildStyle(ft);const Ot=T.subTree=bf(T);k(null,Ot,P,O,T,B,V),b.el=Ot.el}if(Pe&&At(Pe,B),!Dt&&(Y=ae&&ae.onVnodeMounted)){const Ot=b;At(()=>sn(Y,Re,Ot),B)}(b.shapeFlag&256||Re&&As(Re.vnode)&&Re.vnode.shapeFlag&256)&&T.a&&At(T.a,B),T.isMounted=!0,b=P=O=null}};T.scope.on();const H=T.effect=new pg(G);T.scope.off();const q=T.update=H.run.bind(H),oe=T.job=H.runIfDirty.bind(H);oe.i=T,oe.id=T.uid,H.scheduler=()=>mu(oe),Lr(T,!0),q()},ce=(T,b,P)=>{b.component=T;const O=T.vnode.props;T.vnode=b,T.next=null,wT(T,b.props,O,P),ST(T,b.children,P),Ln(),mf(T),Fn()},de=(T,b,P,O,B,V,K,G,H=!1)=>{const q=T&&T.children,oe=T?T.shapeFlag:0,Y=b.children,{patchFlag:re,shapeFlag:ae}=b;if(re>0){if(re&128){tn(q,Y,P,O,B,V,K,G,H);return}else if(re&256){lt(q,Y,P,O,B,V,K,G,H);return}}ae&8?(oe&16&&ut(q,B,V),Y!==q&&f(P,Y)):oe&16?ae&16?tn(q,Y,P,O,B,V,K,G,H):ut(q,B,V,!0):(oe&8&&f(P,""),ae&16&&y(Y,P,O,B,V,K,G,H))},lt=(T,b,P,O,B,V,K,G,H)=>{T=T||Ts,b=b||Ts;const q=T.length,oe=b.length,Y=Math.min(q,oe);let re;for(re=0;re<Y;re++){const ae=b[re]=H?or(b[re]):ln(b[re]);k(T[re],ae,P,null,B,V,K,G,H)}q>oe?ut(T,B,V,!0,!1,Y):y(b,P,O,B,V,K,G,H,Y)},tn=(T,b,P,O,B,V,K,G,H)=>{let q=0;const oe=b.length;let Y=T.length-1,re=oe-1;for(;q<=Y&&q<=re;){const ae=T[q],ye=b[q]=H?or(b[q]):ln(b[q]);if(qr(ae,ye))k(ae,ye,P,null,B,V,K,G,H);else break;q++}for(;q<=Y&&q<=re;){const ae=T[Y],ye=b[re]=H?or(b[re]):ln(b[re]);if(qr(ae,ye))k(ae,ye,P,null,B,V,K,G,H);else break;Y--,re--}if(q>Y){if(q<=re){const ae=re+1,ye=ae<oe?b[ae].el:O;for(;q<=re;)k(null,b[q]=H?or(b[q]):ln(b[q]),P,ye,B,V,K,G,H),q++}}else if(q>re)for(;q<=Y;)nt(T[q],B,V,!0),q++;else{const ae=q,ye=q,Pe=new Map;for(q=ye;q<=re;q++){const rt=b[q]=H?or(b[q]):ln(b[q]);rt.key!=null&&Pe.set(rt.key,q)}let Re,ht=0;const ft=re-ye+1;let Dt=!1,Ot=0;const Ht=new Array(ft);for(q=0;q<ft;q++)Ht[q]=0;for(q=ae;q<=Y;q++){const rt=T[q];if(ht>=ft){nt(rt,B,V,!0);continue}let Xe;if(rt.key!=null)Xe=Pe.get(rt.key);else for(Re=ye;Re<=re;Re++)if(Ht[Re-ye]===0&&qr(rt,b[Re])){Xe=Re;break}Xe===void 0?nt(rt,B,V,!0):(Ht[Xe-ye]=q+1,Xe>=Ot?Ot=Xe:Dt=!0,k(rt,b[Xe],P,null,B,V,K,G,H),ht++)}const as=Dt?kT(Ht):Ts;for(Re=as.length-1,q=ft-1;q>=0;q--){const rt=ye+q,Xe=b[rt],Js=b[rt+1],kr=rt+1<oe?Js.el||vm(Js):O;Ht[q]===0?k(null,Xe,P,kr,B,V,K,G,H):Dt&&(Re<0||q!==as[Re]?kt(Xe,P,kr,2):Re--)}}},kt=(T,b,P,O,B=null)=>{const{el:V,type:K,transition:G,children:H,shapeFlag:q}=T;if(q&6){kt(T.component.subTree,b,P,O);return}if(q&128){T.suspense.move(b,P,O);return}if(q&64){K.move(T,b,P,ne);return}if(K===_t){r(V,b,P);for(let Y=0;Y<H.length;Y++)kt(H[Y],b,P,O);r(T.anchor,b,P);return}if(K===Hc){U(T,b,P);return}if(O!==2&&q&1&&G)if(O===0)G.beforeEnter(V),r(V,b,P),At(()=>G.enter(V),B);else{const{leave:Y,delayLeave:re,afterLeave:ae}=G,ye=()=>{T.ctx.isUnmounted?s(V):r(V,b,P)},Pe=()=>{V._isLeaving&&V[Nn](!0),Y(V,()=>{ye(),ae&&ae()})};re?re(V,ye,Pe):Pe()}else r(V,b,P)},nt=(T,b,P,O=!1,B=!1)=>{const{type:V,props:K,ref:G,children:H,dynamicChildren:q,shapeFlag:oe,patchFlag:Y,dirs:re,cacheIndex:ae}=T;if(Y===-2&&(B=!1),G!=null&&(Ln(),bi(G,null,P,T,!0),Fn()),ae!=null&&(b.renderCache[ae]=void 0),oe&256){b.ctx.deactivate(T);return}const ye=oe&1&&re,Pe=!As(T);let Re;if(Pe&&(Re=K&&K.onVnodeBeforeUnmount)&&sn(Re,b,T),oe&6)$t(T.component,P,O);else{if(oe&128){T.suspense.unmount(P,O);return}ye&&Mr(T,null,b,"beforeUnmount"),oe&64?T.type.remove(T,b,P,ne,O):q&&!q.hasOnce&&(V!==_t||Y>0&&Y&64)?ut(q,b,P,!1,!0):(V===_t&&Y&384||!B&&oe&16)&&ut(H,b,P),O&&bn(T)}(Pe&&(Re=K&&K.onVnodeUnmounted)||ye)&&At(()=>{Re&&sn(Re,b,T),ye&&Mr(T,null,b,"unmounted")},P)},bn=T=>{const{type:b,el:P,anchor:O,transition:B}=T;if(b===_t){qt(P,O);return}if(b===Hc){$(T);return}const V=()=>{s(P),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(T.shapeFlag&1&&B&&!B.persisted){const{leave:K,delayLeave:G}=B,H=()=>K(P,V);G?G(T.el,V,H):H()}else V()},qt=(T,b)=>{let P;for(;T!==b;)P=g(T),s(T),T=P;s(b)},$t=(T,b,P)=>{const{bum:O,scope:B,job:V,subTree:K,um:G,m:H,a:q}=T;Pf(H),Pf(q),O&&$o(O),B.stop(),V&&(V.flags|=8,nt(K,T,b,P)),G&&At(G,b),At(()=>{T.isUnmounted=!0},b)},ut=(T,b,P,O=!1,B=!1,V=0)=>{for(let K=V;K<T.length;K++)nt(T[K],b,P,O,B)},x=T=>{if(T.shapeFlag&6)return x(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const b=g(T.anchor||T.el),P=b&&b[qg];return P?g(P):b};let Z=!1;const Q=(T,b,P)=>{let O;T==null?b._vnode&&(nt(b._vnode,null,null,!0),O=b._vnode.component):k(b._vnode||null,T,b,null,null,null,P),b._vnode=T,Z||(Z=!0,mf(O),Lg(),Z=!1)},ne={p:k,um:nt,m:kt,r:bn,mt:te,mc:y,pc:de,pbc:I,n:x,o:t};return{render:Q,hydrate:void 0,createApp:pT(Q)}}function $c({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Lr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function NT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function vu(t,e,n=!1){const r=t.children,s=e.children;if(se(r)&&se(s))for(let i=0;i<r.length;i++){const o=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=or(s[i]),c.el=o.el),!n&&c.patchFlag!==-2&&vu(o,c)),c.type===Za&&(c.patchFlag!==-1?c.el=o.el:c.__elIndex=i+(t.type===_t?1:0)),c.type===Et&&!c.el&&(c.el=o.el)}}function kT(t){const e=t.slice(),n=[0];let r,s,i,o,c;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<u?i=c+1:o=c;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Em(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Em(e)}function Pf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function vm(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?vm(e.subTree):null}const Tm=t=>t.__isSuspense;function DT(t,e){e&&e.pendingBranch?se(t)?e.effects.push(...t):e.effects.push(t):jv(t)}const _t=Symbol.for("v-fgt"),Za=Symbol.for("v-txt"),Et=Symbol.for("v-cmt"),Hc=Symbol.for("v-stc"),Ci=[];let xt=null;function zr(t=!1){Ci.push(xt=t?null:[])}function OT(){Ci.pop(),xt=Ci[Ci.length-1]||null}let ji=1;function ha(t,e=!1){ji+=t,t<0&&xt&&e&&(xt.hasOnce=!0)}function Im(t){return t.dynamicChildren=ji>0?xt||Ts:null,OT(),ji>0&&xt&&xt.push(t),t}function Wo(t,e,n,r,s,i){return Im(Am(t,e,n,r,s,i,!0))}function Il(t,e,n,r,s){return Im(at(t,e,n,r,s,!0))}function qi(t){return t?t.__v_isVNode===!0:!1}function qr(t,e){return t.type===e.type&&t.key===e.key}const wm=({key:t})=>t??null,Ko=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Fe(t)||Le(t)||he(t)?{i:ot,r:t,k:e,f:!!n}:t:null);function Am(t,e=null,n=null,r=0,s=null,i=t===_t?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&wm(e),ref:e&&Ko(e),scopeId:Ug,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ot};return c?(Tu(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Fe(n)?8:16),ji>0&&!o&&xt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&xt.push(l),l}const at=VT;function VT(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===sm)&&(t=Et),qi(t)){const c=vr(t,e,!0);return n&&Tu(c,n),ji>0&&!i&&xt&&(c.shapeFlag&6?xt[xt.indexOf(t)]=c:xt.push(c)),c.patchFlag=-2,c}if(HT(t)&&(t=t.__vccOpts),e){e=xT(e);let{class:c,style:l}=e;c&&!Fe(c)&&(e.class=no(c)),Ne(l)&&(Ka(l)&&!se(l)&&(l=Je({},l)),e.style=$a(l))}const o=Fe(t)?1:Tm(t)?128:$g(t)?64:Ne(t)?4:he(t)?2:0;return Am(t,e,n,r,s,o,i,!0)}function xT(t){return t?Ka(t)||dm(t)?Je({},t):t:null}function vr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:c,transition:l}=t,u=e?MT(s||{},e):s,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&wm(u),ref:e&&e.ref?n&&i?se(i)?i.concat(Ko(e)):[i,Ko(e)]:Ko(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==_t?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&vr(t.ssContent),ssFallback:t.ssFallback&&vr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Qr(f,l.clone(f)),f}function Rm(t=" ",e=0){return at(Za,null,t,e)}function ck(t="",e=!1){return e?(zr(),Il(Et,null,t)):at(Et,null,t)}function ln(t){return t==null||typeof t=="boolean"?at(Et):se(t)?at(_t,null,t.slice()):qi(t)?or(t):at(Za,null,String(t))}function or(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:vr(t)}function Tu(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(se(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Tu(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!dm(e)?e._ctx=ot:s===3&&ot&&(ot.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else he(e)?(e={default:e,_ctx:ot},n=32):(e=String(e),r&64?(n=16,e=[Rm(e)]):n=8);t.children=e,t.shapeFlag|=n}function MT(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=no([e.class,r.class]));else if(s==="style")e.style=$a([e.style,r.style]);else if(La(s)){const i=e[s],o=r[s];o&&i!==o&&!(se(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function sn(t,e,n,r=null){Xt(t,e,7,[n,r])}const LT=lm();let FT=0;function UT(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||LT,i={uid:FT++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new hg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gm(r,s),emitsOptions:um(r,s),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:r.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=mT.bind(null,i),t.ce&&t.ce(i),i}let vt=null;const $s=()=>vt||ot;let fa,wl;{const t=qa(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};fa=e("__VUE_INSTANCE_SETTERS__",n=>vt=n),wl=e("__VUE_SSR_SETTERS__",n=>$i=n)}const so=t=>{const e=vt;return fa(t),t.scope.on(),()=>{t.scope.off(),fa(e)}},Nf=()=>{vt&&vt.scope.off(),fa(null)};function bm(t){return t.vnode.shapeFlag&4}let $i=!1;function BT(t,e=!1,n=!1){e&&wl(e);const{props:r,children:s}=t.vnode,i=bm(t);IT(t,r,i,e),bT(t,s,n||e);const o=i?jT(t,e):void 0;return e&&wl(!1),o}function jT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,oT);const{setup:r}=n;if(r){Ln();const s=t.setupContext=r.length>1?Cm(t):null,i=so(t),o=ro(r,t,0,[t.props,s]),c=ng(o);if(Fn(),i(),(c||t.sp)&&!As(t)&&Jg(t),c){if(o.then(Nf,Nf),e)return o.then(l=>{kf(t,l)}).catch(l=>{za(l,t,0)});t.asyncDep=o}else kf(t,o)}else Sm(t)}function kf(t,e,n){he(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ne(e)&&(t.setupState=Og(e)),Sm(t)}function Sm(t,e,n){const r=t.type;t.render||(t.render=r.render||un);{const s=so(t);Ln();try{cT(t)}finally{Fn(),s()}}}const qT={get(t,e){return mt(t,"get",""),t[e]}};function Cm(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,qT),slots:t.slots,emit:t.emit,expose:e}}function ec(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Og(pu(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Si)return Si[n](t)},has(e,n){return n in e||n in Si}})):t.proxy}function $T(t,e=!0){return he(t)?t.displayName||t.name:t.name||e&&t.__name}function HT(t){return he(t)&&"__vccOpts"in t}const St=(t,e)=>Mv(t,e,$i);function Iu(t,e,n){try{ha(-1);const r=arguments.length;return r===2?Ne(e)&&!se(e)?qi(e)?at(t,null,[e]):at(t,e):at(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&qi(n)&&(n=[n]),at(t,e,n))}finally{ha(1)}}const GT="3.5.26";let Al;const Df=typeof window<"u"&&window.trustedTypes;if(Df)try{Al=Df.createPolicy("vue",{createHTML:t=>t})}catch{}const Pm=Al?t=>Al.createHTML(t):t=>t,WT="http://www.w3.org/2000/svg",KT="http://www.w3.org/1998/Math/MathML",Pn=typeof document<"u"?document:null,Of=Pn&&Pn.createElement("template"),zT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Pn.createElementNS(WT,t):e==="mathml"?Pn.createElementNS(KT,t):n?Pn.createElement(t,{is:n}):Pn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Pn.createTextNode(t),createComment:t=>Pn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Pn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Of.innerHTML=Pm(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=Of.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Zn="transition",di="animation",Os=Symbol("_vtc"),Nm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},km=Je({},Kg,Nm),QT=t=>(t.displayName="Transition",t.props=km,t),lk=QT((t,{slots:e})=>Iu(Qv,Dm(t),e)),Fr=(t,e=[])=>{se(t)?t.forEach(n=>n(...e)):t&&t(...e)},Vf=t=>t?se(t)?t.some(e=>e.length>1):t.length>1:!1;function Dm(t){const e={};for(const A in t)A in Nm||(e[A]=t[A]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:f=c,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:E=`${n}-leave-to`}=t,C=YT(s),k=C&&C[0],S=C&&C[1],{onBeforeEnter:L,onEnter:j,onEnterCancelled:U,onLeave:$,onLeaveCancelled:z,onBeforeAppear:J=L,onAppear:R=j,onAppearCancelled:y=U}=e,_=(A,v,te,fe)=>{A._enterCancelled=fe,nr(A,v?f:c),nr(A,v?u:o),te&&te()},I=(A,v)=>{A._isLeaving=!1,nr(A,p),nr(A,E),nr(A,g),v&&v()},w=A=>(v,te)=>{const fe=A?R:j,_e=()=>_(v,A,te);Fr(fe,[v,_e]),xf(()=>{nr(v,A?l:i),on(v,A?f:c),Vf(fe)||Mf(v,r,k,_e)})};return Je(e,{onBeforeEnter(A){Fr(L,[A]),on(A,i),on(A,o)},onBeforeAppear(A){Fr(J,[A]),on(A,l),on(A,u)},onEnter:w(!1),onAppear:w(!0),onLeave(A,v){A._isLeaving=!0;const te=()=>I(A,v);on(A,p),A._enterCancelled?(on(A,g),Rl(A)):(Rl(A),on(A,g)),xf(()=>{A._isLeaving&&(nr(A,p),on(A,E),Vf($)||Mf(A,r,S,te))}),Fr($,[A,te])},onEnterCancelled(A){_(A,!1,void 0,!0),Fr(U,[A])},onAppearCancelled(A){_(A,!0,void 0,!0),Fr(y,[A])},onLeaveCancelled(A){I(A),Fr(z,[A])}})}function YT(t){if(t==null)return null;if(Ne(t))return[Gc(t.enter),Gc(t.leave)];{const e=Gc(t);return[e,e]}}function Gc(t){return tv(t)}function on(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Os]||(t[Os]=new Set)).add(e)}function nr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Os];n&&(n.delete(e),n.size||(t[Os]=void 0))}function xf(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let JT=0;function Mf(t,e,n,r){const s=t._endId=++JT,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:c,propCount:l}=Om(t,e);if(!o)return r();const u=o+"end";let f=0;const p=()=>{t.removeEventListener(u,g),i()},g=E=>{E.target===t&&++f>=l&&p()};setTimeout(()=>{f<l&&p()},c+1),t.addEventListener(u,g)}function Om(t,e){const n=window.getComputedStyle(t),r=C=>(n[C]||"").split(", "),s=r(`${Zn}Delay`),i=r(`${Zn}Duration`),o=Lf(s,i),c=r(`${di}Delay`),l=r(`${di}Duration`),u=Lf(c,l);let f=null,p=0,g=0;e===Zn?o>0&&(f=Zn,p=o,g=i.length):e===di?u>0&&(f=di,p=u,g=l.length):(p=Math.max(o,u),f=p>0?o>u?Zn:di:null,g=f?f===Zn?i.length:l.length:0);const E=f===Zn&&/\b(?:transform|all)(?:,|$)/.test(r(`${Zn}Property`).toString());return{type:f,timeout:p,propCount:g,hasTransform:E}}function Lf(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Ff(n)+Ff(t[r])))}function Ff(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Rl(t){return(t?t.ownerDocument:document).body.offsetHeight}function XT(t,e,n){const r=t[Os];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const da=Symbol("_vod"),Vm=Symbol("_vsh"),uk={name:"show",beforeMount(t,{value:e},{transition:n}){t[da]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):pi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),pi(t,!0),r.enter(t)):r.leave(t,()=>{pi(t,!1)}):pi(t,e))},beforeUnmount(t,{value:e}){pi(t,e)}};function pi(t,e){t.style.display=e?t[da]:"none",t[Vm]=!e}const ZT=Symbol(""),eI=/(?:^|;)\s*display\s*:/;function tI(t,e,n){const r=t.style,s=Fe(n);let i=!1;if(n&&!s){if(e)if(Fe(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&zo(r,c,"")}else for(const o in e)n[o]==null&&zo(r,o,"");for(const o in n)o==="display"&&(i=!0),zo(r,o,n[o])}else if(s){if(e!==n){const o=r[ZT];o&&(n+=";"+o),r.cssText=n,i=eI.test(n)}}else e&&t.removeAttribute("style");da in t&&(t[da]=i?r.display:"",t[Vm]&&(r.display="none"))}const Uf=/\s*!important$/;function zo(t,e,n){if(se(n))n.forEach(r=>zo(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=nI(t,e);Uf.test(n)?t.setProperty(Cr(r),n.replace(Uf,""),"important"):t[r]=n}}const Bf=["Webkit","Moz","ms"],Wc={};function nI(t,e){const n=Wc[e];if(n)return n;let r=Bt(e);if(r!=="filter"&&r in t)return Wc[e]=r;r=ja(r);for(let s=0;s<Bf.length;s++){const i=Bf[s]+r;if(i in t)return Wc[e]=i}return e}const jf="http://www.w3.org/1999/xlink";function qf(t,e,n,r,s,i=av(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(jf,e.slice(6,e.length)):t.setAttributeNS(jf,e,n):n==null||i&&!og(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Yt(n)?String(n):n)}function $f(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Pm(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(c!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=og(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function cr(t,e,n,r){t.addEventListener(e,n,r)}function rI(t,e,n,r){t.removeEventListener(e,n,r)}const Hf=Symbol("_vei");function sI(t,e,n,r,s=null){const i=t[Hf]||(t[Hf]={}),o=i[e];if(r&&o)o.value=r;else{const[c,l]=iI(e);if(r){const u=i[e]=cI(r,s);cr(t,c,u,l)}else o&&(rI(t,c,o,l),i[e]=void 0)}}const Gf=/(?:Once|Passive|Capture)$/;function iI(t){let e;if(Gf.test(t)){e={};let r;for(;r=t.match(Gf);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Cr(t.slice(2)),e]}let Kc=0;const oI=Promise.resolve(),aI=()=>Kc||(oI.then(()=>Kc=0),Kc=Date.now());function cI(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Xt(lI(r,n.value),e,5,[r])};return n.value=t,n.attached=aI(),n}function lI(t,e){if(se(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Wf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,uI=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?XT(t,r,o):e==="style"?tI(t,n,r):La(e)?au(e)||sI(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):hI(t,e,r,o))?($f(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&qf(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Fe(r))?$f(t,Bt(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),qf(t,e,r,o))};function hI(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Wf(e)&&he(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Wf(e)&&Fe(n)?!1:e in t}const xm=new WeakMap,Mm=new WeakMap,pa=Symbol("_moveCb"),Kf=Symbol("_enterCb"),fI=t=>(delete t.props.mode,t),dI=fI({name:"TransitionGroup",props:Je({},km,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=$s(),r=Wg();let s,i;return em(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!_I(s[0].el,n.vnode.el,o)){s=[];return}s.forEach(pI),s.forEach(gI);const c=s.filter(mI);Rl(n.vnode.el),c.forEach(l=>{const u=l.el,f=u.style;on(u,o),f.transform=f.webkitTransform=f.transitionDuration="";const p=u[pa]=g=>{g&&g.target!==u||(!g||g.propertyName.endsWith("transform"))&&(u.removeEventListener("transitionend",p),u[pa]=null,nr(u,o))};u.addEventListener("transitionend",p)}),s=[]}),()=>{const o=we(t),c=Dm(o);let l=o.tag||_t;if(s=[],i)for(let u=0;u<i.length;u++){const f=i[u];f.el&&f.el instanceof Element&&(s.push(f),Qr(f,Bi(f,c,r,n)),xm.set(f,{left:f.el.offsetLeft,top:f.el.offsetTop}))}i=e.default?_u(e.default()):[];for(let u=0;u<i.length;u++){const f=i[u];f.key!=null&&Qr(f,Bi(f,c,r,n))}return at(l,null,i)}}}),hk=dI;function pI(t){const e=t.el;e[pa]&&e[pa](),e[Kf]&&e[Kf]()}function gI(t){Mm.set(t,{left:t.el.offsetLeft,top:t.el.offsetTop})}function mI(t){const e=xm.get(t),n=Mm.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function _I(t,e,n){const r=t.cloneNode(),s=t[Os];s&&s.forEach(c=>{c.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(c=>c&&r.classList.add(c)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=Om(r);return i.removeChild(r),o}const Vs=t=>{const e=t.props["onUpdate:modelValue"]||!1;return se(e)?n=>$o(e,n):e};function yI(t){t.target.composing=!0}function zf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Mn=Symbol("_assign");function Qf(t,e,n){return e&&(t=t.trim()),n&&(t=lu(t)),t}const fk={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Mn]=Vs(s);const i=r||s.props&&s.props.type==="number";cr(t,e?"change":"input",o=>{o.target.composing||t[Mn](Qf(t.value,n,i))}),(n||i)&&cr(t,"change",()=>{t.value=Qf(t.value,n,i)}),e||(cr(t,"compositionstart",yI),cr(t,"compositionend",zf),cr(t,"change",zf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[Mn]=Vs(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?lu(t.value):t.value,l=e??"";c!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},dk={deep:!0,created(t,e,n){t[Mn]=Vs(n),cr(t,"change",()=>{const r=t._modelValue,s=Lm(t),i=t.checked,o=t[Mn];if(se(r)){const c=ag(r,s),l=c!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const u=[...r];u.splice(c,1),o(u)}}else if(Fa(r)){const c=new Set(r);i?c.add(s):c.delete(s),o(c)}else o(Fm(t,i))})},mounted:Yf,beforeUpdate(t,e,n){t[Mn]=Vs(n),Yf(t,e,n)}};function Yf(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(se(e))s=ag(e,r.props.value)>-1;else if(Fa(e))s=e.has(r.props.value);else{if(e===n)return;s=ks(e,Fm(t,!0))}t.checked!==s&&(t.checked=s)}const pk={created(t,{value:e},n){t.checked=ks(e,n.props.value),t[Mn]=Vs(n),cr(t,"change",()=>{t[Mn](Lm(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Mn]=Vs(r),e!==n&&(t.checked=ks(e,r.props.value))}};function Lm(t){return"_value"in t?t._value:t.value}function Fm(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const EI=["ctrl","shift","alt","meta"],vI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>EI.some(n=>t[`${n}Key`]&&!e.includes(n))},gk=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const c=vI[e[o]];if(c&&c(s,e))return}return t(s,...i)}))},TI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},mk=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=Cr(s.key);if(e.some(o=>o===i||TI[o]===i))return t(s)}))},II=Je({patchProp:uI},zT);let Jf;function wI(){return Jf||(Jf=CT(II))}const AI=((...t)=>{const e=wI().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=bI(r);if(!s)return;const i=e._component;!he(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,RI(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function RI(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function bI(t){return Fe(t)?document.querySelector(t):t}let Um;const tc=t=>Um=t,Bm=Symbol();function bl(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Pi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Pi||(Pi={}));function SI(){const t=fg(!0),e=t.run(()=>ze({}));let n=[],r=[];const s=pu({install(i){tc(s),s._a=i,i.provide(Bm,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const jm=()=>{};function Xf(t,e,n,r=jm){t.add(e);const s=()=>{t.delete(e)&&r()};return!n&&dg()&&lv(s),s}function fs(t,...e){t.forEach(n=>{n(...e)})}const CI=t=>t(),Zf=Symbol(),zc=Symbol();function Sl(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];bl(s)&&bl(r)&&t.hasOwnProperty(n)&&!Le(r)&&!hn(r)?t[n]=Sl(s,r):t[n]=r}return t}const PI=Symbol();function NI(t){return!bl(t)||!Object.prototype.hasOwnProperty.call(t,PI)}const{assign:rr}=Object;function kI(t){return!!(Le(t)&&t.effect)}function DI(t,e,n,r){const{state:s,actions:i,getters:o}=e,c=n.state.value[t];let l;function u(){c||(n.state.value[t]=s?s():{});const f=kv(n.state.value[t]);return rr(f,i,Object.keys(o||{}).reduce((p,g)=>(p[g]=pu(St(()=>{tc(n);const E=n._s.get(t);return o[g].call(E,E)})),p),{}))}return l=qm(t,u,e,n,r,!0),l}function qm(t,e,n={},r,s,i){let o;const c=rr({actions:{}},n),l={deep:!0};let u,f,p=new Set,g=new Set,E;const C=r.state.value[t];!i&&!C&&(r.state.value[t]={}),ze({});let k;function S(y){let _;u=f=!1,typeof y=="function"?(y(r.state.value[t]),_={type:Pi.patchFunction,storeId:t,events:E}):(Sl(r.state.value[t],y),_={type:Pi.patchObject,payload:y,storeId:t,events:E});const I=k=Symbol();gu().then(()=>{k===I&&(u=!0)}),f=!0,fs(p,_,r.state.value[t])}const L=i?function(){const{state:_}=n,I=_?_():{};this.$patch(w=>{rr(w,I)})}:jm;function j(){o.stop(),p.clear(),g.clear(),r._s.delete(t)}const U=(y,_="")=>{if(Zf in y)return y[zc]=_,y;const I=function(){tc(r);const w=Array.from(arguments),A=new Set,v=new Set;function te(ce){A.add(ce)}function fe(ce){v.add(ce)}fs(g,{args:w,name:I[zc],store:z,after:te,onError:fe});let _e;try{_e=y.apply(this&&this.$id===t?this:z,w)}catch(ce){throw fs(v,ce),ce}return _e instanceof Promise?_e.then(ce=>(fs(A,ce),ce)).catch(ce=>(fs(v,ce),Promise.reject(ce))):(fs(A,_e),_e)};return I[Zf]=!0,I[zc]=_,I},$={_p:r,$id:t,$onAction:Xf.bind(null,g),$patch:S,$reset:L,$subscribe(y,_={}){const I=Xf(p,y,_.detached,()=>w()),w=o.run(()=>Wr(()=>r.state.value[t],A=>{(_.flush==="sync"?f:u)&&y({storeId:t,type:Pi.direct,events:E},A)},rr({},l,_)));return I},$dispose:j},z=Er($);r._s.set(t,z);const R=(r._a&&r._a.runWithContext||CI)(()=>r._e.run(()=>(o=fg()).run(()=>e({action:U}))));for(const y in R){const _=R[y];if(Le(_)&&!kI(_)||hn(_))i||(C&&NI(_)&&(Le(_)?_.value=C[y]:Sl(_,C[y])),r.state.value[t][y]=_);else if(typeof _=="function"){const I=U(_,y);R[y]=I,c.actions[y]=_}}return rr(z,R),rr(we(z),R),Object.defineProperty(z,"$state",{get:()=>r.state.value[t],set:y=>{S(_=>{rr(_,y)})}}),r._p.forEach(y=>{rr(z,o.run(()=>y({store:z,app:r._a,pinia:r,options:c})))}),C&&i&&n.hydrate&&n.hydrate(z.$state,C),u=!0,f=!0,z}function wu(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,c){const l=$v();return o=o||(l?fn(Bm,null):null),o&&tc(o),o=Um,o._s.has(t)||(s?qm(t,e,r,o):DI(t,r,o)),o._s.get(t)}return i.$id=t,i}function OI(t){const e=we(t),n={};for(const r in e){const s=e[r];s.effect?n[r]=St({get:()=>t[r],set(i){t[r]=i}}):(Le(s)||hn(s))&&(n[r]=Vv(t,r))}return n}const VI="modulepreload",xI=function(t){return"/game-echo/"+t},ed={},td=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");s=l(n.map(u=>{if(u=xI(u),u in ed)return;ed[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":VI,f||(g.as="script"),g.crossOrigin="",g.href=u,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((E,C)=>{g.addEventListener("load",E),g.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};const ps=typeof document<"u";function $m(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function MI(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&$m(t.default)}const be=Object.assign;function Qc(t,e){const n={};for(const r in e){const s=e[r];n[r]=Zt(s)?s.map(t):t(s)}return n}const Ni=()=>{},Zt=Array.isArray;function nd(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const Hm=/#/g,LI=/&/g,FI=/\//g,UI=/=/g,BI=/\?/g,Gm=/\+/g,jI=/%5B/g,qI=/%5D/g,Wm=/%5E/g,$I=/%60/g,Km=/%7B/g,HI=/%7C/g,zm=/%7D/g,GI=/%20/g;function Au(t){return t==null?"":encodeURI(""+t).replace(HI,"|").replace(jI,"[").replace(qI,"]")}function WI(t){return Au(t).replace(Km,"{").replace(zm,"}").replace(Wm,"^")}function Cl(t){return Au(t).replace(Gm,"%2B").replace(GI,"+").replace(Hm,"%23").replace(LI,"%26").replace($I,"`").replace(Km,"{").replace(zm,"}").replace(Wm,"^")}function KI(t){return Cl(t).replace(UI,"%3D")}function zI(t){return Au(t).replace(Hm,"%23").replace(BI,"%3F")}function QI(t){return zI(t).replace(FI,"%2F")}function Hi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const YI=/\/$/,JI=t=>t.replace(YI,"");function Yc(t,e,n="/"){let r,s={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return l=c>=0&&l>c?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,c>0?c:e.length),s=t(i.slice(1))),c>=0&&(r=r||e.slice(0,c),o=e.slice(c,e.length)),r=tw(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Hi(o)}}function XI(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function rd(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function ZI(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&xs(e.matched[r],n.matched[s])&&Qm(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function xs(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Qm(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!ew(t[n],e[n]))return!1;return!0}function ew(t,e){return Zt(t)?sd(t,e):Zt(e)?sd(e,t):t?.valueOf()===e?.valueOf()}function sd(t,e){return Zt(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function tw(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,c;for(o=0;o<r.length;o++)if(c=r[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const er={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Pl=(function(t){return t.pop="pop",t.push="push",t})({}),Jc=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function nw(t){if(!t)if(ps){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),JI(t)}const rw=/^[^#]+#/;function sw(t,e){return t.replace(rw,"#")+e}function iw(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const nc=()=>({left:window.scrollX,top:window.scrollY});function ow(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=iw(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function id(t,e){return(history.state?history.state.position-e:-1)+t}const Nl=new Map;function aw(t,e){Nl.set(t,e)}function cw(t){const e=Nl.get(t);return Nl.delete(t),e}function lw(t){return typeof t=="string"||t&&typeof t=="object"}function Ym(t){return typeof t=="string"||typeof t=="symbol"}let je=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Jm=Symbol("");je.MATCHER_NOT_FOUND+"",je.NAVIGATION_GUARD_REDIRECT+"",je.NAVIGATION_ABORTED+"",je.NAVIGATION_CANCELLED+"",je.NAVIGATION_DUPLICATED+"";function Ms(t,e){return be(new Error,{type:t,[Jm]:!0},e)}function Cn(t,e){return t instanceof Error&&Jm in t&&(e==null||!!(t.type&e))}const uw=["params","query","hash"];function hw(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of uw)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function fw(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(Gm," "),i=s.indexOf("="),o=Hi(i<0?s:s.slice(0,i)),c=i<0?null:Hi(s.slice(i+1));if(o in e){let l=e[o];Zt(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function od(t){let e="";for(let n in t){const r=t[n];if(n=KI(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Zt(r)?r.map(s=>s&&Cl(s)):[r&&Cl(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function dw(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Zt(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const pw=Symbol(""),ad=Symbol(""),Ru=Symbol(""),Xm=Symbol(""),kl=Symbol("");function gi(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ar(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const u=g=>{g===!1?l(Ms(je.NAVIGATION_ABORTED,{from:n,to:e})):g instanceof Error?l(g):lw(g)?l(Ms(je.NAVIGATION_GUARD_REDIRECT,{from:e,to:g})):(o&&r.enterCallbacks[s]===o&&typeof g=="function"&&o.push(g),c())},f=i(()=>t.call(r&&r.instances[s],e,n,u));let p=Promise.resolve(f);t.length<3&&(p=p.then(u)),p.catch(g=>l(g))})}function Xc(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if($m(l)){const u=(l.__vccOpts||l)[e];u&&i.push(ar(u,n,r,o,c,s))}else{let u=l();i.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const p=MI(f)?f.default:f;o.mods[c]=f,o.components[c]=p;const g=(p.__vccOpts||p)[e];return g&&ar(g,n,r,o,c,s)()}))}}return i}function gw(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(u=>xs(u,c))?r.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(u=>xs(u,l))||s.push(l))}return[n,r,s]}let mw=()=>location.protocol+"//"+location.host;function Zm(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(o);return c[0]!=="/"&&(c="/"+c),rd(c,"")}return rd(n,t)+r+s}function _w(t,e,n,r){let s=[],i=[],o=null;const c=({state:g})=>{const E=Zm(t,location),C=n.value,k=e.value;let S=0;if(g){if(n.value=E,e.value=g,o&&o===C){o=null;return}S=k?g.position-k.position:0}else r(E);s.forEach(L=>{L(n.value,C,{delta:S,type:Pl.pop,direction:S?S>0?Jc.forward:Jc.back:Jc.unknown})})};function l(){o=n.value}function u(g){s.push(g);const E=()=>{const C=s.indexOf(g);C>-1&&s.splice(C,1)};return i.push(E),E}function f(){if(document.visibilityState==="hidden"){const{history:g}=window;if(!g.state)return;g.replaceState(be({},g.state,{scroll:nc()}),"")}}function p(){for(const g of i)g();i=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:l,listen:u,destroy:p}}function cd(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?nc():null}}function yw(t){const{history:e,location:n}=window,r={value:Zm(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,f){const p=t.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:mw()+t+l;try{e[f?"replaceState":"pushState"](u,"",g),s.value=u}catch(E){console.error(E),n[f?"replace":"assign"](g)}}function o(l,u){i(l,be({},e.state,cd(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function c(l,u){const f=be({},s.value,e.state,{forward:l,scroll:nc()});i(f.current,f,!0),i(l,be({},cd(r.value,l,null),{position:f.position+1},u),!1),r.value=l}return{location:r,state:s,push:c,replace:o}}function Ew(t){t=nw(t);const e=yw(t),n=_w(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=be({location:"",base:t,go:r,createHref:sw.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function vw(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),Ew(t)}let $r=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Ke=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Ke||{});const Tw={type:$r.Static,value:""},Iw=/[a-zA-Z0-9_]/;function ww(t){if(!t)return[[]];if(t==="/")return[[Tw]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(E){throw new Error(`ERR (${n})/"${u}": ${E}`)}let n=Ke.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let c=0,l,u="",f="";function p(){u&&(n===Ke.Static?i.push({type:$r.Static,value:u}):n===Ke.Param||n===Ke.ParamRegExp||n===Ke.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:$r.Param,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function g(){u+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==Ke.ParamRegExp){r=n,n=Ke.EscapeNext;continue}switch(n){case Ke.Static:l==="/"?(u&&p(),o()):l===":"?(p(),n=Ke.Param):g();break;case Ke.EscapeNext:g(),n=r;break;case Ke.Param:l==="("?n=Ke.ParamRegExp:Iw.test(l)?g():(p(),n=Ke.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case Ke.ParamRegExp:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=Ke.ParamRegExpEnd:f+=l;break;case Ke.ParamRegExpEnd:p(),n=Ke.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--,f="";break;default:e("Unknown state");break}}return n===Ke.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),p(),o(),s}const ld="[^/]+?",Aw={sensitive:!1,strict:!1,start:!0,end:!0};var Rt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Rt||{});const Rw=/[.+*?^${}()[\]/\\]/g;function bw(t,e){const n=be({},Aw,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const f=u.length?[]:[Rt.Root];n.strict&&!u.length&&(s+="/");for(let p=0;p<u.length;p++){const g=u[p];let E=Rt.Segment+(n.sensitive?Rt.BonusCaseSensitive:0);if(g.type===$r.Static)p||(s+="/"),s+=g.value.replace(Rw,"\\$&"),E+=Rt.Static;else if(g.type===$r.Param){const{value:C,repeatable:k,optional:S,regexp:L}=g;i.push({name:C,repeatable:k,optional:S});const j=L||ld;if(j!==ld){E+=Rt.BonusCustomRegExp;try{`${j}`}catch($){throw new Error(`Invalid custom RegExp for param "${C}" (${j}): `+$.message)}}let U=k?`((?:${j})(?:/(?:${j}))*)`:`(${j})`;p||(U=S&&u.length<2?`(?:/${U})`:"/"+U),S&&(U+="?"),s+=U,E+=Rt.Dynamic,S&&(E+=Rt.BonusOptional),k&&(E+=Rt.BonusRepeatable),j===".*"&&(E+=Rt.BonusWildcard)}f.push(E)}r.push(f)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=Rt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function c(u){const f=u.match(o),p={};if(!f)return null;for(let g=1;g<f.length;g++){const E=f[g]||"",C=i[g-1];p[C.name]=E&&C.repeatable?E.split("/"):E}return p}function l(u){let f="",p=!1;for(const g of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const E of g)if(E.type===$r.Static)f+=E.value;else if(E.type===$r.Param){const{value:C,repeatable:k,optional:S}=E,L=C in u?u[C]:"";if(Zt(L)&&!k)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const j=Zt(L)?L.join("/"):L;if(!j)if(S)g.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${C}"`);f+=j}}return f||"/"}return{re:o,score:r,keys:i,parse:c,stringify:l}}function Sw(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Rt.Static+Rt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Rt.Static+Rt.Segment?1:-1:0}function e_(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=Sw(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(ud(r))return 1;if(ud(s))return-1}return s.length-r.length}function ud(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Cw={strict:!1,end:!0,sensitive:!1};function Pw(t,e,n){const r=bw(ww(t.path),n),s=be(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function Nw(t,e){const n=[],r=new Map;e=nd(Cw,e);function s(p){return r.get(p)}function i(p,g,E){const C=!E,k=fd(p);k.aliasOf=E&&E.record;const S=nd(e,p),L=[k];if("alias"in p){const $=typeof p.alias=="string"?[p.alias]:p.alias;for(const z of $)L.push(fd(be({},k,{components:E?E.record.components:k.components,path:z,aliasOf:E?E.record:k})))}let j,U;for(const $ of L){const{path:z}=$;if(g&&z[0]!=="/"){const J=g.record.path,R=J[J.length-1]==="/"?"":"/";$.path=g.record.path+(z&&R+z)}if(j=Pw($,g,S),E?E.alias.push(j):(U=U||j,U!==j&&U.alias.push(j),C&&p.name&&!dd(j)&&o(p.name)),t_(j)&&l(j),k.children){const J=k.children;for(let R=0;R<J.length;R++)i(J[R],j,E&&E.children[R])}E=E||j}return U?()=>{o(U)}:Ni}function o(p){if(Ym(p)){const g=r.get(p);g&&(r.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function c(){return n}function l(p){const g=Ow(p,n);n.splice(g,0,p),p.record.name&&!dd(p)&&r.set(p.record.name,p)}function u(p,g){let E,C={},k,S;if("name"in p&&p.name){if(E=r.get(p.name),!E)throw Ms(je.MATCHER_NOT_FOUND,{location:p});S=E.record.name,C=be(hd(g.params,E.keys.filter(U=>!U.optional).concat(E.parent?E.parent.keys.filter(U=>U.optional):[]).map(U=>U.name)),p.params&&hd(p.params,E.keys.map(U=>U.name))),k=E.stringify(C)}else if(p.path!=null)k=p.path,E=n.find(U=>U.re.test(k)),E&&(C=E.parse(k),S=E.record.name);else{if(E=g.name?r.get(g.name):n.find(U=>U.re.test(g.path)),!E)throw Ms(je.MATCHER_NOT_FOUND,{location:p,currentLocation:g});S=E.record.name,C=be({},g.params,p.params),k=E.stringify(C)}const L=[];let j=E;for(;j;)L.unshift(j.record),j=j.parent;return{name:S,path:k,params:C,matched:L,meta:Dw(L)}}t.forEach(p=>i(p));function f(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:f,getRoutes:c,getRecordMatcher:s}}function hd(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function fd(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:kw(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function kw(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function dd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Dw(t){return t.reduce((e,n)=>be(e,n.meta),{})}function Ow(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;e_(t,e[i])<0?r=i:n=i+1}const s=Vw(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function Vw(t){let e=t;for(;e=e.parent;)if(t_(e)&&e_(t,e)===0)return e}function t_({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function pd(t){const e=fn(Ru),n=fn(Xm),r=St(()=>{const l=zt(t.to);return e.resolve(l)}),s=St(()=>{const{matched:l}=r.value,{length:u}=l,f=l[u-1],p=n.matched;if(!f||!p.length)return-1;const g=p.findIndex(xs.bind(null,f));if(g>-1)return g;const E=gd(l[u-2]);return u>1&&gd(f)===E&&p[p.length-1].path!==E?p.findIndex(xs.bind(null,l[u-2])):g}),i=St(()=>s.value>-1&&Uw(n.params,r.value.params)),o=St(()=>s.value>-1&&s.value===n.matched.length-1&&Qm(n.params,r.value.params));function c(l={}){if(Fw(l)){const u=e[zt(t.replace)?"replace":"push"](zt(t.to)).catch(Ni);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:St(()=>r.value.href),isActive:i,isExactActive:o,navigate:c}}function xw(t){return t.length===1?t[0]:t}const Mw=Qa({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:pd,setup(t,{slots:e}){const n=Er(pd(t)),{options:r}=fn(Ru),s=St(()=>({[md(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[md(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&xw(e.default(n));return t.custom?i:Iu("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Lw=Mw;function Fw(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Uw(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Zt(s)||s.length!==r.length||r.some((i,o)=>i.valueOf()!==s[o].valueOf()))return!1}return!0}function gd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const md=(t,e,n)=>t??e??n,Bw=Qa({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=fn(kl),s=St(()=>t.route||r.value),i=fn(ad,0),o=St(()=>{let u=zt(i);const{matched:f}=s.value;let p;for(;(p=f[u])&&!p.components;)u++;return u}),c=St(()=>s.value.matched[o.value]);Ho(ad,St(()=>o.value+1)),Ho(pw,c),Ho(kl,s);const l=ze();return Wr(()=>[l.value,c.value,t.name],([u,f,p],[g,E,C])=>{f&&(f.instances[p]=u,E&&E!==f&&u&&u===g&&(f.leaveGuards.size||(f.leaveGuards=E.leaveGuards),f.updateGuards.size||(f.updateGuards=E.updateGuards))),u&&f&&(!E||!xs(f,E)||!g)&&(f.enterCallbacks[p]||[]).forEach(k=>k(u))},{flush:"post"}),()=>{const u=s.value,f=t.name,p=c.value,g=p&&p.components[f];if(!g)return _d(n.default,{Component:g,route:u});const E=p.props[f],C=E?E===!0?u.params:typeof E=="function"?E(u):E:null,S=Iu(g,be({},C,e,{onVnodeUnmounted:L=>{L.component.isUnmounted&&(p.instances[f]=null)},ref:l}));return _d(n.default,{Component:S,route:u})||S}}});function _d(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const jw=Bw;function qw(t){const e=Nw(t.routes,t),n=t.parseQuery||fw,r=t.stringifyQuery||od,s=t.history,i=gi(),o=gi(),c=gi(),l=kg(er);let u=er;ps&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Qc.bind(null,x=>""+x),p=Qc.bind(null,QI),g=Qc.bind(null,Hi);function E(x,Z){let Q,ne;return Ym(x)?(Q=e.getRecordMatcher(x),ne=Z):ne=x,e.addRoute(ne,Q)}function C(x){const Z=e.getRecordMatcher(x);Z&&e.removeRoute(Z)}function k(){return e.getRoutes().map(x=>x.record)}function S(x){return!!e.getRecordMatcher(x)}function L(x,Z){if(Z=be({},Z||l.value),typeof x=="string"){const P=Yc(n,x,Z.path),O=e.resolve({path:P.path},Z),B=s.createHref(P.fullPath);return be(P,O,{params:g(O.params),hash:Hi(P.hash),redirectedFrom:void 0,href:B})}let Q;if(x.path!=null)Q=be({},x,{path:Yc(n,x.path,Z.path).path});else{const P=be({},x.params);for(const O in P)P[O]==null&&delete P[O];Q=be({},x,{params:p(P)}),Z.params=p(Z.params)}const ne=e.resolve(Q,Z),Ee=x.hash||"";ne.params=f(g(ne.params));const T=XI(r,be({},x,{hash:WI(Ee),path:ne.path})),b=s.createHref(T);return be({fullPath:T,hash:Ee,query:r===od?dw(x.query):x.query||{}},ne,{redirectedFrom:void 0,href:b})}function j(x){return typeof x=="string"?Yc(n,x,l.value.path):be({},x)}function U(x,Z){if(u!==x)return Ms(je.NAVIGATION_CANCELLED,{from:Z,to:x})}function $(x){return R(x)}function z(x){return $(be(j(x),{replace:!0}))}function J(x,Z){const Q=x.matched[x.matched.length-1];if(Q&&Q.redirect){const{redirect:ne}=Q;let Ee=typeof ne=="function"?ne(x,Z):ne;return typeof Ee=="string"&&(Ee=Ee.includes("?")||Ee.includes("#")?Ee=j(Ee):{path:Ee},Ee.params={}),be({query:x.query,hash:x.hash,params:Ee.path!=null?{}:x.params},Ee)}}function R(x,Z){const Q=u=L(x),ne=l.value,Ee=x.state,T=x.force,b=x.replace===!0,P=J(Q,ne);if(P)return R(be(j(P),{state:typeof P=="object"?be({},Ee,P.state):Ee,force:T,replace:b}),Z||Q);const O=Q;O.redirectedFrom=Z;let B;return!T&&ZI(r,ne,Q)&&(B=Ms(je.NAVIGATION_DUPLICATED,{to:O,from:ne}),kt(ne,ne,!0,!1)),(B?Promise.resolve(B):I(O,ne)).catch(V=>Cn(V)?Cn(V,je.NAVIGATION_GUARD_REDIRECT)?V:tn(V):de(V,O,ne)).then(V=>{if(V){if(Cn(V,je.NAVIGATION_GUARD_REDIRECT))return R(be({replace:b},j(V.to),{state:typeof V.to=="object"?be({},Ee,V.to.state):Ee,force:T}),Z||O)}else V=A(O,ne,!0,b,Ee);return w(O,ne,V),V})}function y(x,Z){const Q=U(x,Z);return Q?Promise.reject(Q):Promise.resolve()}function _(x){const Z=qt.values().next().value;return Z&&typeof Z.runWithContext=="function"?Z.runWithContext(x):x()}function I(x,Z){let Q;const[ne,Ee,T]=gw(x,Z);Q=Xc(ne.reverse(),"beforeRouteLeave",x,Z);for(const P of ne)P.leaveGuards.forEach(O=>{Q.push(ar(O,x,Z))});const b=y.bind(null,x,Z);return Q.push(b),ut(Q).then(()=>{Q=[];for(const P of i.list())Q.push(ar(P,x,Z));return Q.push(b),ut(Q)}).then(()=>{Q=Xc(Ee,"beforeRouteUpdate",x,Z);for(const P of Ee)P.updateGuards.forEach(O=>{Q.push(ar(O,x,Z))});return Q.push(b),ut(Q)}).then(()=>{Q=[];for(const P of T)if(P.beforeEnter)if(Zt(P.beforeEnter))for(const O of P.beforeEnter)Q.push(ar(O,x,Z));else Q.push(ar(P.beforeEnter,x,Z));return Q.push(b),ut(Q)}).then(()=>(x.matched.forEach(P=>P.enterCallbacks={}),Q=Xc(T,"beforeRouteEnter",x,Z,_),Q.push(b),ut(Q))).then(()=>{Q=[];for(const P of o.list())Q.push(ar(P,x,Z));return Q.push(b),ut(Q)}).catch(P=>Cn(P,je.NAVIGATION_CANCELLED)?P:Promise.reject(P))}function w(x,Z,Q){c.list().forEach(ne=>_(()=>ne(x,Z,Q)))}function A(x,Z,Q,ne,Ee){const T=U(x,Z);if(T)return T;const b=Z===er,P=ps?history.state:{};Q&&(ne||b?s.replace(x.fullPath,be({scroll:b&&P&&P.scroll},Ee)):s.push(x.fullPath,Ee)),l.value=x,kt(x,Z,Q,b),tn()}let v;function te(){v||(v=s.listen((x,Z,Q)=>{if(!$t.listening)return;const ne=L(x),Ee=J(ne,$t.currentRoute.value);if(Ee){R(be(Ee,{replace:!0,force:!0}),ne).catch(Ni);return}u=ne;const T=l.value;ps&&aw(id(T.fullPath,Q.delta),nc()),I(ne,T).catch(b=>Cn(b,je.NAVIGATION_ABORTED|je.NAVIGATION_CANCELLED)?b:Cn(b,je.NAVIGATION_GUARD_REDIRECT)?(R(be(j(b.to),{force:!0}),ne).then(P=>{Cn(P,je.NAVIGATION_ABORTED|je.NAVIGATION_DUPLICATED)&&!Q.delta&&Q.type===Pl.pop&&s.go(-1,!1)}).catch(Ni),Promise.reject()):(Q.delta&&s.go(-Q.delta,!1),de(b,ne,T))).then(b=>{b=b||A(ne,T,!1),b&&(Q.delta&&!Cn(b,je.NAVIGATION_CANCELLED)?s.go(-Q.delta,!1):Q.type===Pl.pop&&Cn(b,je.NAVIGATION_ABORTED|je.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),w(ne,T,b)}).catch(Ni)}))}let fe=gi(),_e=gi(),ce;function de(x,Z,Q){tn(x);const ne=_e.list();return ne.length?ne.forEach(Ee=>Ee(x,Z,Q)):console.error(x),Promise.reject(x)}function lt(){return ce&&l.value!==er?Promise.resolve():new Promise((x,Z)=>{fe.add([x,Z])})}function tn(x){return ce||(ce=!x,te(),fe.list().forEach(([Z,Q])=>x?Q(x):Z()),fe.reset()),x}function kt(x,Z,Q,ne){const{scrollBehavior:Ee}=t;if(!ps||!Ee)return Promise.resolve();const T=!Q&&cw(id(x.fullPath,0))||(ne||!Q)&&history.state&&history.state.scroll||null;return gu().then(()=>Ee(x,Z,T)).then(b=>b&&ow(b)).catch(b=>de(b,x,Z))}const nt=x=>s.go(x);let bn;const qt=new Set,$t={currentRoute:l,listening:!0,addRoute:E,removeRoute:C,clearRoutes:e.clearRoutes,hasRoute:S,getRoutes:k,resolve:L,options:t,push:$,replace:z,go:nt,back:()=>nt(-1),forward:()=>nt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:_e.add,isReady:lt,install(x){x.component("RouterLink",Lw),x.component("RouterView",jw),x.config.globalProperties.$router=$t,Object.defineProperty(x.config.globalProperties,"$route",{enumerable:!0,get:()=>zt(l)}),ps&&!bn&&l.value===er&&(bn=!0,$(s.location).catch(ne=>{}));const Z={};for(const ne in er)Object.defineProperty(Z,ne,{get:()=>l.value[ne],enumerable:!0});x.provide(Ru,$t),x.provide(Xm,Ng(Z)),x.provide(kl,l);const Q=x.unmount;qt.add(x),x.unmount=function(){qt.delete(x),qt.size<1&&(u=er,v&&v(),v=null,l.value=er,bn=!1,ce=!1),Q()}}};function ut(x){return x.reduce((Z,Q)=>Z.then(()=>_(Q)),Promise.resolve())}return $t}const bu=wu("globalStore",()=>{const t=ze({text:"",status:!1,active:!1});let e;function n(r,s){s&&(t.value.active&&(t.value.active=!1,clearTimeout(e)),setTimeout(()=>{t.value.text=s,t.value.status=r,t.value.active=!0},100),e=setTimeout(()=>{t.value.active=!1},3e3))}return{message:t,pushMessage:n}}),$w=()=>{};var yd={};const n_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Hw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},r_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|u>>6,E=u&63;l||(E=64,o||(g=64)),r.push(n[f],n[p],n[g],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(n_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Hw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||u==null||p==null)throw new Gw;const g=i<<2|c>>4;if(r.push(g),u!==64){const E=c<<4&240|u>>2;if(r.push(E),p!==64){const C=u<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Gw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ww=function(t){const e=n_(t);return r_.encodeByteArray(e,!0)},ga=function(t){return Ww(t).replace(/\./g,"")},s_=function(t){try{return r_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Kw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const zw=()=>Kw().__FIREBASE_DEFAULTS__,Qw=()=>{if(typeof process>"u"||typeof yd>"u")return;const t=yd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Yw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&s_(t[1]);return e&&JSON.parse(e)},rc=()=>{try{return $w()||zw()||Qw()||Yw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},i_=t=>rc()?.emulatorHosts?.[t],Jw=t=>{const e=i_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},o_=()=>rc()?.config,a_=t=>rc()?.[`_${t}`];class Xw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Hs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function c_(t){return(await fetch(t,{credentials:"include"})).ok}function Zw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ga(JSON.stringify(n)),ga(JSON.stringify(o)),""].join(".")}const ki={};function eA(){const t={prod:[],emulator:[]};for(const e of Object.keys(ki))ki[e]?t.emulator.push(e):t.prod.push(e);return t}function tA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ed=!1;function l_(t,e){if(typeof window>"u"||typeof document>"u"||!Hs(window.location.host)||ki[t]===e||ki[t]||Ed)return;ki[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=eA().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,E){g.setAttribute("width","24"),g.setAttribute("id",E),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Ed=!0,o()},g}function f(g,E){g.setAttribute("id",E),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=tA(r),E=n("text"),C=document.getElementById(E)||document.createElement("span"),k=n("learnmore"),S=document.getElementById(k)||document.createElement("a"),L=n("preprendIcon"),j=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const U=g.element;c(U),f(S,k);const $=u();l(j,L),U.append(j,C,S,$),document.body.appendChild(U)}i?(C.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function rA(){const t=rc()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aA(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cA(){return!rA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lA(){try{return typeof indexedDB=="object"}catch{return!1}}function uA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const hA="FirebaseError";class wn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hA,Object.setPrototypeOf(this,wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,io.prototype.create)}}class io{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?fA(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new wn(s,c,r)}}function fA(t,e){return t.replace(dA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const dA=/\{\$([^}]+)}/g;function pA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(vd(i)&&vd(o)){if(!Yr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function vd(t){return t!==null&&typeof t=="object"}function oo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _i(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function yi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function gA(t,e){const n=new mA(t,e);return n.subscribe.bind(n)}class mA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_A(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Zc),s.error===void 0&&(s.error=Zc),s.complete===void 0&&(s.complete=Zc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _A(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Zc(){}function tt(t){return t&&t._delegate?t._delegate:t}class Tr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const jr="[DEFAULT]";class yA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Xw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vA(e))try{this.getOrInitializeService({instanceIdentifier:jr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jr){return this.instances.has(e)}getOptions(e=jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jr){return this.component?this.component.multipleInstances?e:jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EA(t){return t===jr?void 0:t}function vA(t){return t.instantiationMode==="EAGER"}class TA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const IA={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},wA=ve.INFO,AA={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},RA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=AA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Su{constructor(e){this.name=e,this._logLevel=wA,this._logHandler=RA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const bA=(t,e)=>e.some(n=>t instanceof n);let Td,Id;function SA(){return Td||(Td=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CA(){return Id||(Id=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u_=new WeakMap,Dl=new WeakMap,h_=new WeakMap,el=new WeakMap,Cu=new WeakMap;function PA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(pr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&u_.set(n,t)}).catch(()=>{}),Cu.set(e,t),e}function NA(t){if(Dl.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Dl.set(t,e)}let Ol={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||h_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kA(t){Ol=t(Ol)}function DA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(tl(this),e,...n);return h_.set(r,e.sort?e.sort():[e]),pr(r)}:CA().includes(t)?function(...e){return t.apply(tl(this),e),pr(u_.get(this))}:function(...e){return pr(t.apply(tl(this),e))}}function OA(t){return typeof t=="function"?DA(t):(t instanceof IDBTransaction&&NA(t),bA(t,SA())?new Proxy(t,Ol):t)}function pr(t){if(t instanceof IDBRequest)return PA(t);if(el.has(t))return el.get(t);const e=OA(t);return e!==t&&(el.set(t,e),Cu.set(e,t)),e}const tl=t=>Cu.get(t);function VA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=pr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(pr(o.result),l.oldVersion,l.newVersion,pr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const xA=["get","getKey","getAll","getAllKeys","count"],MA=["put","add","delete","clear"],nl=new Map;function wd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nl.get(e))return nl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=MA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||xA.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),s&&l.done]))[0]};return nl.set(e,i),i}kA(t=>({...t,get:(e,n,r)=>wd(e,n)||t.get(e,n,r),has:(e,n)=>!!wd(e,n)||t.has(e,n)}));class LA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function FA(t){return t.getComponent()?.type==="VERSION"}const Vl="@firebase/app",Ad="0.14.6";const Bn=new Su("@firebase/app"),UA="@firebase/app-compat",BA="@firebase/analytics-compat",jA="@firebase/analytics",qA="@firebase/app-check-compat",$A="@firebase/app-check",HA="@firebase/auth",GA="@firebase/auth-compat",WA="@firebase/database",KA="@firebase/data-connect",zA="@firebase/database-compat",QA="@firebase/functions",YA="@firebase/functions-compat",JA="@firebase/installations",XA="@firebase/installations-compat",ZA="@firebase/messaging",eR="@firebase/messaging-compat",tR="@firebase/performance",nR="@firebase/performance-compat",rR="@firebase/remote-config",sR="@firebase/remote-config-compat",iR="@firebase/storage",oR="@firebase/storage-compat",aR="@firebase/firestore",cR="@firebase/ai",lR="@firebase/firestore-compat",uR="firebase",hR="12.6.0";const xl="[DEFAULT]",fR={[Vl]:"fire-core",[UA]:"fire-core-compat",[jA]:"fire-analytics",[BA]:"fire-analytics-compat",[$A]:"fire-app-check",[qA]:"fire-app-check-compat",[HA]:"fire-auth",[GA]:"fire-auth-compat",[WA]:"fire-rtdb",[KA]:"fire-data-connect",[zA]:"fire-rtdb-compat",[QA]:"fire-fn",[YA]:"fire-fn-compat",[JA]:"fire-iid",[XA]:"fire-iid-compat",[ZA]:"fire-fcm",[eR]:"fire-fcm-compat",[tR]:"fire-perf",[nR]:"fire-perf-compat",[rR]:"fire-rc",[sR]:"fire-rc-compat",[iR]:"fire-gcs",[oR]:"fire-gcs-compat",[aR]:"fire-fst",[lR]:"fire-fst-compat",[cR]:"fire-vertex","fire-js":"fire-js",[uR]:"fire-js-all"};const ma=new Map,dR=new Map,Ml=new Map;function Rd(t,e){try{t.container.addComponent(e)}catch(n){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jr(t){const e=t.name;if(Ml.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;Ml.set(e,t);for(const n of ma.values())Rd(n,t);for(const n of dR.values())Rd(n,t);return!0}function Pu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Pt(t){return t==null?!1:t.settings!==void 0}const pR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gr=new io("app","Firebase",pR);class gR{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}}const rs=hR;function f_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:xl,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw gr.create("bad-app-name",{appName:String(s)});if(n||(n=o_()),!n)throw gr.create("no-options");const i=ma.get(s);if(i){if(Yr(n,i.options)&&Yr(r,i.config))return i;throw gr.create("duplicate-app",{appName:s})}const o=new TA(s);for(const l of Ml.values())o.addComponent(l);const c=new gR(n,r,o);return ma.set(s,c),c}function d_(t=xl){const e=ma.get(t);if(!e&&t===xl&&o_())return f_();if(!e)throw gr.create("no-app",{appName:t});return e}function dn(t,e,n){let r=fR[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(o.join(" "));return}Jr(new Tr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const mR="firebase-heartbeat-database",_R=1,Gi="firebase-heartbeat-store";let rl=null;function p_(){return rl||(rl=VA(mR,_R,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gi)}catch(n){console.warn(n)}}}}).catch(t=>{throw gr.create("idb-open",{originalErrorMessage:t.message})})),rl}async function yR(t){try{const n=(await p_()).transaction(Gi),r=await n.objectStore(Gi).get(g_(t));return await n.done,r}catch(e){if(e instanceof wn)Bn.warn(e.message);else{const n=gr.create("idb-get",{originalErrorMessage:e?.message});Bn.warn(n.message)}}}async function bd(t,e){try{const r=(await p_()).transaction(Gi,"readwrite");await r.objectStore(Gi).put(e,g_(t)),await r.done}catch(n){if(n instanceof wn)Bn.warn(n.message);else{const r=gr.create("idb-set",{originalErrorMessage:n?.message});Bn.warn(r.message)}}}function g_(t){return`${t.name}!${t.options.appId}`}const ER=1024,vR=30;class TR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Sd();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>vR){const s=AR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Bn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Sd(),{heartbeatsToSend:n,unsentEntries:r}=IR(this._heartbeatsCache.heartbeats),s=ga(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Bn.warn(e),""}}}function Sd(){return new Date().toISOString().substring(0,10)}function IR(t,e=ER){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Cd(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Cd(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lA()?uA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Cd(t){return ga(JSON.stringify({version:2,heartbeats:t})).length}function AR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function RR(t){Jr(new Tr("platform-logger",e=>new LA(e),"PRIVATE")),Jr(new Tr("heartbeat",e=>new TR(e),"PRIVATE")),dn(Vl,Ad,t),dn(Vl,Ad,"esm2020"),dn("fire-js","")}RR("");var bR="firebase",SR="12.7.0";dn(bR,SR,"app");var Pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mr,m_;(function(){var t;function e(R,y){function _(){}_.prototype=y.prototype,R.F=y.prototype,R.prototype=new _,R.prototype.constructor=R,R.D=function(I,w,A){for(var v=Array(arguments.length-2),te=2;te<arguments.length;te++)v[te-2]=arguments[te];return y.prototype[w].apply(I,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,y,_){_||(_=0);const I=Array(16);if(typeof y=="string")for(var w=0;w<16;++w)I[w]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(w=0;w<16;++w)I[w]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=R.g[0],_=R.g[1],w=R.g[2];let A=R.g[3],v;v=y+(A^_&(w^A))+I[0]+3614090360&4294967295,y=_+(v<<7&4294967295|v>>>25),v=A+(w^y&(_^w))+I[1]+3905402710&4294967295,A=y+(v<<12&4294967295|v>>>20),v=w+(_^A&(y^_))+I[2]+606105819&4294967295,w=A+(v<<17&4294967295|v>>>15),v=_+(y^w&(A^y))+I[3]+3250441966&4294967295,_=w+(v<<22&4294967295|v>>>10),v=y+(A^_&(w^A))+I[4]+4118548399&4294967295,y=_+(v<<7&4294967295|v>>>25),v=A+(w^y&(_^w))+I[5]+1200080426&4294967295,A=y+(v<<12&4294967295|v>>>20),v=w+(_^A&(y^_))+I[6]+2821735955&4294967295,w=A+(v<<17&4294967295|v>>>15),v=_+(y^w&(A^y))+I[7]+4249261313&4294967295,_=w+(v<<22&4294967295|v>>>10),v=y+(A^_&(w^A))+I[8]+1770035416&4294967295,y=_+(v<<7&4294967295|v>>>25),v=A+(w^y&(_^w))+I[9]+2336552879&4294967295,A=y+(v<<12&4294967295|v>>>20),v=w+(_^A&(y^_))+I[10]+4294925233&4294967295,w=A+(v<<17&4294967295|v>>>15),v=_+(y^w&(A^y))+I[11]+2304563134&4294967295,_=w+(v<<22&4294967295|v>>>10),v=y+(A^_&(w^A))+I[12]+1804603682&4294967295,y=_+(v<<7&4294967295|v>>>25),v=A+(w^y&(_^w))+I[13]+4254626195&4294967295,A=y+(v<<12&4294967295|v>>>20),v=w+(_^A&(y^_))+I[14]+2792965006&4294967295,w=A+(v<<17&4294967295|v>>>15),v=_+(y^w&(A^y))+I[15]+1236535329&4294967295,_=w+(v<<22&4294967295|v>>>10),v=y+(w^A&(_^w))+I[1]+4129170786&4294967295,y=_+(v<<5&4294967295|v>>>27),v=A+(_^w&(y^_))+I[6]+3225465664&4294967295,A=y+(v<<9&4294967295|v>>>23),v=w+(y^_&(A^y))+I[11]+643717713&4294967295,w=A+(v<<14&4294967295|v>>>18),v=_+(A^y&(w^A))+I[0]+3921069994&4294967295,_=w+(v<<20&4294967295|v>>>12),v=y+(w^A&(_^w))+I[5]+3593408605&4294967295,y=_+(v<<5&4294967295|v>>>27),v=A+(_^w&(y^_))+I[10]+38016083&4294967295,A=y+(v<<9&4294967295|v>>>23),v=w+(y^_&(A^y))+I[15]+3634488961&4294967295,w=A+(v<<14&4294967295|v>>>18),v=_+(A^y&(w^A))+I[4]+3889429448&4294967295,_=w+(v<<20&4294967295|v>>>12),v=y+(w^A&(_^w))+I[9]+568446438&4294967295,y=_+(v<<5&4294967295|v>>>27),v=A+(_^w&(y^_))+I[14]+3275163606&4294967295,A=y+(v<<9&4294967295|v>>>23),v=w+(y^_&(A^y))+I[3]+4107603335&4294967295,w=A+(v<<14&4294967295|v>>>18),v=_+(A^y&(w^A))+I[8]+1163531501&4294967295,_=w+(v<<20&4294967295|v>>>12),v=y+(w^A&(_^w))+I[13]+2850285829&4294967295,y=_+(v<<5&4294967295|v>>>27),v=A+(_^w&(y^_))+I[2]+4243563512&4294967295,A=y+(v<<9&4294967295|v>>>23),v=w+(y^_&(A^y))+I[7]+1735328473&4294967295,w=A+(v<<14&4294967295|v>>>18),v=_+(A^y&(w^A))+I[12]+2368359562&4294967295,_=w+(v<<20&4294967295|v>>>12),v=y+(_^w^A)+I[5]+4294588738&4294967295,y=_+(v<<4&4294967295|v>>>28),v=A+(y^_^w)+I[8]+2272392833&4294967295,A=y+(v<<11&4294967295|v>>>21),v=w+(A^y^_)+I[11]+1839030562&4294967295,w=A+(v<<16&4294967295|v>>>16),v=_+(w^A^y)+I[14]+4259657740&4294967295,_=w+(v<<23&4294967295|v>>>9),v=y+(_^w^A)+I[1]+2763975236&4294967295,y=_+(v<<4&4294967295|v>>>28),v=A+(y^_^w)+I[4]+1272893353&4294967295,A=y+(v<<11&4294967295|v>>>21),v=w+(A^y^_)+I[7]+4139469664&4294967295,w=A+(v<<16&4294967295|v>>>16),v=_+(w^A^y)+I[10]+3200236656&4294967295,_=w+(v<<23&4294967295|v>>>9),v=y+(_^w^A)+I[13]+681279174&4294967295,y=_+(v<<4&4294967295|v>>>28),v=A+(y^_^w)+I[0]+3936430074&4294967295,A=y+(v<<11&4294967295|v>>>21),v=w+(A^y^_)+I[3]+3572445317&4294967295,w=A+(v<<16&4294967295|v>>>16),v=_+(w^A^y)+I[6]+76029189&4294967295,_=w+(v<<23&4294967295|v>>>9),v=y+(_^w^A)+I[9]+3654602809&4294967295,y=_+(v<<4&4294967295|v>>>28),v=A+(y^_^w)+I[12]+3873151461&4294967295,A=y+(v<<11&4294967295|v>>>21),v=w+(A^y^_)+I[15]+530742520&4294967295,w=A+(v<<16&4294967295|v>>>16),v=_+(w^A^y)+I[2]+3299628645&4294967295,_=w+(v<<23&4294967295|v>>>9),v=y+(w^(_|~A))+I[0]+4096336452&4294967295,y=_+(v<<6&4294967295|v>>>26),v=A+(_^(y|~w))+I[7]+1126891415&4294967295,A=y+(v<<10&4294967295|v>>>22),v=w+(y^(A|~_))+I[14]+2878612391&4294967295,w=A+(v<<15&4294967295|v>>>17),v=_+(A^(w|~y))+I[5]+4237533241&4294967295,_=w+(v<<21&4294967295|v>>>11),v=y+(w^(_|~A))+I[12]+1700485571&4294967295,y=_+(v<<6&4294967295|v>>>26),v=A+(_^(y|~w))+I[3]+2399980690&4294967295,A=y+(v<<10&4294967295|v>>>22),v=w+(y^(A|~_))+I[10]+4293915773&4294967295,w=A+(v<<15&4294967295|v>>>17),v=_+(A^(w|~y))+I[1]+2240044497&4294967295,_=w+(v<<21&4294967295|v>>>11),v=y+(w^(_|~A))+I[8]+1873313359&4294967295,y=_+(v<<6&4294967295|v>>>26),v=A+(_^(y|~w))+I[15]+4264355552&4294967295,A=y+(v<<10&4294967295|v>>>22),v=w+(y^(A|~_))+I[6]+2734768916&4294967295,w=A+(v<<15&4294967295|v>>>17),v=_+(A^(w|~y))+I[13]+1309151649&4294967295,_=w+(v<<21&4294967295|v>>>11),v=y+(w^(_|~A))+I[4]+4149444226&4294967295,y=_+(v<<6&4294967295|v>>>26),v=A+(_^(y|~w))+I[11]+3174756917&4294967295,A=y+(v<<10&4294967295|v>>>22),v=w+(y^(A|~_))+I[2]+718787259&4294967295,w=A+(v<<15&4294967295|v>>>17),v=_+(A^(w|~y))+I[9]+3951481745&4294967295,R.g[0]=R.g[0]+y&4294967295,R.g[1]=R.g[1]+(w+(v<<21&4294967295|v>>>11))&4294967295,R.g[2]=R.g[2]+w&4294967295,R.g[3]=R.g[3]+A&4294967295}r.prototype.v=function(R,y){y===void 0&&(y=R.length);const _=y-this.blockSize,I=this.C;let w=this.h,A=0;for(;A<y;){if(w==0)for(;A<=_;)s(this,R,A),A+=this.blockSize;if(typeof R=="string"){for(;A<y;)if(I[w++]=R.charCodeAt(A++),w==this.blockSize){s(this,I),w=0;break}}else for(;A<y;)if(I[w++]=R[A++],w==this.blockSize){s(this,I),w=0;break}}this.h=w,this.o+=y},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var y=1;y<R.length-8;++y)R[y]=0;y=this.o*8;for(var _=R.length-8;_<R.length;++_)R[_]=y&255,y/=256;for(this.v(R),R=Array(16),y=0,_=0;_<4;++_)for(let I=0;I<32;I+=8)R[y++]=this.g[_]>>>I&255;return R};function i(R,y){var _=c;return Object.prototype.hasOwnProperty.call(_,R)?_[R]:_[R]=y(R)}function o(R,y){this.h=y;const _=[];let I=!0;for(let w=R.length-1;w>=0;w--){const A=R[w]|0;I&&A==y||(_[w]=A,I=!1)}this.g=_}var c={};function l(R){return-128<=R&&R<128?i(R,function(y){return new o([y|0],y<0?-1:0)}):new o([R|0],R<0?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return p;if(R<0)return S(u(-R));const y=[];let _=1;for(let I=0;R>=_;I++)y[I]=R/_|0,_*=4294967296;return new o(y,0)}function f(R,y){if(R.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(R.charAt(0)=="-")return S(f(R.substring(1),y));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=u(Math.pow(y,8));let I=p;for(let A=0;A<R.length;A+=8){var w=Math.min(8,R.length-A);const v=parseInt(R.substring(A,A+w),y);w<8?(w=u(Math.pow(y,w)),I=I.j(w).add(u(v))):(I=I.j(_),I=I.add(u(v)))}return I}var p=l(0),g=l(1),E=l(16777216);t=o.prototype,t.m=function(){if(k(this))return-S(this).m();let R=0,y=1;for(let _=0;_<this.g.length;_++){const I=this.i(_);R+=(I>=0?I:4294967296+I)*y,y*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C(this))return"0";if(k(this))return"-"+S(this).toString(R);const y=u(Math.pow(R,6));var _=this;let I="";for(;;){const w=$(_,y).g;_=L(_,w.j(y));let A=((_.g.length>0?_.g[0]:_.h)>>>0).toString(R);if(_=w,C(_))return A+I;for(;A.length<6;)A="0"+A;I=A+I}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function C(R){if(R.h!=0)return!1;for(let y=0;y<R.g.length;y++)if(R.g[y]!=0)return!1;return!0}function k(R){return R.h==-1}t.l=function(R){return R=L(this,R),k(R)?-1:C(R)?0:1};function S(R){const y=R.g.length,_=[];for(let I=0;I<y;I++)_[I]=~R.g[I];return new o(_,~R.h).add(g)}t.abs=function(){return k(this)?S(this):this},t.add=function(R){const y=Math.max(this.g.length,R.g.length),_=[];let I=0;for(let w=0;w<=y;w++){let A=I+(this.i(w)&65535)+(R.i(w)&65535),v=(A>>>16)+(this.i(w)>>>16)+(R.i(w)>>>16);I=v>>>16,A&=65535,v&=65535,_[w]=v<<16|A}return new o(_,_[_.length-1]&-2147483648?-1:0)};function L(R,y){return R.add(S(y))}t.j=function(R){if(C(this)||C(R))return p;if(k(this))return k(R)?S(this).j(S(R)):S(S(this).j(R));if(k(R))return S(this.j(S(R)));if(this.l(E)<0&&R.l(E)<0)return u(this.m()*R.m());const y=this.g.length+R.g.length,_=[];for(var I=0;I<2*y;I++)_[I]=0;for(I=0;I<this.g.length;I++)for(let w=0;w<R.g.length;w++){const A=this.i(I)>>>16,v=this.i(I)&65535,te=R.i(w)>>>16,fe=R.i(w)&65535;_[2*I+2*w]+=v*fe,j(_,2*I+2*w),_[2*I+2*w+1]+=A*fe,j(_,2*I+2*w+1),_[2*I+2*w+1]+=v*te,j(_,2*I+2*w+1),_[2*I+2*w+2]+=A*te,j(_,2*I+2*w+2)}for(R=0;R<y;R++)_[R]=_[2*R+1]<<16|_[2*R];for(R=y;R<2*y;R++)_[R]=0;return new o(_,0)};function j(R,y){for(;(R[y]&65535)!=R[y];)R[y+1]+=R[y]>>>16,R[y]&=65535,y++}function U(R,y){this.g=R,this.h=y}function $(R,y){if(C(y))throw Error("division by zero");if(C(R))return new U(p,p);if(k(R))return y=$(S(R),y),new U(S(y.g),S(y.h));if(k(y))return y=$(R,S(y)),new U(S(y.g),y.h);if(R.g.length>30){if(k(R)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var _=g,I=y;I.l(R)<=0;)_=z(_),I=z(I);var w=J(_,1),A=J(I,1);for(I=J(I,2),_=J(_,2);!C(I);){var v=A.add(I);v.l(R)<=0&&(w=w.add(_),A=v),I=J(I,1),_=J(_,1)}return y=L(R,w.j(y)),new U(w,y)}for(w=p;R.l(y)>=0;){for(_=Math.max(1,Math.floor(R.m()/y.m())),I=Math.ceil(Math.log(_)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),A=u(_),v=A.j(y);k(v)||v.l(R)>0;)_-=I,A=u(_),v=A.j(y);C(A)&&(A=g),w=w.add(A),R=L(R,v)}return new U(w,R)}t.B=function(R){return $(this,R).h},t.and=function(R){const y=Math.max(this.g.length,R.g.length),_=[];for(let I=0;I<y;I++)_[I]=this.i(I)&R.i(I);return new o(_,this.h&R.h)},t.or=function(R){const y=Math.max(this.g.length,R.g.length),_=[];for(let I=0;I<y;I++)_[I]=this.i(I)|R.i(I);return new o(_,this.h|R.h)},t.xor=function(R){const y=Math.max(this.g.length,R.g.length),_=[];for(let I=0;I<y;I++)_[I]=this.i(I)^R.i(I);return new o(_,this.h^R.h)};function z(R){const y=R.g.length+1,_=[];for(let I=0;I<y;I++)_[I]=R.i(I)<<1|R.i(I-1)>>>31;return new o(_,R.h)}function J(R,y){const _=y>>5;y%=32;const I=R.g.length-_,w=[];for(let A=0;A<I;A++)w[A]=y>0?R.i(A+_)>>>y|R.i(A+_+1)<<32-y:R.i(A+_);return new o(w,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,m_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,mr=o}).apply(typeof Pd<"u"?Pd:typeof self<"u"?self:typeof window<"u"?window:{});var Vo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var __,Ei,y_,Qo,Ll,E_,v_,T_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vo=="object"&&Vo];for(var h=0;h<a.length;++h){var d=a[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var d=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var N=a[m];if(!(N in d))break e;d=d[N]}a=a[a.length-1],m=d[a],h=h(m),h!=m&&h!=null&&e(d,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var d=[],m;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&d.push([m,h[m]]);return d}});var i=i||{},o=this||self;function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function l(a,h,d){return a.call.apply(a.bind,arguments)}function u(a,h,d){return u=l,u.apply(null,arguments)}function f(a,h){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function p(a,h){function d(){}d.prototype=h.prototype,a.Z=h.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(m,N,D){for(var W=Array(arguments.length-2),me=2;me<arguments.length;me++)W[me-2]=arguments[me];return h.prototype[N].apply(m,W)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function E(a){const h=a.length;if(h>0){const d=Array(h);for(let m=0;m<h;m++)d[m]=a[m];return d}return[]}function C(a,h){for(let m=1;m<arguments.length;m++){const N=arguments[m];var d=typeof N;if(d=d!="object"?d:N?Array.isArray(N)?"array":d:"null",d=="array"||d=="object"&&typeof N.length=="number"){d=a.length||0;const D=N.length||0;a.length=d+D;for(let W=0;W<D;W++)a[d+W]=N[W]}else a.push(N)}}class k{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function S(a){o.setTimeout(()=>{throw a},0)}function L(){var a=R;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class j{constructor(){this.h=this.g=null}add(h,d){const m=U.get();m.set(h,d),this.h?this.h.next=m:this.g=m,this.h=m}}var U=new k(()=>new $,a=>a.reset());class ${constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let z,J=!1,R=new j,y=()=>{const a=Promise.resolve(void 0);z=()=>{a.then(_)}};function _(){for(var a;a=L();){try{a.h.call(a.g)}catch(d){S(d)}var h=U;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}J=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,h),o.removeEventListener("test",d,h)}catch{}return a})();function v(a){return/^[\s\xa0]*$/.test(a)}function te(a,h){w.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(te,w),te.prototype.init=function(a,h){const d=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(d=="mouseover"?h=a.fromElement:d=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&te.Z.h.call(this)},te.prototype.h=function(){te.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),_e=0;function ce(a,h,d,m,N){this.listener=a,this.proxy=null,this.src=h,this.type=d,this.capture=!!m,this.ha=N,this.key=++_e,this.da=this.fa=!1}function de(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function lt(a,h,d){for(const m in a)h.call(d,a[m],m,a)}function tn(a,h){for(const d in a)h.call(void 0,a[d],d,a)}function kt(a){const h={};for(const d in a)h[d]=a[d];return h}const nt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bn(a,h){let d,m;for(let N=1;N<arguments.length;N++){m=arguments[N];for(d in m)a[d]=m[d];for(let D=0;D<nt.length;D++)d=nt[D],Object.prototype.hasOwnProperty.call(m,d)&&(a[d]=m[d])}}function qt(a){this.src=a,this.g={},this.h=0}qt.prototype.add=function(a,h,d,m,N){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const W=ut(a,h,m,N);return W>-1?(h=a[W],d||(h.fa=!1)):(h=new ce(h,this.src,D,!!m,N),h.fa=d,a.push(h)),h};function $t(a,h){const d=h.type;if(d in a.g){var m=a.g[d],N=Array.prototype.indexOf.call(m,h,void 0),D;(D=N>=0)&&Array.prototype.splice.call(m,N,1),D&&(de(h),a.g[d].length==0&&(delete a.g[d],a.h--))}}function ut(a,h,d,m){for(let N=0;N<a.length;++N){const D=a[N];if(!D.da&&D.listener==h&&D.capture==!!d&&D.ha==m)return N}return-1}var x="closure_lm_"+(Math.random()*1e6|0),Z={};function Q(a,h,d,m,N){if(Array.isArray(h)){for(let D=0;D<h.length;D++)Q(a,h[D],d,m,N);return null}return d=K(d),a&&a[fe]?a.J(h,d,c(m)?!!m.capture:!1,N):ne(a,h,d,!1,m,N)}function ne(a,h,d,m,N,D){if(!h)throw Error("Invalid event type");const W=c(N)?!!N.capture:!!N;let me=B(a);if(me||(a[x]=me=new qt(a)),d=me.add(h,d,m,W,D),d.proxy)return d;if(m=Ee(),d.proxy=m,m.src=a,m.listener=d,a.addEventListener)A||(N=W),N===void 0&&(N=!1),a.addEventListener(h.toString(),m,N);else if(a.attachEvent)a.attachEvent(P(h.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Ee(){function a(d){return h.call(a.src,a.listener,d)}const h=O;return a}function T(a,h,d,m,N){if(Array.isArray(h))for(var D=0;D<h.length;D++)T(a,h[D],d,m,N);else m=c(m)?!!m.capture:!!m,d=K(d),a&&a[fe]?(a=a.i,D=String(h).toString(),D in a.g&&(h=a.g[D],d=ut(h,d,m,N),d>-1&&(de(h[d]),Array.prototype.splice.call(h,d,1),h.length==0&&(delete a.g[D],a.h--)))):a&&(a=B(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ut(h,d,m,N)),(d=a>-1?h[a]:null)&&b(d))}function b(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[fe])$t(h.i,a);else{var d=a.type,m=a.proxy;h.removeEventListener?h.removeEventListener(d,m,a.capture):h.detachEvent?h.detachEvent(P(d),m):h.addListener&&h.removeListener&&h.removeListener(m),(d=B(h))?($t(d,a),d.h==0&&(d.src=null,h[x]=null)):de(a)}}}function P(a){return a in Z?Z[a]:Z[a]="on"+a}function O(a,h){if(a.da)a=!0;else{h=new te(h,this);const d=a.listener,m=a.ha||a.src;a.fa&&b(a),a=d.call(m,h)}return a}function B(a){return a=a[x],a instanceof qt?a:null}var V="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(a){return typeof a=="function"?a:(a[V]||(a[V]=function(h){return a.handleEvent(h)}),a[V])}function G(){I.call(this),this.i=new qt(this),this.M=this,this.G=null}p(G,I),G.prototype[fe]=!0,G.prototype.removeEventListener=function(a,h,d,m){T(this,a,h,d,m)};function H(a,h){var d,m=a.G;if(m)for(d=[];m;m=m.G)d.push(m);if(a=a.M,m=h.type||h,typeof h=="string")h=new w(h,a);else if(h instanceof w)h.target=h.target||a;else{var N=h;h=new w(m,a),bn(h,N)}N=!0;let D,W;if(d)for(W=d.length-1;W>=0;W--)D=h.g=d[W],N=q(D,m,!0,h)&&N;if(D=h.g=a,N=q(D,m,!0,h)&&N,N=q(D,m,!1,h)&&N,d)for(W=0;W<d.length;W++)D=h.g=d[W],N=q(D,m,!1,h)&&N}G.prototype.N=function(){if(G.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const d=a.g[h];for(let m=0;m<d.length;m++)de(d[m]);delete a.g[h],a.h--}}this.G=null},G.prototype.J=function(a,h,d,m){return this.i.add(String(a),h,!1,d,m)},G.prototype.K=function(a,h,d,m){return this.i.add(String(a),h,!0,d,m)};function q(a,h,d,m){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let N=!0;for(let D=0;D<h.length;++D){const W=h[D];if(W&&!W.da&&W.capture==d){const me=W.listener,We=W.ha||W.src;W.fa&&$t(a.i,W),N=me.call(We,m)!==!1&&N}}return N&&!m.defaultPrevented}function oe(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Y(a){a.g=oe(()=>{a.g=null,a.i&&(a.i=!1,Y(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class re extends I{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Y(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(a){I.call(this),this.h=a,this.g={}}p(ae,I);var ye=[];function Pe(a){lt(a.g,function(h,d){this.g.hasOwnProperty(d)&&b(h)},a),a.g={}}ae.prototype.N=function(){ae.Z.N.call(this),Pe(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Re=o.JSON.stringify,ht=o.JSON.parse,ft=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Dt(){}function Ot(){}var Ht={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function as(){w.call(this,"d")}p(as,w);function rt(){w.call(this,"c")}p(rt,w);var Xe={},Js=null;function kr(){return Js=Js||new G}Xe.Ia="serverreachability";function wh(a){w.call(this,Xe.Ia,a)}p(wh,w);function Xs(a){const h=kr();H(h,new wh(h))}Xe.STAT_EVENT="statevent";function Ah(a,h){w.call(this,Xe.STAT_EVENT,a),this.stat=h}p(Ah,w);function It(a){const h=kr();H(h,new Ah(h,a))}Xe.Ja="timingevent";function Rh(a,h){w.call(this,Xe.Ja,a),this.size=h}p(Rh,w);function Zs(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function ei(){this.g=!0}ei.prototype.ua=function(){this.g=!1};function PE(a,h,d,m,N,D){a.info(function(){if(a.g)if(D){var W="",me=D.split("&");for(let De=0;De<me.length;De++){var We=me[De].split("=");if(We.length>1){const Ze=We[0];We=We[1];const rn=Ze.split("_");W=rn.length>=2&&rn[1]=="type"?W+(Ze+"="+We+"&"):W+(Ze+"=redacted&")}}}else W=null;else W=D;return"XMLHTTP REQ ("+m+") [attempt "+N+"]: "+h+`
`+d+`
`+W})}function NE(a,h,d,m,N,D,W){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+N+"]: "+h+`
`+d+`
`+D+" "+W})}function cs(a,h,d,m){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+DE(a,d)+(m?" "+m:"")})}function kE(a,h){a.info(function(){return"TIMEOUT: "+h})}ei.prototype.info=function(){};function DE(a,h){if(!a.g)return h;if(!h)return null;try{const D=JSON.parse(h);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var d=D[a];if(!(d.length<2)){var m=d[1];if(Array.isArray(m)&&!(m.length<1)){var N=m[0];if(N!="noop"&&N!="stop"&&N!="close")for(let W=1;W<m.length;W++)m[W]=""}}}}return Re(D)}catch{return h}}var Eo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sh;function Ic(){}p(Ic,Dt),Ic.prototype.g=function(){return new XMLHttpRequest},Sh=new Ic;function ti(a){return encodeURIComponent(String(a))}function OE(a){var h=1;a=a.split(":");const d=[];for(;h>0&&a.length;)d.push(a.shift()),h--;return a.length&&d.push(a.join(":")),d}function Kn(a,h,d,m){this.j=a,this.i=h,this.l=d,this.S=m||1,this.V=new ae(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ch}function Ch(){this.i=null,this.g="",this.h=!1}var Ph={},wc={};function Ac(a,h,d){a.M=1,a.A=To(nn(h)),a.u=d,a.R=!0,Nh(a,null)}function Nh(a,h){a.F=Date.now(),vo(a),a.B=nn(a.A);var d=a.B,m=a.S;Array.isArray(m)||(m=[String(m)]),$h(d.i,"t",m),a.C=0,d=a.j.L,a.h=new Ch,a.g=cf(a.j,d?h:null,!a.u),a.P>0&&(a.O=new re(u(a.Y,a,a.g),a.P)),h=a.V,d=a.g,m=a.ba;var N="readystatechange";Array.isArray(N)||(N&&(ye[0]=N.toString()),N=ye);for(let D=0;D<N.length;D++){const W=Q(d,N[D],m||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=a.J?kt(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),Xs(),PE(a.i,a.v,a.B,a.l,a.S,a.u)}Kn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Yn(a)==3?h.j():this.Y(a)},Kn.prototype.Y=function(a){try{if(a==this.g)e:{const me=Yn(this.g),We=this.g.ya(),De=this.g.ca();if(!(me<3)&&(me!=3||this.g&&(this.h.h||this.g.la()||Yh(this.g)))){this.K||me!=4||We==7||(We==8||De<=0?Xs(3):Xs(2)),Rc(this);var h=this.g.ca();this.X=h;var d=VE(this);if(this.o=h==200,NE(this.i,this.v,this.B,this.l,this.S,me,h),this.o){if(this.U&&!this.L){t:{if(this.g){var m,N=this.g;if((m=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(m)){var D=m;break t}}D=null}if(a=D)cs(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bc(this,a);else{this.o=!1,this.m=3,It(12),Dr(this),ni(this);break e}}if(this.R){a=!0;let Ze;for(;!this.K&&this.C<d.length;)if(Ze=xE(this,d),Ze==wc){me==4&&(this.m=4,It(14),a=!1),cs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ze==Ph){this.m=4,It(15),cs(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else cs(this.i,this.l,Ze,null),bc(this,Ze);if(kh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),me!=4||d.length!=0||this.h.h||(this.m=1,It(16),a=!1),this.o=this.o&&a,!a)cs(this.i,this.l,d,"[Invalid Chunked Response]"),Dr(this),ni(this);else if(d.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),Vc(W),W.P=!0,It(11))}}else cs(this.i,this.l,d,null),bc(this,d);me==4&&Dr(this),this.o&&!this.K&&(me==4?rf(this.j,this):(this.o=!1,vo(this)))}else QE(this.g),h==400&&d.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Dr(this),ni(this)}}}catch{}};function VE(a){if(!kh(a))return a.g.la();const h=Yh(a.g);if(h==="")return"";let d="";const m=h.length,N=Yn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Dr(a),ni(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<m;D++)a.h.h=!0,d+=a.h.i.decode(h[D],{stream:!(N&&D==m-1)});return h.length=0,a.h.g+=d,a.C=0,a.h.g}function kh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function xE(a,h){var d=a.C,m=h.indexOf(`
`,d);return m==-1?wc:(d=Number(h.substring(d,m)),isNaN(d)?Ph:(m+=1,m+d>h.length?wc:(h=h.slice(m,m+d),a.C=m+d,h)))}Kn.prototype.cancel=function(){this.K=!0,Dr(this)};function vo(a){a.T=Date.now()+a.H,Dh(a,a.H)}function Dh(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Zs(u(a.aa,a),h)}function Rc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Kn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(kE(this.i,this.B),this.M!=2&&(Xs(),It(17)),Dr(this),this.m=2,ni(this)):Dh(this,this.T-a)};function ni(a){a.j.I==0||a.K||rf(a.j,a)}function Dr(a){Rc(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Pe(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function bc(a,h){try{var d=a.j;if(d.I!=0&&(d.g==a||Sc(d.h,a))){if(!a.L&&Sc(d.h,a)&&d.I==3){try{var m=d.Ba.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var N=m;if(N[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)bo(d),Ao(d);else break e;Oc(d),It(18)}}else d.xa=N[1],0<d.xa-d.K&&N[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Zs(u(d.Va,d),6e3));xh(d.h)<=1&&d.ta&&(d.ta=void 0)}else Vr(d,11)}else if((a.L||d.g==a)&&bo(d),!v(h))for(N=d.Ba.g.parse(h),h=0;h<N.length;h++){let De=N[h];const Ze=De[0];if(!(Ze<=d.K))if(d.K=Ze,De=De[1],d.I==2)if(De[0]=="c"){d.M=De[1],d.ba=De[2];const rn=De[3];rn!=null&&(d.ka=rn,d.j.info("VER="+d.ka));const xr=De[4];xr!=null&&(d.za=xr,d.j.info("SVER="+d.za));const Jn=De[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(m=1.5*Jn,d.O=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const Xn=a.g;if(Xn){const Co=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Co){var D=m.h;D.g||Co.indexOf("spdy")==-1&&Co.indexOf("quic")==-1&&Co.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Cc(D,D.h),D.h=null))}if(m.G){const xc=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;xc&&(m.wa=xc,Me(m.J,m.G,xc))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),m=d;var W=a;if(m.na=af(m,m.L?m.ba:null,m.W),W.L){Mh(m.h,W);var me=W,We=m.O;We&&(me.H=We),me.D&&(Rc(me),vo(me)),m.g=W}else tf(m);d.i.length>0&&Ro(d)}else De[0]!="stop"&&De[0]!="close"||Vr(d,7);else d.I==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Vr(d,7):Dc(d):De[0]!="noop"&&d.l&&d.l.qa(De),d.A=0)}}Xs(4)}catch{}}var ME=class{constructor(a,h){this.g=a,this.map=h}};function Oh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function xh(a){return a.h?1:a.g?a.g.size:0}function Sc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Cc(a,h){a.g?a.g.add(h):a.h=h}function Mh(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Oh.prototype.cancel=function(){if(this.i=Lh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Lh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const d of a.g.values())h=h.concat(d.G);return h}return E(a.i)}var Fh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function LE(a,h){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const m=a[d].indexOf("=");let N,D=null;m>=0?(N=a[d].substring(0,m),D=a[d].substring(m+1)):N=a[d],h(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function zn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof zn?(this.l=a.l,ri(this,a.j),this.o=a.o,this.g=a.g,si(this,a.u),this.h=a.h,Pc(this,Hh(a.i)),this.m=a.m):a&&(h=String(a).match(Fh))?(this.l=!1,ri(this,h[1]||"",!0),this.o=ii(h[2]||""),this.g=ii(h[3]||"",!0),si(this,h[4]),this.h=ii(h[5]||"",!0),Pc(this,h[6]||"",!0),this.m=ii(h[7]||"")):(this.l=!1,this.i=new ai(null,this.l))}zn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(oi(h,Uh,!0),":");var d=this.g;return(d||h=="file")&&(a.push("//"),(h=this.o)&&a.push(oi(h,Uh,!0),"@"),a.push(ti(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(oi(d,d.charAt(0)=="/"?BE:UE,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",oi(d,qE)),a.join("")},zn.prototype.resolve=function(a){const h=nn(this);let d=!!a.j;d?ri(h,a.j):d=!!a.o,d?h.o=a.o:d=!!a.g,d?h.g=a.g:d=a.u!=null;var m=a.h;if(d)si(h,a.u);else if(d=!!a.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var N=h.h.lastIndexOf("/");N!=-1&&(m=h.h.slice(0,N+1)+m)}if(N=m,N==".."||N==".")m="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){m=N.lastIndexOf("/",0)==0,N=N.split("/");const D=[];for(let W=0;W<N.length;){const me=N[W++];me=="."?m&&W==N.length&&D.push(""):me==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),m&&W==N.length&&D.push("")):(D.push(me),m=!0)}m=D.join("/")}else m=N}return d?h.h=m:d=a.i.toString()!=="",d?Pc(h,Hh(a.i)):d=!!a.m,d&&(h.m=a.m),h};function nn(a){return new zn(a)}function ri(a,h,d){a.j=d?ii(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function si(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function Pc(a,h,d){h instanceof ai?(a.i=h,$E(a.i,a.l)):(d||(h=oi(h,jE)),a.i=new ai(h,a.l))}function Me(a,h,d){a.i.set(h,d)}function To(a){return Me(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ii(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function oi(a,h,d){return typeof a=="string"?(a=encodeURI(a).replace(h,FE),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function FE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Uh=/[#\/\?@]/g,UE=/[#\?:]/g,BE=/[#\?]/g,jE=/[#\?@]/g,qE=/#/g;function ai(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Or(a){a.g||(a.g=new Map,a.h=0,a.i&&LE(a.i,function(h,d){a.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}t=ai.prototype,t.add=function(a,h){Or(this),this.i=null,a=ls(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(h),this.h+=1,this};function Bh(a,h){Or(a),h=ls(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function jh(a,h){return Or(a),h=ls(a,h),a.g.has(h)}t.forEach=function(a,h){Or(this),this.g.forEach(function(d,m){d.forEach(function(N){a.call(h,N,m,this)},this)},this)};function qh(a,h){Or(a);let d=[];if(typeof h=="string")jh(a,h)&&(d=d.concat(a.g.get(ls(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)d=d.concat(a[h]);return d}t.set=function(a,h){return Or(this),this.i=null,a=ls(this,a),jh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=qh(this,a),a.length>0?String(a[0]):h):h};function $h(a,h,d){Bh(a,h),d.length>0&&(a.i=null,a.g.set(ls(a,h),E(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let m=0;m<h.length;m++){var d=h[m];const N=ti(d);d=qh(this,d);for(let D=0;D<d.length;D++){let W=N;d[D]!==""&&(W+="="+ti(d[D])),a.push(W)}}return this.i=a.join("&")};function Hh(a){const h=new ai;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function ls(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function $E(a,h){h&&!a.j&&(Or(a),a.i=null,a.g.forEach(function(d,m){const N=m.toLowerCase();m!=N&&(Bh(this,m),$h(this,N,d))},a)),a.j=h}function HE(a,h){const d=new ei;if(o.Image){const m=new Image;m.onload=f(Qn,d,"TestLoadImage: loaded",!0,h,m),m.onerror=f(Qn,d,"TestLoadImage: error",!1,h,m),m.onabort=f(Qn,d,"TestLoadImage: abort",!1,h,m),m.ontimeout=f(Qn,d,"TestLoadImage: timeout",!1,h,m),o.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else h(!1)}function GE(a,h){const d=new ei,m=new AbortController,N=setTimeout(()=>{m.abort(),Qn(d,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:m.signal}).then(D=>{clearTimeout(N),D.ok?Qn(d,"TestPingServer: ok",!0,h):Qn(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(N),Qn(d,"TestPingServer: error",!1,h)})}function Qn(a,h,d,m,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),m(d)}catch{}}function WE(){this.g=new ft}function Nc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Nc,Dt),Nc.prototype.g=function(){return new Io(this.i,this.h)};function Io(a,h){G.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Io,G),t=Io.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,li(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ci(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Gh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Gh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?ci(this):li(this),this.readyState==3&&Gh(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,ci(this))},t.Na=function(a){this.g&&(this.response=a,ci(this))},t.ga=function(){this.g&&ci(this)};function ci(a){a.readyState=4,a.l=null,a.j=null,a.B=null,li(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=h.next();return a.join(`\r
`)};function li(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Io.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Wh(a){let h="";return lt(a,function(d,m){h+=m,h+=":",h+=d,h+=`\r
`}),h}function kc(a,h,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=Wh(d),typeof a=="string"?d!=null&&ti(d):Me(a,h,d))}function Be(a){G.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Be,G);var KE=/^https?$/i,zE=["POST","PUT"];t=Be.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sh.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(D){Kh(this,D);return}if(a=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var N in m)d.set(N,m[N]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const D of m.keys())d.set(D,m.get(D));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),N=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(zE,h,void 0)>=0)||m||N||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,W]of d)this.g.setRequestHeader(D,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){Kh(this,D)}};function Kh(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,zh(a),wo(a)}function zh(a){a.A||(a.A=!0,H(a,"complete"),H(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,H(this,"complete"),H(this,"abort"),wo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wo(this,!0)),Be.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Qh(this):this.Xa())},t.Xa=function(){Qh(this)};function Qh(a){if(a.h&&typeof i<"u"){if(a.v&&Yn(a)==4)setTimeout(a.Ca.bind(a),0);else if(H(a,"readystatechange"),Yn(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var d;if(!(d=h)){var m;if(m=D===0){let W=String(a.D).match(Fh)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),m=!KE.test(W?W.toLowerCase():"")}d=m}if(d)H(a,"complete"),H(a,"success");else{a.o=6;try{var N=Yn(a)>2?a.g.statusText:""}catch{N=""}a.l=N+" ["+a.ca()+"]",zh(a)}}finally{wo(a)}}}}function wo(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,h||H(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Yn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Yn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),ht(h)}};function Yh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function QE(a){const h={};a=(a.g&&Yn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(v(a[m]))continue;var d=OE(a[m]);const N=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const D=h[N]||[];h[N]=D,D.push(d)}tn(h,function(m){return m.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ui(a,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||h}function Jh(a){this.za=0,this.i=[],this.j=new ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ui("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ui("baseRetryDelayMs",5e3,a),this.Za=ui("retryDelaySeedMs",1e4,a),this.Ta=ui("forwardChannelMaxRetries",2,a),this.va=ui("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Oh(a&&a.concurrentRequestLimit),this.Ba=new WE,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Jh.prototype,t.ka=8,t.I=1,t.connect=function(a,h,d,m){It(0),this.W=a,this.H=h||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.J=af(this,null,this.W),Ro(this)};function Dc(a){if(Xh(a),a.I==3){var h=a.V++,d=nn(a.J);if(Me(d,"SID",a.M),Me(d,"RID",h),Me(d,"TYPE","terminate"),hi(a,d),h=new Kn(a,a.j,h),h.M=2,h.A=To(nn(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=h.A,d=!0),d||(h.g=cf(h.j,null),h.g.ea(h.A)),h.F=Date.now(),vo(h)}of(a)}function Ao(a){a.g&&(Vc(a),a.g.cancel(),a.g=null)}function Xh(a){Ao(a),a.v&&(o.clearTimeout(a.v),a.v=null),bo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Ro(a){if(!Vh(a.h)&&!a.m){a.m=!0;var h=a.Ea;z||y(),J||(z(),J=!0),R.add(h,a),a.D=0}}function YE(a,h){return xh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Zs(u(a.Ea,a,h),sf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const N=new Kn(this,this.j,a);let D=this.o;if(this.U&&(D?(D=kt(D),bn(D,this.U)):D=this.U),this.u!==null||this.R||(N.J=D,D=null),this.S)e:{for(var h=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,h>4096){h=d;break e}if(h===4096||d===this.i.length-1){h=d+1;break e}}h=1e3}else h=1e3;h=ef(this,N,h),d=nn(this.J),Me(d,"RID",a),Me(d,"CVER",22),this.G&&Me(d,"X-HTTP-Session-Id",this.G),hi(this,d),D&&(this.R?h="headers="+ti(Wh(D))+"&"+h:this.u&&kc(d,this.u,D)),Cc(this.h,N),this.Ra&&Me(d,"TYPE","init"),this.S?(Me(d,"$req",h),Me(d,"SID","null"),N.U=!0,Ac(N,d,null)):Ac(N,d,h),this.I=2}}else this.I==3&&(a?Zh(this,a):this.i.length==0||Vh(this.h)||Zh(this))};function Zh(a,h){var d;h?d=h.l:d=a.V++;const m=nn(a.J);Me(m,"SID",a.M),Me(m,"RID",d),Me(m,"AID",a.K),hi(a,m),a.u&&a.o&&kc(m,a.u,a.o),d=new Kn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),h&&(a.i=h.G.concat(a.i)),h=ef(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Cc(a.h,d),Ac(d,m,h)}function hi(a,h){a.H&&lt(a.H,function(d,m){Me(h,m,d)}),a.l&&lt({},function(d,m){Me(h,m,d)})}function ef(a,h,d){d=Math.min(a.i.length,d);const m=a.l?u(a.l.Ka,a.l,a):null;e:{var N=a.i;let me=-1;for(;;){const We=["count="+d];me==-1?d>0?(me=N[0].g,We.push("ofs="+me)):me=0:We.push("ofs="+me);let De=!0;for(let Ze=0;Ze<d;Ze++){var D=N[Ze].g;const rn=N[Ze].map;if(D-=me,D<0)me=Math.max(0,N[Ze].g-100),De=!1;else try{D="req"+D+"_"||"";try{var W=rn instanceof Map?rn:Object.entries(rn);for(const[xr,Jn]of W){let Xn=Jn;c(Jn)&&(Xn=Re(Jn)),We.push(D+xr+"="+encodeURIComponent(Xn))}}catch(xr){throw We.push(D+"type="+encodeURIComponent("_badmap")),xr}}catch{m&&m(rn)}}if(De){W=We.join("&");break e}}W=void 0}return a=a.i.splice(0,d),h.G=a,W}function tf(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;z||y(),J||(z(),J=!0),R.add(h,a),a.A=0}}function Oc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Zs(u(a.Da,a),sf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,nf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Zs(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),Ao(this),nf(this))};function Vc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function nf(a){a.g=new Kn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=nn(a.na);Me(h,"RID","rpc"),Me(h,"SID",a.M),Me(h,"AID",a.K),Me(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Me(h,"TO",a.ia),Me(h,"TYPE","xmlhttp"),hi(a,h),a.u&&a.o&&kc(h,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=To(nn(h)),d.u=null,d.R=!0,Nh(d,a)}t.Va=function(){this.C!=null&&(this.C=null,Ao(this),Oc(this),It(19))};function bo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function rf(a,h){var d=null;if(a.g==h){bo(a),Vc(a),a.g=null;var m=2}else if(Sc(a.h,h))d=h.G,Mh(a.h,h),m=1;else return;if(a.I!=0){if(h.o)if(m==1){d=h.u?h.u.length:0,h=Date.now()-h.F;var N=a.D;m=kr(),H(m,new Rh(m,d)),Ro(a)}else tf(a);else if(N=h.m,N==3||N==0&&h.X>0||!(m==1&&YE(a,h)||m==2&&Oc(a)))switch(d&&d.length>0&&(h=a.h,h.i=h.i.concat(d)),N){case 1:Vr(a,5);break;case 4:Vr(a,10);break;case 3:Vr(a,6);break;default:Vr(a,2)}}}function sf(a,h){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*h}function Vr(a,h){if(a.j.info("Error code "+h),h==2){var d=u(a.bb,a),m=a.Ua;const N=!m;m=new zn(m||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ri(m,"https"),To(m),N?HE(m.toString(),d):GE(m.toString(),d)}else It(2);a.I=0,a.l&&a.l.pa(h),of(a),Xh(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function of(a){if(a.I=0,a.ja=[],a.l){const h=Lh(a.h);(h.length!=0||a.i.length!=0)&&(C(a.ja,h),C(a.ja,a.i),a.h.i.length=0,E(a.i),a.i.length=0),a.l.oa()}}function af(a,h,d){var m=d instanceof zn?nn(d):new zn(d);if(m.g!="")h&&(m.g=h+"."+m.g),si(m,m.u);else{var N=o.location;m=N.protocol,h=h?h+"."+N.hostname:N.hostname,N=+N.port;const D=new zn(null);m&&ri(D,m),h&&(D.g=h),N&&si(D,N),d&&(D.h=d),m=D}return d=a.G,h=a.wa,d&&h&&Me(m,d,h),Me(m,"VER",a.ka),hi(a,m),m}function cf(a,h,d){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Be(new Nc({ab:d})):new Be(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lf(){}t=lf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function So(){}So.prototype.g=function(a,h){return new Vt(a,h)};function Vt(a,h){G.call(this),this.g=new Jh(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!v(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new us(this)}p(Vt,G),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Dc(this.g)},Vt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=Re(a),a=d);h.i.push(new ME(h.Ya++,a)),h.I==3&&Ro(h)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Dc(this.g),delete this.g,Vt.Z.N.call(this)};function uf(a){as.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const d in h){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(uf,as);function hf(){rt.call(this),this.status=1}p(hf,rt);function us(a){this.g=a}p(us,lf),us.prototype.ra=function(){H(this.g,"a")},us.prototype.qa=function(a){H(this.g,new uf(a))},us.prototype.pa=function(a){H(this.g,new hf)},us.prototype.oa=function(){H(this.g,"b")},So.prototype.createWebChannel=So.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,T_=function(){return new So},v_=function(){return kr()},E_=Xe,Ll={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Eo.NO_ERROR=0,Eo.TIMEOUT=8,Eo.HTTP_ERROR=6,Qo=Eo,bh.COMPLETE="complete",y_=bh,Ot.EventType=Ht,Ht.OPEN="a",Ht.CLOSE="b",Ht.ERROR="c",Ht.MESSAGE="d",G.prototype.listen=G.prototype.J,Ei=Ot,Be.prototype.listenOnce=Be.prototype.K,Be.prototype.getLastError=Be.prototype.Ha,Be.prototype.getLastErrorCode=Be.prototype.ya,Be.prototype.getStatus=Be.prototype.ca,Be.prototype.getResponseJson=Be.prototype.La,Be.prototype.getResponseText=Be.prototype.la,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Fa,__=Be}).apply(typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{});const Nd="@firebase/firestore",kd="4.9.3";class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");let Gs="12.7.0";const Xr=new Su("@firebase/firestore");function gs(){return Xr.logLevel}function ee(t,...e){if(Xr.logLevel<=ve.DEBUG){const n=e.map(Nu);Xr.debug(`Firestore (${Gs}): ${t}`,...n)}}function jn(t,...e){if(Xr.logLevel<=ve.ERROR){const n=e.map(Nu);Xr.error(`Firestore (${Gs}): ${t}`,...n)}}function Ls(t,...e){if(Xr.logLevel<=ve.WARN){const n=e.map(Nu);Xr.warn(`Firestore (${Gs}): ${t}`,...n)}}function Nu(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,I_(t,r,n)}function I_(t,e,n){let r=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw jn(r),new Error(r)}function Ce(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||I_(e,s,r)}function ge(t,e){return t}const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends wn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _r{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class w_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(gt.UNAUTHENTICATED)))}shutdown(){}}class PR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class NR{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _r,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},c=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _r)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string",31837,{l:r}),new w_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class kR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new kR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(gt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Dd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ce(this.o===void 0,3512);const r=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Dd(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Dd(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function VR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class ku{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=VR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function Fl(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return sl(s)===sl(i)?Te(s,i):sl(s)?1:-1}return Te(t.length,e.length)}const xR=55296,MR=57343;function sl(t){const e=t.charCodeAt(0);return e>=xR&&e<=MR}function Fs(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const Od="__name__";class cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=cn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Te(e.length,n.length)}static compareSegments(e,n){const r=cn.isNumericId(e),s=cn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?cn.extractNumericId(e).compare(cn.extractNumericId(n)):Fl(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mr.fromString(e.substring(4,e.length-2))}}class Ve extends cn{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Ve(n)}static emptyPath(){return new Ve([])}}const LR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends cn{construct(e,n,r){return new it(e,n,r)}static isValidIdentifier(e){return LR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Od}static keyField(){return new it([Od])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new X(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new X(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new X(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(n)}static emptyPath(){return new it([])}}class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Ve.fromString(e))}static fromName(e){return new ie(Ve.fromString(e).popFirst(5))}static empty(){return new ie(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Ve(e.slice()))}}function A_(t,e,n){if(!n)throw new X(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FR(t,e,n,r){if(e===!0&&r===!0)throw new X(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vd(t){if(!ie.isDocumentKey(t))throw new X(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xd(t){if(ie.isDocumentKey(t))throw new X(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function R_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function sc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function Zr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sc(t);throw new X(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ge(t,e){const n={typeString:t};return e&&(n.value=e),n}function ao(t,e){if(!R_(t))throw new X(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new X(M.INVALID_ARGUMENT,n);return!0}const Md=-62135596800,Ld=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(e){return xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ld);return new xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Md)throw new X(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ld}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ao(e,xe._jsonSchema))return new xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Md;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:Ge("string",xe._jsonSchemaVersion),seconds:Ge("number"),nanoseconds:Ge("number")};class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new xe(0,0))}static max(){return new pe(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Wi=-1;function UR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=pe.fromTimestamp(r===1e9?new xe(n+1,0):new xe(n,r));return new Ir(s,ie.empty(),e)}function BR(t){return new Ir(t.readTime,t.key,Wi)}class Ir{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ir(pe.min(),ie.empty(),Wi)}static max(){return new Ir(pe.max(),ie.empty(),Wi)}}function jR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}const qR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $R{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ws(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==qR)throw t;ee("LocalStore","Unexpectedly lost primary lease")}class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):F.reject(n)}static resolve(e){return new F(((n,r)=>{n(e)}))}static reject(e){return new F(((n,r)=>{r(e)}))}static waitFor(e){return new F(((n,r)=>{let s=0,i=0,o=!1;e.forEach((c=>{++s,c.next((()=>{++i,o&&i===s&&n()}),(l=>r(l)))})),o=!0,i===s&&n()}))}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next((s=>s?F.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new F(((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((f=>{o[u]=f,++c,c===i&&r(o)}),(f=>s(f)))}}))}static doWhile(e,n){return new F(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function HR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ks(t){return t.name==="IndexedDbTransactionError"}class ic{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ic.ce=-1;const Du=-1;function oc(t){return t==null}function _a(t){return t===0&&1/t==-1/0}function GR(t){return typeof t=="number"&&Number.isInteger(t)&&!_a(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const b_="";function WR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Fd(e)),e=KR(t.get(n),e);return Fd(e)}function KR(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case b_:n+="";break;default:n+=i}}return n}function Fd(t){return t+b_+""}function Ud(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function S_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ue{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xo(this.root,e,this.comparator,!1)}getReverseIterator(){return new xo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xo(this.root,e,this.comparator,!0)}}class xo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??st.RED,this.left=s??st.EMPTY,this.right=i??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new st(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return st.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ye{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bd(this.data.getIterator())}getIteratorFrom(e){return new Bd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class Bd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Mt{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new Mt([])}unionWith(e){let n=new Ye(it.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Mt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fs(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class C_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new C_("Invalid base64 string: "+i):i}})(e);return new ct(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const zR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wr(t){if(Ce(!!t,39018),typeof t=="string"){let e=0;const n=zR.exec(t);if(Ce(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ar(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}const P_="server_timestamp",N_="__type__",k_="__previous_value__",D_="__local_write_time__";function Ou(t){return(t?.mapValue?.fields||{})[N_]?.stringValue===P_}function ac(t){const e=t.mapValue.fields[k_];return Ou(e)?ac(e):e}function Ki(t){const e=wr(t.mapValue.fields[D_].timestampValue);return new xe(e.seconds,e.nanos)}class QR{constructor(e,n,r,s,i,o,c,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const ya="(default)";class zi{constructor(e,n){this.projectId=e,this.database=n||ya}static empty(){return new zi("","")}get isDefaultDatabase(){return this.database===ya}isEqual(e){return e instanceof zi&&e.projectId===this.projectId&&e.database===this.database}}const O_="__type__",YR="__max__",Mo={mapValue:{}},V_="__vector__",Ea="value";function Rr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ou(t)?4:XR(t)?9007199254740991:JR(t)?10:11:ue(28295,{value:t})}function Tn(t,e){if(t===e)return!0;const n=Rr(t);if(n!==Rr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ki(t).isEqual(Ki(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=wr(s.timestampValue),c=wr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Ar(s.bytesValue).isEqual(Ar(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return qe(s.geoPointValue.latitude)===qe(i.geoPointValue.latitude)&&qe(s.geoPointValue.longitude)===qe(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return qe(s.integerValue)===qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=qe(s.doubleValue),c=qe(i.doubleValue);return o===c?_a(o)===_a(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Fs(t.arrayValue.values||[],e.arrayValue.values||[],Tn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Ud(o)!==Ud(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Tn(o[l],c[l])))return!1;return!0})(t,e);default:return ue(52216,{left:t})}}function Qi(t,e){return(t.values||[]).find((n=>Tn(n,e)))!==void 0}function Us(t,e){if(t===e)return 0;const n=Rr(t),r=Rr(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=qe(i.integerValue||i.doubleValue),l=qe(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(t,e);case 3:return jd(t.timestampValue,e.timestampValue);case 4:return jd(Ki(t),Ki(e));case 5:return Fl(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=Ar(i),l=Ar(o);return c.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){const f=Te(c[u],l[u]);if(f!==0)return f}return Te(c.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=Te(qe(i.latitude),qe(o.latitude));return c!==0?c:Te(qe(i.longitude),qe(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return qd(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const c=i.fields||{},l=o.fields||{},u=c[Ea]?.arrayValue,f=l[Ea]?.arrayValue,p=Te(u?.values?.length||0,f?.values?.length||0);return p!==0?p:qd(u,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Mo.mapValue&&o===Mo.mapValue)return 0;if(i===Mo.mapValue)return 1;if(o===Mo.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){const g=Fl(l[p],f[p]);if(g!==0)return g;const E=Us(c[l[p]],u[f[p]]);if(E!==0)return E}return Te(l.length,f.length)})(t.mapValue,e.mapValue);default:throw ue(23264,{he:n})}}function jd(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=wr(t),r=wr(e),s=Te(n.seconds,r.seconds);return s!==0?s:Te(n.nanos,r.nanos)}function qd(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Us(n[s],r[s]);if(i)return i}return Te(n.length,r.length)}function Bs(t){return Ul(t)}function Ul(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=wr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ar(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ie.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ul(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ul(n.fields[o])}`;return s+"}"})(t.mapValue):ue(61005,{value:t})}function Yo(t){switch(Rr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ac(t);return e?16+Yo(e):16;case 5:return 2*t.stringValue.length;case 6:return Ar(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Yo(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Pr(r.fields,((i,o)=>{s+=i.length+Yo(o)})),s})(t.mapValue);default:throw ue(13486,{value:t})}}function $d(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Bl(t){return!!t&&"integerValue"in t}function Vu(t){return!!t&&"arrayValue"in t}function Hd(t){return!!t&&"nullValue"in t}function Gd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jo(t){return!!t&&"mapValue"in t}function JR(t){return(t?.mapValue?.fields||{})[O_]?.stringValue===V_}function Di(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Pr(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Di(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Di(t.arrayValue.values[n]);return e}return{...t}}function XR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===YR}class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Jo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Di(n)}setAll(e){let n=it.emptyPath(),r={},s=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Di(o):s.push(c.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Jo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Jo(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Pr(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Nt(Di(this.value))}}function x_(t){const e=[];return Pr(t.fields,((n,r)=>{const s=new it([n]);if(Jo(r)){const i=x_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Mt(e)}class yt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new yt(e,0,pe.min(),pe.min(),pe.min(),Nt.empty(),0)}static newFoundDocument(e,n,r,s){return new yt(e,1,n,pe.min(),r,s,0)}static newNoDocument(e,n){return new yt(e,2,n,pe.min(),pe.min(),Nt.empty(),0)}static newUnknownDocument(e,n){return new yt(e,3,n,pe.min(),pe.min(),Nt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class va{constructor(e,n){this.position=e,this.inclusive=n}}function Wd(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=Us(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tn(t.position[n],e.position[n]))return!1;return!0}class Yi{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class M_{}class He extends M_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new tb(e,n,r):n==="array-contains"?new sb(e,r):n==="in"?new ib(e,r):n==="not-in"?new ob(e,r):n==="array-contains-any"?new ab(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new nb(e,r):new rb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Us(n,this.value)):n!==null&&Rr(this.value)===Rr(n)&&this.matchesComparison(Us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class en extends M_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new en(e,n)}matches(e){return L_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function L_(t){return t.op==="and"}function F_(t){return eb(t)&&L_(t)}function eb(t){for(const e of t.filters)if(e instanceof en)return!1;return!0}function jl(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Bs(t.value);if(F_(t))return t.filters.map((e=>jl(e))).join(",");{const e=t.filters.map((n=>jl(n))).join(",");return`${t.op}(${e})`}}function U_(t,e){return t instanceof He?(function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&Tn(r.value,s.value)})(t,e):t instanceof en?(function(r,s){return s instanceof en&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,c)=>i&&U_(o,s.filters[c])),!0):!1})(t,e):void ue(19439)}function B_(t){return t instanceof He?(function(n){return`${n.field.canonicalString()} ${n.op} ${Bs(n.value)}`})(t):t instanceof en?(function(n){return n.op.toString()+" {"+n.getFilters().map(B_).join(" ,")+"}"})(t):"Filter"}class tb extends He{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class nb extends He{constructor(e,n){super(e,"in",n),this.keys=j_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class rb extends He{constructor(e,n){super(e,"not-in",n),this.keys=j_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function j_(t,e){return(e.arrayValue?.values||[]).map((n=>ie.fromName(n.referenceValue)))}class sb extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vu(n)&&Qi(n.arrayValue,this.value)}}class ib extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qi(this.value.arrayValue,n)}}class ob extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qi(this.value.arrayValue,n)}}class ab extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Qi(this.value.arrayValue,r)))}}class cb{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function zd(t,e=null,n=[],r=[],s=null,i=null,o=null){return new cb(t,e,n,r,s,i,o)}function xu(t){const e=ge(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>jl(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),oc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Bs(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Bs(r))).join(",")),e.Te=n}return e.Te}function Mu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!U_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Kd(t.startAt,e.startAt)&&Kd(t.endAt,e.endAt)}function ql(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class zs{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function lb(t,e,n,r,s,i,o,c){return new zs(t,e,n,r,s,i,o,c)}function q_(t){return new zs(t)}function Qd(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $_(t){return t.collectionGroup!==null}function Oi(t){const e=ge(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ye(it.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(c=c.add(u.field))}))})),c})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Yi(i,r))})),n.has(it.keyField().canonicalString())||e.Ie.push(new Yi(it.keyField(),r))}return e.Ie}function pn(t){const e=ge(t);return e.Ee||(e.Ee=ub(e,Oi(t))),e.Ee}function ub(t,e){if(t.limitType==="F")return zd(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Yi(s.field,i)}));const n=t.endAt?new va(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new va(t.startAt.position,t.startAt.inclusive):null;return zd(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $l(t,e){const n=t.filters.concat([e]);return new zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Hl(t,e,n){return new zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cc(t,e){return Mu(pn(t),pn(e))&&t.limitType===e.limitType}function H_(t){return`${xu(pn(t))}|lt:${t.limitType}`}function ms(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>B_(s))).join(", ")}]`),oc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Bs(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Bs(s))).join(",")),`Target(${r})`})(pn(t))}; limitType=${t.limitType})`}function lc(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of Oi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,c,l){const u=Wd(o,c,l);return o.inclusive?u<=0:u<0})(r.startAt,Oi(r),s)||r.endAt&&!(function(o,c,l){const u=Wd(o,c,l);return o.inclusive?u>=0:u>0})(r.endAt,Oi(r),s))})(t,e)}function hb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function G_(t){return(e,n)=>{let r=!1;for(const s of Oi(t)){const i=fb(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function fb(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):(function(i,o,c){const l=o.data.field(i),u=c.data.field(i);return l!==null&&u!==null?Us(l,u):ue(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:t.dir})}}class ss{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Pr(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return S_(this.inner)}size(){return this.innerSize}}const db=new Ue(ie.comparator);function qn(){return db}const W_=new Ue(ie.comparator);function vi(...t){let e=W_;for(const n of t)e=e.insert(n.key,n);return e}function K_(t){let e=W_;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Hr(){return Vi()}function z_(){return Vi()}function Vi(){return new ss((t=>t.toString()),((t,e)=>t.isEqual(e)))}const pb=new Ue(ie.comparator),gb=new Ye(ie.comparator);function Ie(...t){let e=gb;for(const n of t)e=e.add(n);return e}const mb=new Ye(Te);function _b(){return mb}function Lu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_a(e)?"-0":e}}function Q_(t){return{integerValue:""+t}}function yb(t,e){return GR(e)?Q_(e):Lu(t,e)}class uc{constructor(){this._=void 0}}function Eb(t,e,n){return t instanceof Ta?(function(s,i){const o={fields:{[N_]:{stringValue:P_},[D_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ou(i)&&(i=ac(i)),i&&(o.fields[k_]=i),{mapValue:o}})(n,e):t instanceof Ji?J_(t,e):t instanceof Xi?X_(t,e):(function(s,i){const o=Y_(s,i),c=Yd(o)+Yd(s.Ae);return Bl(o)&&Bl(s.Ae)?Q_(c):Lu(s.serializer,c)})(t,e)}function vb(t,e,n){return t instanceof Ji?J_(t,e):t instanceof Xi?X_(t,e):n}function Y_(t,e){return t instanceof Ia?(function(r){return Bl(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class Ta extends uc{}class Ji extends uc{constructor(e){super(),this.elements=e}}function J_(t,e){const n=Z_(e);for(const r of t.elements)n.some((s=>Tn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Xi extends uc{constructor(e){super(),this.elements=e}}function X_(t,e){let n=Z_(e);for(const r of t.elements)n=n.filter((s=>!Tn(s,r)));return{arrayValue:{values:n}}}class Ia extends uc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Yd(t){return qe(t.integerValue||t.doubleValue)}function Z_(t){return Vu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Tb(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Ji&&s instanceof Ji||r instanceof Xi&&s instanceof Xi?Fs(r.elements,s.elements,Tn):r instanceof Ia&&s instanceof Ia?Tn(r.Ae,s.Ae):r instanceof Ta&&s instanceof Ta})(t.transform,e.transform)}class Ib{constructor(e,n){this.version=e,this.transformResults=n}}class Qt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qt}static exists(e){return new Qt(void 0,e)}static updateTime(e){return new Qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hc{}function ey(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fu(t.key,Qt.none()):new co(t.key,t.data,Qt.none());{const n=t.data,r=Nt.empty();let s=new Ye(it.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Nr(t.key,r,new Mt(s.toArray()),Qt.none())}}function wb(t,e,n){t instanceof co?(function(s,i,o){const c=s.value.clone(),l=Xd(s.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Nr?(function(s,i,o){if(!Xo(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Xd(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(ty(s)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function xi(t,e,n,r){return t instanceof co?(function(i,o,c,l){if(!Xo(i.precondition,o))return c;const u=i.value.clone(),f=Zd(i.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Nr?(function(i,o,c,l){if(!Xo(i.precondition,o))return c;const u=Zd(i.fieldTransforms,l,o),f=o.data;return f.setAll(ty(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(i,o,c){return Xo(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function Ab(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Y_(r.transform,s||null);i!=null&&(n===null&&(n=Nt.empty()),n.set(r.field,i))}return n||null}function Jd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Fs(r,s,((i,o)=>Tb(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class co extends hc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Nr extends hc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ty(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Xd(t,e,n){const r=new Map;Ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,vb(o,c,n[s]))}return r}function Zd(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Eb(i,o,e))}return r}class Fu extends hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rb extends hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&wb(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=z_();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const l=ey(o,c);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(pe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ie())}isEqual(e){return this.batchId===e.batchId&&Fs(this.mutations,e.mutations,((n,r)=>Jd(n,r)))&&Fs(this.baseMutations,e.baseMutations,((n,r)=>Jd(n,r)))}}class Uu{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return pb})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Uu(e,n,r,s)}}class Sb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Cb{constructor(e,n){this.count=e,this.unchangedNames=n}}var $e,Ae;function Pb(t){switch(t){case M.OK:return ue(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return ue(15467,{code:t})}}function ny(t){if(t===void 0)return jn("GRPC error has no .code"),M.UNKNOWN;switch(t){case $e.OK:return M.OK;case $e.CANCELLED:return M.CANCELLED;case $e.UNKNOWN:return M.UNKNOWN;case $e.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case $e.INTERNAL:return M.INTERNAL;case $e.UNAVAILABLE:return M.UNAVAILABLE;case $e.UNAUTHENTICATED:return M.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case $e.NOT_FOUND:return M.NOT_FOUND;case $e.ALREADY_EXISTS:return M.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return M.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case $e.ABORTED:return M.ABORTED;case $e.OUT_OF_RANGE:return M.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return M.UNIMPLEMENTED;case $e.DATA_LOSS:return M.DATA_LOSS;default:return ue(39323,{code:t})}}(Ae=$e||($e={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";function Nb(){return new TextEncoder}const kb=new mr([4294967295,4294967295],0);function ep(t){const e=Nb().encode(t),n=new m_;return n.update(e),new Uint8Array(n.digest())}function tp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new mr([n,r],0),new mr([s,i],0)]}class Bu{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ti(`Invalid padding: ${n}`);if(r<0)throw new Ti(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ti(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ti(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=mr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(mr.fromNumber(r)));return s.compare(kb)===1&&(s=new mr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ep(e),[r,s]=tp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Bu(i,s,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=ep(e),[r,s]=tp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ti extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,lo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fc(pe.min(),s,new Ue(Te),qn(),Ie())}}class lo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new lo(r,n,Ie(),Ie(),Ie())}}class Zo{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class ry{constructor(e,n){this.targetId=e,this.Ce=n}}class sy{constructor(e,n,r=ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class np{constructor(){this.ve=0,this.Fe=rp(),this.Me=ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ie(),n=Ie(),r=Ie();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue(38017,{changeType:i})}})),new lo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=rp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Db{constructor(e){this.Ge=e,this.ze=new Map,this.je=qn(),this.Je=Lo(),this.He=Lo(),this.Ye=new Ue(Te)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ql(i))if(r===0){const o=new ie(i.path);this.et(n,o,yt.newNoDocument(o,pe.min()))}else Ce(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),l=c?this.ct(c,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Ar(r).toUint8Array()}catch(l){if(l instanceof C_)return Ls("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Bu(o,s,i)}catch(l){return Ls(l instanceof Ti?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const c=this.ot(o);if(c){if(i.current&&ql(c.target)){const l=new ie(c.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,yt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=Ie();this.He.forEach(((i,o)=>{let c=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new fc(e,n,this.Ye,this.je,r);return this.je=qn(),this.Je=Lo(),this.He=Lo(),this.Ye=new Ue(Te),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new np,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ye(Te),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ye(Te),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new np),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Lo(){return new Ue(ie.comparator)}function rp(){return new Ue(ie.comparator)}const Ob={asc:"ASCENDING",desc:"DESCENDING"},Vb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xb={and:"AND",or:"OR"};class Mb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gl(t,e){return t.useProto3Json||oc(e)?e:{value:e}}function wa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iy(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Lb(t,e){return wa(t,e.toTimestamp())}function gn(t){return Ce(!!t,49232),pe.fromTimestamp((function(n){const r=wr(n);return new xe(r.seconds,r.nanos)})(t))}function ju(t,e){return Wl(t,e).canonicalString()}function Wl(t,e){const n=(function(s){return new Ve(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function oy(t){const e=Ve.fromString(t);return Ce(hy(e),10190,{key:e.toString()}),e}function Kl(t,e){return ju(t.databaseId,e.path)}function il(t,e){const n=oy(e);if(n.get(1)!==t.databaseId.projectId)throw new X(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(cy(n))}function ay(t,e){return ju(t.databaseId,e)}function Fb(t){const e=oy(t);return e.length===4?Ve.emptyPath():cy(e)}function zl(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cy(t){return Ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function sp(t,e,n){return{name:Kl(t,e),fields:n.value.mapValue.fields}}function Ub(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,f){return u.useProto3Json?(Ce(f===void 0||typeof f=="string",58123),ct.fromBase64String(f||"")):(Ce(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),ct.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(u){const f=u.code===void 0?M.UNKNOWN:ny(u.code);return new X(f,u.message||"")})(o);n=new sy(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=il(t,r.document.name),i=gn(r.document.updateTime),o=r.document.createTime?gn(r.document.createTime):pe.min(),c=new Nt({mapValue:{fields:r.document.fields}}),l=yt.newFoundDocument(s,i,o,c),u=r.targetIds||[],f=r.removedTargetIds||[];n=new Zo(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=il(t,r.document),i=r.readTime?gn(r.readTime):pe.min(),o=yt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Zo([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=il(t,r.document),i=r.removedTargetIds||[];n=new Zo([],i,s,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Cb(s,i),c=r.targetId;n=new ry(c,o)}}return n}function Bb(t,e){let n;if(e instanceof co)n={update:sp(t,e.key,e.value)};else if(e instanceof Fu)n={delete:Kl(t,e.key)};else if(e instanceof Nr)n={update:sp(t,e.key,e.data),updateMask:Qb(e.fieldMask)};else{if(!(e instanceof Rb))return ue(16599,{Vt:e.type});n={verify:Kl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const c=o.transform;if(c instanceof Ta)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ji)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ia)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ue(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:Lb(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue(27497)})(t,e.precondition)),n}function jb(t,e){return t&&t.length>0?(Ce(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?gn(s.updateTime):gn(i);return o.isEqual(pe.min())&&(o=gn(i)),new Ib(o,s.transformResults||[])})(n,e)))):[]}function qb(t,e){return{documents:[ay(t,e.path)]}}function $b(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ay(t,s);const i=(function(u){if(u.length!==0)return uy(en.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:_s(g.field),direction:Wb(g.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Gl(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function Hb(t){let e=Fb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ce(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(p){const g=ly(p);return g instanceof en&&F_(g)?g.getFilters():[g]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((g=>(function(C){return new Yi(ys(C.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(g)))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let g;return g=typeof p=="object"?p.value:p,oc(g)?null:g})(n.limit));let l=null;n.startAt&&(l=(function(p){const g=!!p.before,E=p.values||[];return new va(E,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(p){const g=!p.before,E=p.values||[];return new va(E,g)})(n.endAt)),lb(e,s,o,i,c,"F",l,u)}function Gb(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ly(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ys(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ys(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ys(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ys(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}})(t):t.fieldFilter!==void 0?(function(n){return He.create(ys(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return en.create(n.compositeFilter.filters.map((r=>ly(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue(1026)}})(n.compositeFilter.op))})(t):ue(30097,{filter:t})}function Wb(t){return Ob[t]}function Kb(t){return Vb[t]}function zb(t){return xb[t]}function _s(t){return{fieldPath:t.canonicalString()}}function ys(t){return it.fromServerFormat(t.fieldPath)}function uy(t){return t instanceof He?(function(n){if(n.op==="=="){if(Gd(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NAN"}};if(Hd(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gd(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NOT_NAN"}};if(Hd(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_s(n.field),op:Kb(n.op),value:n.value}}})(t):t instanceof en?(function(n){const r=n.getFilters().map((s=>uy(s)));return r.length===1?r[0]:{compositeFilter:{op:zb(n.op),filters:r}}})(t):ue(54877,{filter:t})}function Qb(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function hy(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class fr{constructor(e,n,r,s,i=pe.min(),o=pe.min(),c=ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Yb{constructor(e){this.yt=e}}function Jb(t){const e=Hb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hl(e,e.limit,"L"):e}class Xb{constructor(){this.Cn=new Zb}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Ir.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class Zb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ye(Ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ye(Ve.comparator)).toArray()}}const ip={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fy=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(fy,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);class js{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new js(0)}static cr(){return new js(-1)}}const op="LruGarbageCollector",eS=1048576;function ap([t,e],[n,r]){const s=Te(t,n);return s===0?Te(e,r):s}class tS{constructor(e){this.Ir=e,this.buffer=new Ye(ap),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ap(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class nS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ee(op,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ks(n)?ee(op,"Ignoring IndexedDB error during garbage collection: ",n):await Ws(n)}await this.Vr(3e5)}))}}class rS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return F.resolve(ic.ce);const r=new tS(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(ip)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ip):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s)))).next((p=>(r=p,c=Date.now(),this.removeTargets(e,r,n)))).next((p=>(i=p,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(u=Date.now(),gs()<=ve.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function sS(t,e){return new rS(t,e)}class iS{constructor(){this.changes=new ss((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class aS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&xi(r.mutation,s,Mt.empty(),xe.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ie()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ie()){const s=Hr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=vi();return i.forEach(((c,l)=>{o=o.insert(c,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Hr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ie())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,s){let i=qn();const o=Vi(),c=(function(){return Vi()})();return n.forEach(((l,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof Nr)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),xi(f.mutation,u,f.mutation.getFieldMask(),xe.now())):o.set(u.key,Mt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,f)=>o.set(u,f))),n.forEach(((u,f)=>c.set(u,new oS(f,o.get(u)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Vi();let s=new Ue(((o,c)=>o-c)),i=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let f=r.get(l)||Mt.empty();f=c.applyToLocalView(u,f),r.set(l,f);const p=(s.get(c.batchId)||Ie()).add(l);s=s.insert(c.batchId,p)}))})).next((()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,f=l.value,p=z_();f.forEach((g=>{if(!i.has(g)){const E=ey(n.get(g),r.get(g));E!==null&&p.set(g,E),i=i.add(g)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return F.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Hr());let c=Wi,l=i;return o.next((u=>F.forEach(u,((f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{l=l.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Ie()))).next((f=>({batchId:c,changes:K_(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next((r=>{let s=vi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=vi();return this.indexManager.getCollectionParents(e,i).next((c=>F.forEach(c,(l=>{const u=(function(p,g){return new zs(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((f=>{f.forEach(((p,g)=>{o=o.insert(p,g)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,yt.newInvalidDocument(f)))}));let c=vi();return o.forEach(((l,u)=>{const f=i.get(l);f!==void 0&&xi(f.mutation,u,Mt.empty(),xe.now()),lc(n,u)&&(c=c.insert(l,u))})),c}))}}class cS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return F.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:gn(s.createTime)}})(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:Jb(s.bundledQuery),readTime:gn(s.readTime)}})(n)),F.resolve()}}class lS{constructor(){this.overlays=new Ue(ie.comparator),this.qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hr();return F.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Hr(),i=n.length+1,o=new ie(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ue(((u,f)=>u-f));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=Hr(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const c=Hr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>c.set(u,f))),!(c.size()>=s)););return F.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Sb(n,r));let i=this.qr.get(n);i===void 0&&(i=Ie(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class uS{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}class qu{constructor(){this.Qr=new Ye(et.$r),this.Ur=new Ye(et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new et(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new et(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ie(new Ve([])),r=new et(n,e),s=new et(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ie(new Ve([])),r=new et(n,e),s=new et(n,e+1);let i=Ie();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new et(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class et{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ie.comparator(e.key,n.key)||Te(e.Yr,n.Yr)}static Kr(e,n){return Te(e.Yr,n.Yr)||ie.comparator(e.key,n.key)}}class hS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ye(et.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bb(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new et(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Du:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new et(n,0),s=new et(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const c=this.Xr(o.Yr);i.push(c)})),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(Te);return n.forEach((s=>{const i=new et(s,0),o=new et(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(c=>{r=r.add(c.Yr)}))})),F.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ie.isDocumentKey(i)||(i=i.child(""));const o=new et(new ie(i),0);let c=new Ye(Te);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(c=c.add(l.Yr)),!0)}),o),F.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return F.forEach(n.mutations,(s=>{const i=new et(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new et(n,0),s=this.Zr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class fS{constructor(e){this.ri=e,this.docs=(function(){return new Ue(ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(n))}getEntries(e,n){let r=qn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():yt.newInvalidDocument(s))})),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=qn();const o=n.path,c=new ie(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||jR(BR(f),r)<=0||(s.has(f.key)||lc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue(9500)}ii(e,n){return F.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new dS(this)}getSize(e){return F.resolve(this.size)}}class dS extends iS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),F.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class pS{constructor(e){this.persistence=e,this.si=new ss((n=>xu(n)),Mu),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.oi=0,this._i=new qu,this.targetCount=0,this.ai=js.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),F.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new js(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Pr(n),F.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),F.waitFor(i).next((()=>s))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this._i.containsKey(n))}}class dy{constructor(e,n){this.ui={},this.overlays={},this.ci=new ic(0),this.li=!1,this.li=!0,this.hi=new uS,this.referenceDelegate=e(this),this.Pi=new pS(this),this.indexManager=new Xb,this.remoteDocumentCache=(function(s){return new fS(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Yb(n),this.Ii=new cS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new hS(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const s=new gS(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return F.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class gS extends $R{constructor(e){super(),this.currentSequenceNumber=e}}class $u{constructor(e){this.persistence=e,this.Ri=new qu,this.Vi=null}static mi(e){return new $u(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,(r=>{const s=ie.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,pe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Aa{constructor(e,n){this.persistence=e,this.pi=new ss((r=>WR(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=sS(this,n)}static mi(e,n){return new Aa(e,n)}Ei(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return F.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?F.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,i.removeEntry(o,pe.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Yo(e.data.value)),n}br(e,n,r){return F.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Hu{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ie(),s=Ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Hu(e,n.fromCache,r,s)}}class mS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _S{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return cA()?8:HR(Tt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new mS;return this.Ss(e,n,o).next((c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(gs()<=ve.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",ms(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(gs()<=ve.DEBUG&&ee("QueryEngine","Query:",ms(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(gs()<=ve.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",ms(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(n))):F.resolve())}ys(e,n){if(Qd(n))return F.resolve(null);let r=pn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Hl(n,null,"F"),r=pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Ie(...i);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(n,c);return this.Cs(n,u,o,l.readTime)?this.ys(e,Hl(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,r,s){return Qd(n)||s.isEqual(pe.min())?F.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?F.resolve(null):(gs()<=ve.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ms(n)),this.vs(e,o,n,UR(s,Wi)).next((c=>c)))}))}Ds(e,n){let r=new Ye(G_(e));return n.forEach(((s,i)=>{lc(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return gs()<=ve.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",ms(n)),this.ps.getDocumentsMatchingQuery(e,n,Ir.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Gu="LocalStore",yS=3e8;class ES{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ue(Te),this.xs=new ss((i=>xu(i)),Mu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function vS(t,e,n,r){return new ES(t,e,n,r)}async function py(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],c=[];let l=Ie();for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of i){c.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:c})))}))}))}function TS(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,u,f){const p=u.batch,g=p.keys();let E=F.resolve();return g.forEach((C=>{E=E.next((()=>f.getEntry(l,C))).next((k=>{const S=u.docVersions.get(C);Ce(S!==null,48541),k.version.compareTo(S)<0&&(p.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),f.addEntry(k)))}))})),E.next((()=>c.mutationQueue.removeMutationBatch(l,p)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=Ie();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function gy(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function IS(t,e){const n=ge(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach(((f,p)=>{const g=s.get(p);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p))));let E=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(ct.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),s=s.insert(p,E),(function(k,S,L){return k.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=yS?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(g,E,f)&&c.push(n.Pi.updateTargetData(i,E))}));let l=qn(),u=Ie();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(wS(i,o,e.documentUpdates).next((f=>{l=f.ks,u=f.qs}))),!r.isEqual(pe.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(f)}return F.waitFor(c).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=s,i)))}function wS(t,e,n){let r=Ie(),s=Ie();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=qn();return n.forEach(((c,l)=>{const u=i.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(pe.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):ee(Gu,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function AS(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Du),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function RS(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,F.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new fr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Ql(t,e,n){const r=ge(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Ks(o))throw o;ee(Gu,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function cp(t,e,n){const r=ge(t);let s=pe.min(),i=Ie();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,f){const p=ge(l),g=p.xs.get(f);return g!==void 0?F.resolve(p.Ms.get(g)):p.Pi.getTargetData(u,f)})(r,o,pn(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:pe.min(),n?i:Ie()))).next((c=>(bS(r,hb(e),c),{documents:c,Qs:i})))))}function bS(t,e,n){let r=t.Os.get(e)||pe.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class lp{constructor(){this.activeTargetIds=_b()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SS{constructor(){this.Mo=new lp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new lp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class CS{Oo(e){}shutdown(){}}const up="ConnectivityMonitor";class hp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ee(up,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ee(up,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Fo=null;function Yl(){return Fo===null?Fo=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fo++,"0x"+Fo.toString(16)}const ol="RestConnection",PS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class NS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===ya?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Yl(),c=this.zo(e,n.toUriEncodedString());ee(ol,`Sending RPC '${e}' ${o}:`,c,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(c),f=Hs(u);return this.Jo(e,c,l,r,f).then((p=>(ee(ol,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw Ls(ol,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Gs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=PS[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class kS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const dt="WebChannelConnection";class DS extends NS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Yl();return new Promise(((c,l)=>{const u=new __;u.setWithCredentials(!0),u.listenOnce(y_.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Qo.NO_ERROR:const p=u.getResponseJson();ee(dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case Qo.TIMEOUT:ee(dt,`RPC '${e}' ${o} timed out`),l(new X(M.DEADLINE_EXCEEDED,"Request time out"));break;case Qo.HTTP_ERROR:const g=u.getStatus();if(ee(dt,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let E=u.getResponseJson();Array.isArray(E)&&(E=E[0]);const C=E?.error;if(C&&C.status&&C.message){const k=(function(L){const j=L.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(j)>=0?j:M.UNKNOWN})(C.status);l(new X(k,C.message))}else l(new X(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new X(M.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ee(dt,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(s);ee(dt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const s=Yl(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=T_(),c=v_(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=i.join("");ee(dt,`Creating RPC '${e}' stream ${s}: ${f}`,l);const p=o.createWebChannel(f,l);this.I_(p);let g=!1,E=!1;const C=new kS({Yo:S=>{E?ee(dt,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(g||(ee(dt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),ee(dt,`RPC '${e}' stream ${s} sending:`,S),p.send(S))},Zo:()=>p.close()}),k=(S,L,j)=>{S.listen(L,(U=>{try{j(U)}catch($){setTimeout((()=>{throw $}),0)}}))};return k(p,Ei.EventType.OPEN,(()=>{E||(ee(dt,`RPC '${e}' stream ${s} transport opened.`),C.o_())})),k(p,Ei.EventType.CLOSE,(()=>{E||(E=!0,ee(dt,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(p))})),k(p,Ei.EventType.ERROR,(S=>{E||(E=!0,Ls(dt,`RPC '${e}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),C.a_(new X(M.UNAVAILABLE,"The operation could not be completed")))})),k(p,Ei.EventType.MESSAGE,(S=>{if(!E){const L=S.data[0];Ce(!!L,16349);const j=L,U=j?.error||j[0]?.error;if(U){ee(dt,`RPC '${e}' stream ${s} received error:`,U);const $=U.status;let z=(function(y){const _=$e[y];if(_!==void 0)return ny(_)})($),J=U.message;z===void 0&&(z=M.INTERNAL,J="Unknown error status: "+$+" with message "+U.message),E=!0,C.a_(new X(z,J)),p.close()}else ee(dt,`RPC '${e}' stream ${s} received:`,L),C.u_(L)}})),k(c,E_.STAT_EVENT,(S=>{S.stat===Ll.PROXY?ee(dt,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===Ll.NOPROXY&&ee(dt,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function al(){return typeof document<"u"?document:null}function dc(t){return new Mb(t,!0)}class my{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const fp="PersistentStream";class _y{constructor(e,n,r,s,i,o,c,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new my(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(jn(n.toString()),jn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new X(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ee(fp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ee(fp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class OS extends _y{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Ub(this.serializer,e),r=(function(i){if(!("targetChange"in i))return pe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?gn(o.readTime):pe.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=zl(this.serializer),n.addTarget=(function(i,o){let c;const l=o.target;if(c=ql(l)?{documents:qb(i,l)}:{query:$b(i,l).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=iy(i,o.resumeToken);const u=Gl(i,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(pe.min())>0){c.readTime=wa(i,o.snapshotVersion.toTimestamp());const u=Gl(i,o.expectedCount);u!==null&&(c.expectedCount=u)}return c})(this.serializer,e);const r=Gb(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=zl(this.serializer),n.removeTarget=e,this.q_(n)}}class VS extends _y{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=jb(e.writeResults,e.commitTime),r=gn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=zl(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Bb(this.serializer,r)))};this.q_(n)}}class xS{}class MS extends xS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new X(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Wl(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(M.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,Wl(n,r),s,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(M.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class LS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(jn(n),this.aa=!1):ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const es="RemoteStore";class FS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{is(this)&&(ee(es,"Restarting streams for network reachability change."),await(async function(l){const u=ge(l);u.Ea.add(4),await uo(u),u.Ra.set("Unknown"),u.Ea.delete(4),await pc(u)})(this))}))})),this.Ra=new LS(r,s)}}async function pc(t){if(is(t))for(const e of t.da)await e(!0)}async function uo(t){for(const e of t.da)await e(!1)}function yy(t,e){const n=ge(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Qu(n)?zu(n):Qs(n).O_()&&Ku(n,e))}function Wu(t,e){const n=ge(t),r=Qs(n);n.Ia.delete(e),r.O_()&&Ey(n,e),n.Ia.size===0&&(r.O_()?r.L_():is(n)&&n.Ra.set("Unknown"))}function Ku(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qs(t).Y_(e)}function Ey(t,e){t.Va.Ue(e),Qs(t).Z_(e)}function zu(t){t.Va=new Db({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Qs(t).start(),t.Ra.ua()}function Qu(t){return is(t)&&!Qs(t).x_()&&t.Ia.size>0}function is(t){return ge(t).Ea.size===0}function vy(t){t.Va=void 0}async function US(t){t.Ra.set("Online")}async function BS(t){t.Ia.forEach(((e,n)=>{Ku(t,e)}))}async function jS(t,e){vy(t),Qu(t)?(t.Ra.ha(e),zu(t)):t.Ra.set("Unknown")}async function qS(t,e,n){if(t.Ra.set("Online"),e instanceof sy&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))})(t,e)}catch(r){ee(es,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ra(t,r)}else if(e instanceof Zo?t.Va.Ze(e):e instanceof ry?t.Va.st(e):t.Va.tt(e),!n.isEqual(pe.min()))try{const r=await gy(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(u);f&&i.Ia.set(u,f.withResumeToken(l.resumeToken,o))}})),c.targetMismatches.forEach(((l,u)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(ct.EMPTY_BYTE_STRING,f.snapshotVersion)),Ey(i,l);const p=new fr(f.target,l,u,f.sequenceNumber);Ku(i,p)})),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){ee(es,"Failed to raise snapshot:",r),await Ra(t,r)}}async function Ra(t,e,n){if(!Ks(e))throw e;t.Ea.add(1),await uo(t),t.Ra.set("Offline"),n||(n=()=>gy(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ee(es,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await pc(t)}))}function Ty(t,e){return e().catch((n=>Ra(t,n,e)))}async function gc(t){const e=ge(t),n=br(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Du;for(;$S(e);)try{const s=await AS(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,HS(e,s)}catch(s){await Ra(e,s)}Iy(e)&&wy(e)}function $S(t){return is(t)&&t.Ta.length<10}function HS(t,e){t.Ta.push(e);const n=br(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Iy(t){return is(t)&&!br(t).x_()&&t.Ta.length>0}function wy(t){br(t).start()}async function GS(t){br(t).ra()}async function WS(t){const e=br(t);for(const n of t.Ta)e.ea(n.mutations)}async function KS(t,e,n){const r=t.Ta.shift(),s=Uu.from(r,e,n);await Ty(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await gc(t)}async function zS(t,e){e&&br(t).X_&&await(async function(r,s){if((function(o){return Pb(o)&&o!==M.ABORTED})(s.code)){const i=r.Ta.shift();br(r).B_(),await Ty(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await gc(r)}})(t,e),Iy(t)&&wy(t)}async function dp(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),ee(es,"RemoteStore received new credentials");const r=is(n);n.Ea.add(3),await uo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pc(n)}async function QS(t,e){const n=ge(t);e?(n.Ea.delete(2),await pc(n)):e||(n.Ea.add(2),await uo(n),n.Ra.set("Unknown"))}function Qs(t){return t.ma||(t.ma=(function(n,r,s){const i=ge(n);return i.sa(),new OS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:US.bind(null,t),t_:BS.bind(null,t),r_:jS.bind(null,t),H_:qS.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Qu(t)?zu(t):t.Ra.set("Unknown")):(await t.ma.stop(),vy(t))}))),t.ma}function br(t){return t.fa||(t.fa=(function(n,r,s){const i=ge(n);return i.sa(),new VS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:GS.bind(null,t),r_:zS.bind(null,t),ta:WS.bind(null,t),na:KS.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await gc(t)):(await t.fa.stop(),t.Ta.length>0&&(ee(es,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Yu{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Yu(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ju(t,e){if(jn("AsyncQueue",`${e}: ${t}`),Ks(t))return new X(M.UNAVAILABLE,`${e}: ${t}`);throw t}class Rs{static emptySet(e){return new Rs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=vi(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Rs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Rs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class pp{constructor(){this.ga=new Ue(ie.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class qs{constructor(e,n,r,s,i,o,c,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new qs(e,n,Rs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class YS{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class JS{constructor(){this.queries=gp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ge(n),i=s.queries;s.queries=gp(),i.forEach(((o,c)=>{for(const l of c.Sa)l.onError(r)}))})(this,new X(M.ABORTED,"Firestore shutting down"))}}function gp(){return new ss((t=>H_(t)),cc)}async function XS(t,e){const n=ge(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new YS,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Ju(o,`Initialization of query '${ms(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Xu(n)}async function ZS(t,e){const n=ge(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function eC(t,e){const n=ge(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&Xu(n)}function tC(t,e,n){const r=ge(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Xu(t){t.Ca.forEach((e=>{e.next()}))}var Jl,mp;(mp=Jl||(Jl={})).Ma="default",mp.Cache="cache";class nC{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new qs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jl.Cache}}class Ay{constructor(e){this.key=e}}class Ry{constructor(e){this.key=e}}class rC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ie(),this.mutatedKeys=Ie(),this.eu=G_(e),this.tu=new Rs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new pp,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,p)=>{const g=s.get(f),E=lc(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),k=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let S=!1;g&&E?g.data.isEqual(E.data)?C!==k&&(r.track({type:3,doc:E}),S=!0):this.su(g,E)||(r.track({type:2,doc:E}),S=!0,(l&&this.eu(E,l)>0||u&&this.eu(E,u)<0)&&(c=!0)):!g&&E?(r.track({type:0,doc:E}),S=!0):g&&!E&&(r.track({type:1,doc:g}),S=!0,(l||u)&&(c=!0)),S&&(E?(o=o.add(E),i=k?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,p)=>(function(E,C){const k=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:S})}};return k(E)-k(C)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new qs(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ie(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new Ry(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new Ay(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return qs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zu="SyncEngine";class sC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class iC{constructor(e){this.key=e,this.hu=!1}}class oC{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ss((c=>H_(c)),cc),this.Iu=new Map,this.Eu=new Set,this.du=new Ue(ie.comparator),this.Au=new Map,this.Ru=new qu,this.Vu={},this.mu=new Map,this.fu=js.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aC(t,e,n=!0){const r=ky(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await by(r,e,n,!0),s}async function cC(t,e){const n=ky(t);await by(n,e,!0,!1)}async function by(t,e,n,r){const s=await RS(t.localStore,pn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await lC(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&yy(t.remoteStore,s),c}async function lC(t,e,n,r,s){t.pu=(p,g,E)=>(async function(k,S,L,j){let U=S.view.ru(L);U.Cs&&(U=await cp(k.localStore,S.query,!1).then((({documents:R})=>S.view.ru(R,U))));const $=j&&j.targetChanges.get(S.targetId),z=j&&j.targetMismatches.get(S.targetId)!=null,J=S.view.applyChanges(U,k.isPrimaryClient,$,z);return yp(k,S.targetId,J.au),J.snapshot})(t,p,g,E);const i=await cp(t.localStore,e,!0),o=new rC(e,i.Qs),c=o.ru(i.documents),l=lo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(c,t.isPrimaryClient,l);yp(t,n,u.au);const f=new sC(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function uC(t,e,n){const r=ge(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!cc(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ql(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Wu(r.remoteStore,s.targetId),Xl(r,s.targetId)})).catch(Ws)):(Xl(r,s.targetId),await Ql(r.localStore,s.targetId,!0))}async function hC(t,e){const n=ge(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wu(n.remoteStore,r.targetId))}async function fC(t,e,n){const r=EC(t);try{const s=await(function(o,c){const l=ge(o),u=xe.now(),f=c.reduce(((E,C)=>E.add(C.key)),Ie());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let C=qn(),k=Ie();return l.Ns.getEntries(E,f).next((S=>{C=S,C.forEach(((L,j)=>{j.isValidDocument()||(k=k.add(L))}))})).next((()=>l.localDocuments.getOverlayedDocuments(E,C))).next((S=>{p=S;const L=[];for(const j of c){const U=Ab(j,p.get(j.key).overlayedDocument);U!=null&&L.push(new Nr(j.key,U,x_(U.value.mapValue),Qt.exists(!0)))}return l.mutationQueue.addMutationBatch(E,u,L,c)})).next((S=>{g=S;const L=S.applyToLocalDocumentSet(p,k);return l.documentOverlayCache.saveOverlays(E,S.batchId,L)}))})).then((()=>({batchId:g.batchId,changes:K_(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,c,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ue(Te)),u=u.insert(c,l),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,n),await ho(r,s.changes),await gc(r.remoteStore)}catch(s){const i=Ju(s,"Failed to persist write");n.reject(i)}}async function Sy(t,e){const n=ge(t);try{const r=await IS(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ce(o.hu,14607):s.removedDocuments.size>0&&(Ce(o.hu,42227),o.hu=!1))})),await ho(n,r,e)}catch(r){await Ws(r)}}function _p(t,e,n){const r=ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(o,c){const l=ge(o);l.onlineState=c;let u=!1;l.queries.forEach(((f,p)=>{for(const g of p.Sa)g.va(c)&&(u=!0)})),u&&Xu(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dC(t,e,n){const r=ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ue(ie.comparator);o=o.insert(i,yt.newNoDocument(i,pe.min()));const c=Ie().add(i),l=new fc(pe.min(),new Map,new Ue(Te),o,c);await Sy(r,l),r.du=r.du.remove(i),r.Au.delete(e),eh(r)}else await Ql(r.localStore,e,!1).then((()=>Xl(r,e,n))).catch(Ws)}async function pC(t,e){const n=ge(t),r=e.batch.batchId;try{const s=await TS(n.localStore,e);Py(n,r,null),Cy(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ho(n,s)}catch(s){await Ws(s)}}async function gC(t,e,n){const r=ge(t);try{const s=await(function(o,c){const l=ge(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next((p=>(Ce(p!==null,37113),f=p.keys(),l.mutationQueue.removeMutationBatch(u,p)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);Py(r,e,n),Cy(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ho(r,s)}catch(s){await Ws(s)}}function Cy(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Py(t,e,n){const r=ge(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Xl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||Ny(t,r)}))}function Ny(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Wu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),eh(t))}function yp(t,e,n){for(const r of n)r instanceof Ay?(t.Ru.addReference(r.key,e),mC(t,r)):r instanceof Ry?(ee(Zu,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Ny(t,r.key)):ue(19791,{wu:r})}function mC(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ee(Zu,"New document in limbo: "+n),t.Eu.add(r),eh(t))}function eh(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ie(Ve.fromString(e)),r=t.fu.next();t.Au.set(r,new iC(n)),t.du=t.du.insert(n,r),yy(t.remoteStore,new fr(pn(q_(n.path)),r,"TargetPurposeLimboResolution",ic.ce))}}async function ho(t,e,n){const r=ge(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Hu.As(l.targetId,u);i.push(f)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,u){const f=ge(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>F.forEach(u,(g=>F.forEach(g.Es,(E=>f.persistence.referenceDelegate.addReference(p,g.targetId,E))).next((()=>F.forEach(g.ds,(E=>f.persistence.referenceDelegate.removeReference(p,g.targetId,E)))))))))}catch(p){if(!Ks(p))throw p;ee(Gu,"Failed to update sequence numbers: "+p)}for(const p of u){const g=p.targetId;if(!p.fromCache){const E=f.Ms.get(g),C=E.snapshotVersion,k=E.withLastLimboFreeSnapshotVersion(C);f.Ms=f.Ms.insert(g,k)}}})(r.localStore,i))}async function _C(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){ee(Zu,"User change. New user:",e.toKey());const r=await py(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new X(M.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ho(n,r.Ls)}}function yC(t,e){const n=ge(t),r=n.Au.get(e);if(r&&r.hu)return Ie().add(r.key);{let s=Ie();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function ky(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dC.bind(null,e),e.Pu.H_=eC.bind(null,e.eventManager),e.Pu.yu=tC.bind(null,e.eventManager),e}function EC(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gC.bind(null,e),e}class ba{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return vS(this.persistence,new _S,e.initialUser,this.serializer)}Cu(e){return new dy($u.mi,this.serializer)}Du(e){return new SS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ba.provider={build:()=>new ba};class vC extends ba{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ce(this.persistence.referenceDelegate instanceof Aa,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new nS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new dy((r=>Aa.mi(r,n)),this.serializer)}}class Zl{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_p(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_C.bind(null,this.syncEngine),await QS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new JS})()}createDatastore(e){const n=dc(e.databaseInfo.databaseId),r=(function(i){return new DS(i)})(e.databaseInfo);return(function(i,o,c,l){return new MS(i,o,c,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,c){return new FS(r,s,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>_p(this.syncEngine,n,0)),(function(){return hp.v()?new hp:new CS})())}createSyncEngine(e,n){return(function(s,i,o,c,l,u,f){const p=new oC(s,i,o,c,l,u);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=ge(n);ee(es,"RemoteStore shutting down."),r.Ea.add(5),await uo(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Zl.provider={build:()=>new Zl};class TC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):jn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Sr="FirestoreClient";class IC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=gt.UNAUTHENTICATED,this.clientId=ku.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{ee(Sr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(ee(Sr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ju(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function cl(t,e){t.asyncQueue.verifyOperationInProgress(),ee(Sr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await py(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Ep(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wC(t);ee(Sr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>dp(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>dp(e.remoteStore,s))),t._onlineComponents=e}async function wC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee(Sr,"Using user provided OfflineComponentProvider");try{await cl(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Ls("Error using user provided cache. Falling back to memory cache: "+n),await cl(t,new ba)}}else ee(Sr,"Using default OfflineComponentProvider"),await cl(t,new vC(void 0));return t._offlineComponents}async function Dy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee(Sr,"Using user provided OnlineComponentProvider"),await Ep(t,t._uninitializedComponentsProvider._online)):(ee(Sr,"Using default OnlineComponentProvider"),await Ep(t,new Zl))),t._onlineComponents}function AC(t){return Dy(t).then((e=>e.syncEngine))}async function RC(t){const e=await Dy(t),n=e.eventManager;return n.onListen=aC.bind(null,e.syncEngine),n.onUnlisten=uC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hC.bind(null,e.syncEngine),n}function bC(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const f=new TC({next:g=>{f.Nu(),o.enqueueAndForget((()=>ZS(i,p))),g.fromCache&&l.source==="server"?u.reject(new X(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new nC(c,f,{includeMetadataChanges:!0,qa:!0});return XS(i,p)})(await RC(t),t.asyncQueue,e,n,r))),r.promise}function Oy(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const vp=new Map;const Vy="firestore.googleapis.com",Tp=!0;class Ip{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vy,this.ssl=Tp}else this.host=e.host,this.ssl=e.ssl??Tp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<eS)throw new X(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Oy(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ip({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ip(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new CR;switch(r.type){case"firstParty":return new DR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=vp.get(n);r&&(ee("ComponentProvider","Removing Datastore"),vp.delete(n),r.terminate())})(this),Promise.resolve()}}function SC(t,e,n,r={}){t=Zr(t,mc);const s=Hs(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(c_(`https://${c}`),l_("Firestore",!0)),i.host!==Vy&&i.host!==c&&Ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:s,emulatorOptions:r};if(!Yr(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=gt.MOCK_USER;else{u=Zw(r.mockUserToken,t._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new X(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new gt(p)}t._authCredentials=new PR(new w_(u,f))}}class os{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class Qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qe(this.firestore,e,this._key)}toJSON(){return{type:Qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ao(n,Qe._jsonSchema))return new Qe(e,r||null,new ie(Ve.fromString(n.referencePath)))}}Qe._jsonSchemaVersion="firestore/documentReference/1.0",Qe._jsonSchema={type:Ge("string",Qe._jsonSchemaVersion),referencePath:Ge("string")};class yr extends os{constructor(e,n,r){super(e,n,q_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qe(this.firestore,null,new ie(e))}withConverter(e){return new yr(this.firestore,e,this._path)}}function wp(t,e,...n){if(t=tt(t),A_("collection","path",e),t instanceof mc){const r=Ve.fromString(e,...n);return xd(r),new yr(t,null,r)}{if(!(t instanceof Qe||t instanceof yr))throw new X(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return xd(r),new yr(t.firestore,null,r)}}function eu(t,e,...n){if(t=tt(t),arguments.length===1&&(e=ku.newId()),A_("doc","path",e),t instanceof mc){const r=Ve.fromString(e,...n);return Vd(r),new Qe(t,null,new ie(r))}{if(!(t instanceof Qe||t instanceof yr))throw new X(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Vd(r),new Qe(t.firestore,t instanceof yr?t.converter:null,new ie(r))}}const Ap="AsyncQueue";class Rp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new my(this,"async_queue_retry"),this._c=()=>{const r=al();r&&ee(Ap,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=al();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=al();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new _r;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ks(e))throw e;ee(Ap,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,jn("INTERNAL UNHANDLED ERROR: ",bp(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Yu.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ue(47125,{Pc:bp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function bp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class fo extends mc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Rp,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rp(e),this._firestoreClient=void 0,await e}}}function CC(t,e){const n=typeof t=="object"?t:d_(),r=typeof t=="string"?t:ya,s=Pu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Jw("firestore");i&&SC(s,...i)}return s}function xy(t){if(t._terminated)throw new X(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PC(t),t._firestoreClient}function PC(t){const e=t._freezeSettings(),n=(function(s,i,o,c){return new QR(s,i,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Oy(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new IC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}class Ut{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ut(ct.fromBase64String(e))}catch(n){throw new X(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ut(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ut._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ao(e,Ut._jsonSchema))return Ut.fromBase64String(e.bytes)}}Ut._jsonSchemaVersion="firestore/bytes/1.0",Ut._jsonSchema={type:Ge("string",Ut._jsonSchemaVersion),bytes:Ge("string")};class _c{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class th{constructor(e){this._methodName=e}}class mn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mn._jsonSchemaVersion}}static fromJSON(e){if(ao(e,mn._jsonSchema))return new mn(e.latitude,e.longitude)}}mn._jsonSchemaVersion="firestore/geoPoint/1.0",mn._jsonSchema={type:Ge("string",mn._jsonSchemaVersion),latitude:Ge("number"),longitude:Ge("number")};class _n{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ao(e,_n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new _n(e.vectorValues);throw new X(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_n._jsonSchemaVersion="firestore/vectorValue/1.0",_n._jsonSchema={type:Ge("string",_n._jsonSchemaVersion),vectorValues:Ge("object")};const NC=/^__.*__$/;class kC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Nr(e,this.data,this.fieldMask,n,this.fieldTransforms):new co(e,this.data,n,this.fieldTransforms)}}class My{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Nr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ly(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:t})}}class nh{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new nh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sa(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ly(this.Ac)&&NC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class DC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dc(e)}Cc(e,n,r,s=!1){return new nh({Ac:e,methodName:n,Dc:r,path:it.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rh(t){const e=t._freezeSettings(),n=dc(t._databaseId);return new DC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function OC(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);sh("Data must be an object, but it was:",o,r);const c=Fy(r,o);let l,u;if(i.merge)l=new Mt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=tu(e,p,n);if(!o.contains(g))throw new X(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);By(f,g)||f.push(g)}l=new Mt(f),u=o.fieldTransforms.filter((p=>l.covers(p.field)))}else l=null,u=o.fieldTransforms;return new kC(new Nt(c),l,u)}class yc extends th{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yc}}function VC(t,e,n,r){const s=t.Cc(1,e,n);sh("Data must be an object, but it was:",s,r);const i=[],o=Nt.empty();Pr(r,((l,u)=>{const f=ih(e,l,n);u=tt(u);const p=s.yc(f);if(u instanceof yc)i.push(f);else{const g=po(u,p);g!=null&&(i.push(f),o.set(f,g))}}));const c=new Mt(i);return new My(o,c,s.fieldTransforms)}function xC(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[tu(e,r,n)],l=[s];if(i.length%2!=0)throw new X(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(tu(e,i[g])),l.push(i[g+1]);const u=[],f=Nt.empty();for(let g=c.length-1;g>=0;--g)if(!By(u,c[g])){const E=c[g];let C=l[g];C=tt(C);const k=o.yc(E);if(C instanceof yc)u.push(E);else{const S=po(C,k);S!=null&&(u.push(E),f.set(E,S))}}const p=new Mt(u);return new My(f,p,o.fieldTransforms)}function MC(t,e,n,r=!1){return po(n,t.Cc(r?4:3,e))}function po(t,e){if(Uy(t=tt(t)))return sh("Unsupported field value:",e,t),Fy(t,e);if(t instanceof th)return(function(r,s){if(!Ly(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const c of r){let l=po(c,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=xe.fromDate(r);return{timestampValue:wa(s.serializer,i)}}if(r instanceof xe){const i=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wa(s.serializer,i)}}if(r instanceof mn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ut)return{bytesValue:iy(s.serializer,r._byteString)};if(r instanceof Qe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ju(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof _n)return(function(o,c){return{mapValue:{fields:{[O_]:{stringValue:V_},[Ea]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw c.Sc("VectorValues must only contain numeric values.");return Lu(c.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${sc(r)}`)})(t,e)}function Fy(t,e){const n={};return S_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pr(t,((r,s)=>{const i=po(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function Uy(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xe||t instanceof mn||t instanceof Ut||t instanceof Qe||t instanceof th||t instanceof _n)}function sh(t,e,n){if(!Uy(n)||!R_(n)){const r=sc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function tu(t,e,n){if((e=tt(e))instanceof _c)return e._internalPath;if(typeof e=="string")return ih(t,e);throw Sa("Field path arguments must be of type string or ",t,!1,void 0,n)}const LC=new RegExp("[~\\*/\\[\\]]");function ih(t,e,n){if(e.search(LC)>=0)throw Sa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _c(...e.split("."))._internalPath}catch{throw Sa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sa(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new X(M.INVALID_ARGUMENT,c+t+l)}function By(t,e){return t.some((n=>n.isEqual(e)))}class jy{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(oh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FC extends jy{data(){return super.data()}}function oh(t,e){return typeof e=="string"?ih(t,e):e instanceof _c?e._internalPath:e._delegate._internalPath}function UC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ah{}class qy extends ah{}function BC(t,e,...n){let r=[];e instanceof ah&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((l=>l instanceof lh)).length,c=i.filter((l=>l instanceof ch)).length;if(o>1||o>0&&c>0)throw new X(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class ch extends qy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ch(e,n,r)}_apply(e){const n=this._parse(e);return $y(e._query,n),new os(e.firestore,e.converter,$l(e._query,n))}_parse(e){const n=rh(e.firestore);return(function(i,o,c,l,u,f,p){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new X(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Cp(p,f);const C=[];for(const k of p)C.push(Sp(l,i,k));g={arrayValue:{values:C}}}else g=Sp(l,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Cp(p,f),g=MC(c,o,p,f==="in"||f==="not-in");return He.create(u,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class lh extends ah{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new lh(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:en.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const c=i.getFlattenedFilters();for(const l of c)$y(o,l),o=$l(o,l)})(e._query,n),new os(e.firestore,e.converter,$l(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class uh extends qy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new uh(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new X(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new X(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yi(i,o)})(e._query,this._field,this._direction);return new os(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new zs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function jC(t,e="asc"){const n=e,r=oh("orderBy",t);return uh._create(r,n)}function Sp(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new X(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$_(e)&&n.indexOf("/")!==-1)throw new X(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ve.fromString(n));if(!ie.isDocumentKey(r))throw new X(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $d(t,new ie(r))}if(n instanceof Qe)return $d(t,n._key);throw new X(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sc(n)}.`)}function Cp(t,e){if(!Array.isArray(t)||t.length===0)throw new X(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $y(t,e){const n=(function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new X(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class qC{convertValue(e,n="none"){switch(Rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ar(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Pr(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[Ea].arrayValue?.values?.map((r=>qe(r.doubleValue)));return new _n(n)}convertGeoPoint(e){return new mn(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ac(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ki(e));default:return null}}convertTimestamp(e){const n=wr(e);return new xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);Ce(hy(r),9688,{name:e});const s=new zi(r.get(1),r.get(3)),i=new ie(r.popFirst(5));return s.isEqual(n)||jn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function $C(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Uo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bs extends jy{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ea(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(oh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=bs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}bs._jsonSchemaVersion="firestore/documentSnapshot/1.0",bs._jsonSchema={type:Ge("string",bs._jsonSchemaVersion),bundleSource:Ge("string","DocumentSnapshot"),bundleName:Ge("string"),bundle:Ge("string")};class ea extends bs{data(e={}){return super.data(e)}}class Ss{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Uo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new ea(this._firestore,this._userDataWriter,r.key,r,new Uo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((c=>{const l=new ea(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Uo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new ea(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Uo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:HC(c.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ss._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ku.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}Ss._jsonSchemaVersion="firestore/querySnapshot/1.0",Ss._jsonSchema={type:Ge("string",Ss._jsonSchemaVersion),bundleSource:Ge("string","QuerySnapshot"),bundleName:Ge("string"),bundle:Ge("string")};class GC extends qC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ut(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,n)}}function WC(t){t=Zr(t,os);const e=Zr(t.firestore,fo),n=xy(e),r=new GC(e);return UC(t._query),bC(n,t._query).then((s=>new Ss(e,r,t,s)))}function KC(t,e,n,...r){t=Zr(t,Qe);const s=Zr(t.firestore,fo),i=rh(s);let o;return o=typeof(e=tt(e))=="string"||e instanceof _c?xC(i,"updateDoc",t._key,e,n,r):VC(i,"updateDoc",t._key,e),hh(s,[o.toMutation(t._key,Qt.exists(!0))])}function zC(t){return hh(Zr(t.firestore,fo),[new Fu(t._key,Qt.none())])}function QC(t,e){const n=Zr(t.firestore,fo),r=eu(t),s=$C(t.converter,e);return hh(n,[OC(rh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Qt.exists(!1))]).then((()=>r))}function hh(t,e){return(function(r,s){const i=new _r;return r.asyncQueue.enqueueAndForget((async()=>fC(await AC(r),s,i))),i.promise})(xy(t),e)}(function(e,n=!0){(function(s){Gs=s})(rs),Jr(new Tr("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new fo(new NR(r.getProvider("auth-internal")),new OR(o,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new X(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zi(u.options.projectId,f)})(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),dn(Nd,kd,e),dn(Nd,kd,"esm2020")})();const Hy="firebasestorage.googleapis.com",YC="storageBucket",JC=120*1e3,XC=600*1e3;class An extends wn{constructor(e,n,r=0){super(ll(e),`Firebase Storage: ${n} (${ll(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,An.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ll(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var In;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(In||(In={}));function ll(t){return"storage/"+t}function ZC(){const t="An unknown error occurred, please check the error payload for server response.";return new An(In.UNKNOWN,t)}function eP(){return new An(In.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tP(){return new An(In.CANCELED,"User canceled the upload/download.")}function nP(t){return new An(In.INVALID_URL,"Invalid URL '"+t+"'.")}function rP(t){return new An(In.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Pp(t){return new An(In.INVALID_ARGUMENT,t)}function Gy(){return new An(In.APP_DELETED,"The Firebase app was deleted.")}function sP(t){return new An(In.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Gt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Gt.makeFromUrl(e,n)}catch{return new Gt(e,"")}if(r.path==="")return r;throw rP(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u($){$.path_=decodeURIComponent($.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",E=new RegExp(`^https?://${p}/${f}/b/${s}/o${g}`,"i"),C={bucket:1,path:3},k=n===Hy?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",L=new RegExp(`^https?://${k}/${s}/${S}`,"i"),U=[{regex:c,indices:l,postModify:i},{regex:E,indices:C,postModify:u},{regex:L,indices:{bucket:1,path:2},postModify:u}];for(let $=0;$<U.length;$++){const z=U[$],J=z.regex.exec(e);if(J){const R=J[z.indices.bucket];let y=J[z.indices.path];y||(y=""),r=new Gt(R,y),z.postModify(r);break}}if(r==null)throw nP(e);return r}}class iP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function oP(t,e,n){let r=1,s=null,i=null,o=!1,c=0;function l(){return c===2}let u=!1;function f(...S){u||(u=!0,e.apply(null,S))}function p(S){s=setTimeout(()=>{s=null,t(E,l())},S)}function g(){i&&clearTimeout(i)}function E(S,...L){if(u){g();return}if(S){g(),f.call(null,S,...L);return}if(l()||o){g(),f.call(null,S,...L);return}r<64&&(r*=2);let U;c===1?(c=2,U=0):U=(r+Math.random())*1e3,p(U)}let C=!1;function k(S){C||(C=!0,g(),!u&&(s!==null?(S||(c=2),clearTimeout(s),p(0)):S||(c=1)))}return p(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function aP(t){t(!1)}function cP(t){return t!==void 0}function Np(t,e,n,r){if(r<e)throw Pp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Pp(`Invalid value for '${t}'. Expected ${n} or less.`)}function lP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ca;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ca||(Ca={}));function uP(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}class hP{constructor(e,n,r,s,i,o,c,l,u,f,p,g=!0,E=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,k)=>{this.resolve_=C,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Bo(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const l=c.loaded,u=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===Ca.NO_ERROR,l=i.getStatus();if(!c||uP(l,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Ca.ABORT;r(!1,new Bo(!1,null,f));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Bo(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(c,c.getResponse());cP(l)?i(l):i()}catch(l){o(l)}else if(c!==null){const l=ZC();l.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,l)):o(l)}else if(s.canceled){const l=this.appDelete_?Gy():tP();o(l)}else{const l=eP();o(l)}};this.canceled_?n(!1,new Bo(!1,null,!0)):this.backoffId_=oP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&aP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bo{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function fP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function dP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function gP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function mP(t,e,n,r,s,i,o=!0,c=!1){const l=lP(t.urlParams),u=t.url+l,f=Object.assign({},t.headers);return pP(f,e),fP(f,n),dP(f,i),gP(f,r),new hP(u,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,c)}function _P(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function yP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class Pa{constructor(e,n){this._service=e,n instanceof Gt?this._location=n:this._location=Gt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Pa(e,n)}get root(){const e=new Gt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yP(this._location.path)}get storage(){return this._service}get parent(){const e=_P(this._location.path);if(e===null)return null;const n=new Gt(this._location.bucket,e);return new Pa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw sP(e)}}function kp(t,e){const n=e?.[YC];return n==null?null:Gt.makeFromBucketSpec(n,t)}class EP{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Hy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=JC,this._maxUploadRetryTime=XC,this._requests=new Set,s!=null?this._bucket=Gt.makeFromBucketSpec(s,this._host):this._bucket=kp(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gt.makeFromBucketSpec(this._url,e):this._bucket=kp(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Np("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Np("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Pt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pa(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new iP(Gy());{const o=mP(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Dp="@firebase/storage",Op="0.14.0";const vP="storage";function TP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new EP(n,r,s,e,rs)}function IP(){Jr(new Tr(vP,TP,"PUBLIC").setMultipleInstances(!0)),dn(Dp,Op,""),dn(Dp,Op,"esm2020")}IP();function Wy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wP=Wy,Ky=new io("auth","Firebase",Wy());const Na=new Su("@firebase/auth");function AP(t,...e){Na.logLevel<=ve.WARN&&Na.warn(`Auth (${rs}): ${t}`,...e)}function ta(t,...e){Na.logLevel<=ve.ERROR&&Na.error(`Auth (${rs}): ${t}`,...e)}function jt(t,...e){throw dh(t,...e)}function yn(t,...e){return dh(t,...e)}function fh(t,e,n){const r={...wP(),[e]:n};return new io("auth","Firebase",r).create(e,{appName:t.name})}function En(t){return fh(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RP(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&jt(t,"argument-error"),fh(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ky.create(t,...e)}function le(t,e,...n){if(!t)throw dh(e,...n)}function Vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ta(e),new Error(e)}function $n(t,e){t||Vn(e)}function nu(){return typeof self<"u"&&self.location?.href||""}function bP(){return Vp()==="http:"||Vp()==="https:"}function Vp(){return typeof self<"u"&&self.location?.protocol||null}function SP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bP()||iA()||"connection"in navigator)?navigator.onLine:!0}function CP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class go{constructor(e,n){this.shortDelay=e,this.longDelay=n,$n(n>e,"Short delay should be less than long delay!"),this.isMobile=nA()||oA()}get(){return SP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ph(t,e){$n(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class zy{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const PP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const NP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kP=new go(3e4,6e4);function Gn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Wn(t,e,n,r,s={}){return Qy(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=oo({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return sA()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Hs(t.emulatorConfig.host)&&(u.credentials="include"),zy.fetch()(await Yy(t,t.config.apiHost,n,c),u)})}async function Qy(t,e,n){t._canInitEmulator=!1;const r={...PP,...e};try{const s=new OP(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw jo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw jo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw jo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw jo(t,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw fh(t,f,u);jt(t,f)}}catch(s){if(s instanceof wn)throw s;jt(t,"network-request-failed",{message:String(s)})}}async function mo(t,e,n,r,s={}){const i=await Wn(t,e,n,r,s);return"mfaPendingCredential"in i&&jt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Yy(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?ph(t.config,s):`${t.config.apiScheme}://${s}`;return NP.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function DP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class OP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yn(this.auth,"network-request-failed")),kP.get())})}}function jo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=yn(t,e,r);return s.customData._tokenResponse=n,s}function xp(t){return t!==void 0&&t.enterprise!==void 0}class VP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return DP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xP(t,e){return Wn(t,"GET","/v2/recaptchaConfig",Gn(t,e))}async function MP(t,e){return Wn(t,"POST","/v1/accounts:delete",e)}async function ka(t,e){return Wn(t,"POST","/v1/accounts:lookup",e)}function Mi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LP(t,e=!1){const n=tt(t),r=await n.getIdToken(e),s=gh(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Mi(ul(s.auth_time)),issuedAtTime:Mi(ul(s.iat)),expirationTime:Mi(ul(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function ul(t){return Number(t)*1e3}function gh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ta("JWT malformed, contained fewer than 3 sections"),null;try{const s=s_(n);return s?JSON.parse(s):(ta("Failed to decode base64 JWT payload"),null)}catch(s){return ta("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Mp(t){const e=gh(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Zi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof wn&&FP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function FP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class UP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ru{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mi(this.lastLoginAt),this.creationTime=Mi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Da(t){const e=t.auth,n=await t.getIdToken(),r=await Zi(t,ka(e,{idToken:n}));le(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?Jy(s.providerUserInfo):[],o=jP(t.providerData,i),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!o?.length,u=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ru(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function BP(t){const e=tt(t);await Da(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jP(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Jy(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function qP(t,e){const n=await Qy(t,{},async()=>{const r=oo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Yy(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:r};return t.emulatorConfig&&Hs(t.emulatorConfig.host)&&(l.credentials="include"),zy.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $P(t,e){return Wn(t,"POST","/v2/accounts:revokeToken",Gn(t,e))}class Cs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=Mp(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await qP(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Cs;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cs,this.toJSON())}_performRefresh(){return Vn("not implemented")}}function tr(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new UP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ru(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Zi(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LP(this,e)}reload(){return BP(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Da(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pt(this.auth.app))return Promise.reject(En(this.auth));const e=await this.getIdToken();return await Zi(this,MP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:E,providerData:C,stsTokenManager:k}=n;le(p&&k,e,"internal-error");const S=Cs.fromJSON(this.name,k);le(typeof p=="string",e,"internal-error"),tr(r,e.name),tr(s,e.name),le(typeof g=="boolean",e,"internal-error"),le(typeof E=="boolean",e,"internal-error"),tr(i,e.name),tr(o,e.name),tr(c,e.name),tr(l,e.name),tr(u,e.name),tr(f,e.name);const L=new Wt({uid:p,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:E,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:S,createdAt:u,lastLoginAt:f});return C&&Array.isArray(C)&&(L.providerData=C.map(j=>({...j}))),l&&(L._redirectEventId=l),L}static async _fromIdTokenResponse(e,n,r=!1){const s=new Cs;s.updateFromServerResponse(n);const i=new Wt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Da(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];le(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Jy(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,c=new Cs;c.updateFromIdToken(r);const l=new Wt({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ru(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const Lp=new Map;function xn(t){$n(t instanceof Function,"Expected a class definition");let e=Lp.get(t);return e?($n(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Lp.set(t,e),e)}class Xy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Xy.type="NONE";const Fp=Xy;function na(t,e,n){return`firebase:${t}:${e}:${n}`}class Ps{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=na(this.userKey,s.apiKey,i),this.fullPersistenceKey=na("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ka(this.auth,{idToken:e}).catch(()=>{});return n?Wt._fromGetAccountInfoResponse(this.auth,n,e):null}return Wt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ps(xn(Fp),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||xn(Fp);const o=na(r,e.config.apiKey,e.name);let c=null;for(const u of n)try{const f=await u._get(o);if(f){let p;if(typeof f=="string"){const g=await ka(e,{idToken:f}).catch(()=>{});if(!g)break;p=await Wt._fromGetAccountInfoResponse(e,g,f)}else p=Wt._fromJSON(e,f);u!==i&&(c=p),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ps(i,e,r):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ps(i,e,r))}}function Up(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sE(e))return"Blackberry";if(iE(e))return"Webos";if(eE(e))return"Safari";if((e.includes("chrome/")||tE(e))&&!e.includes("edge/"))return"Chrome";if(rE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Zy(t=Tt()){return/firefox\//i.test(t)}function eE(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tE(t=Tt()){return/crios\//i.test(t)}function nE(t=Tt()){return/iemobile/i.test(t)}function rE(t=Tt()){return/android/i.test(t)}function sE(t=Tt()){return/blackberry/i.test(t)}function iE(t=Tt()){return/webos/i.test(t)}function mh(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HP(t=Tt()){return mh(t)&&!!window.navigator?.standalone}function GP(){return aA()&&document.documentMode===10}function oE(t=Tt()){return mh(t)||rE(t)||iE(t)||sE(t)||/windows phone/i.test(t)||nE(t)}function aE(t,e=[]){let n;switch(t){case"Browser":n=Up(Tt());break;case"Worker":n=`${Up(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rs}/${r}`}class WP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function KP(t,e={}){return Wn(t,"GET","/v2/passwordPolicy",Gn(t,e))}const zP=6;class QP{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zP,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class YP{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bp(this),this.idTokenSubscription=new Bp(this),this.beforeStateQueue=new WP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ky,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ps.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ka(this,{idToken:e}),r=await Wt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Pt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Da(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pt(this.app))return Promise.reject(En(this));const n=e?tt(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pt(this.app)?Promise.reject(En(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pt(this.app)?Promise.reject(En(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KP(this),n=new QP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new io("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $P(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xn(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await Ps.create(this,[xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Pt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&AP(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Rn(t){return tt(t)}class Bp{constructor(e){this.auth=e,this.observer=null,this.addObserver=gA(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ec={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JP(t){Ec=t}function cE(t){return Ec.loadJS(t)}function XP(){return Ec.recaptchaEnterpriseScript}function ZP(){return Ec.gapiScript}function e0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class t0{constructor(){this.enterprise=new n0}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class n0{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const r0="recaptcha-enterprise",lE="NO_RECAPTCHA";class s0{constructor(e){this.type=r0,this.auth=Rn(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{xP(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new VP(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})})}function s(i,o,c){const l=window.grecaptcha;xp(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(lE)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new t0().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&xp(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=XP();l.length!==0&&(l+=c),cE(l).then(()=>{s(c,i,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})}}async function jp(t,e,n,r=!1,s=!1){const i=new s0(t);let o;if(s)o=lE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,u=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Oa(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await jp(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await jp(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}function i0(t,e){const n=Pu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Yr(i,e??{}))return s;jt(s,"already-initialized")}return n.initialize({options:e})}function o0(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(xn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function a0(t,e,n){const r=Rn(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=uE(e),{host:o,port:c}=c0(e),l=c===null?"":`:${c}`,u={url:`${i}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(Yr(u,r.config.emulator)&&Yr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Hs(o)?(c_(`${i}//${o}${l}`),l_("Auth",!0)):l0()}function uE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function c0(t){const e=uE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:qp(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:qp(o)}}}function qp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function l0(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class _h{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,n){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}async function u0(t,e){return Wn(t,"POST","/v1/accounts:signUp",e)}async function h0(t,e){return mo(t,"POST","/v1/accounts:signInWithPassword",Gn(t,e))}async function f0(t,e){return Wn(t,"POST","/v1/accounts:sendOobCode",Gn(t,e))}async function d0(t,e){return f0(t,e)}async function p0(t,e){return mo(t,"POST","/v1/accounts:signInWithEmailLink",Gn(t,e))}async function g0(t,e){return mo(t,"POST","/v1/accounts:signInWithEmailLink",Gn(t,e))}class eo extends _h{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new eo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new eo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oa(e,n,"signInWithPassword",h0);case"emailLink":return p0(e,{email:this._email,oobCode:this._password});default:jt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oa(e,r,"signUpPassword",u0);case"emailLink":return g0(e,{idToken:n,email:this._email,oobCode:this._password});default:jt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ns(t,e){return mo(t,"POST","/v1/accounts:signInWithIdp",Gn(t,e))}const m0="http://localhost";class ts extends _h{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ts(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ns(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ns(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ns(e,n)}buildRequest(){const e={requestUri:m0,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=oo(n)}return e}}function _0(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function y0(t){const e=_i(yi(t)).link,n=e?_i(yi(e)).deep_link_id:null,r=_i(yi(t)).deep_link_id;return(r?_i(yi(r)).link:null)||r||n||e||t}class yh{constructor(e){const n=_i(yi(e)),r=n.apiKey??null,s=n.oobCode??null,i=_0(n.mode??null);le(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=y0(e);try{return new yh(n)}catch{return null}}}class Ys{constructor(){this.providerId=Ys.PROVIDER_ID}static credential(e,n){return eo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=yh.parseLink(n);return le(r,"argument-error"),eo._fromEmailAndCode(e,r.code,r.tenantId)}}Ys.PROVIDER_ID="password";Ys.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ys.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Eh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _o extends Eh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class lr extends _o{constructor(){super("facebook.com")}static credential(e){return ts._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";lr.PROVIDER_ID="facebook.com";class On extends _o{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ts._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return On.credential(n,r)}catch{return null}}}On.GOOGLE_SIGN_IN_METHOD="google.com";On.PROVIDER_ID="google.com";class ur extends _o{constructor(){super("github.com")}static credential(e){return ts._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.GITHUB_SIGN_IN_METHOD="github.com";ur.PROVIDER_ID="github.com";class hr extends _o{constructor(){super("twitter.com")}static credential(e,n){return ts._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com";hr.PROVIDER_ID="twitter.com";async function E0(t,e){return mo(t,"POST","/v1/accounts:signUp",Gn(t,e))}class ns{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Wt._fromIdTokenResponse(e,r,s),o=$p(r);return new ns({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=$p(r);return new ns({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function $p(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Va extends wn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Va.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Va(e,n,r,s)}}function hE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Va._fromErrorAndOperation(t,i,e,r):i})}async function v0(t,e,n=!1){const r=await Zi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ns._forOperation(t,"link",r)}async function T0(t,e,n=!1){const{auth:r}=t;if(Pt(r.app))return Promise.reject(En(r));const s="reauthenticate";try{const i=await Zi(t,hE(r,s,e,t),n);le(i.idToken,r,"internal-error");const o=gh(i.idToken);le(o,r,"internal-error");const{sub:c}=o;return le(t.uid===c,r,"user-mismatch"),ns._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&jt(r,"user-mismatch"),i}}async function fE(t,e,n=!1){if(Pt(t.app))return Promise.reject(En(t));const r="signIn",s=await hE(t,r,e),i=await ns._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function I0(t,e){return fE(Rn(t),e)}async function dE(t){const e=Rn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function w0(t,e,n){const r=Rn(t);await Oa(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",d0)}async function A0(t,e,n){if(Pt(t.app))return Promise.reject(En(t));const r=Rn(t),o=await Oa(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",E0).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&dE(t),l}),c=await ns._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function R0(t,e,n){return Pt(t.app)?Promise.reject(En(t)):I0(tt(t),Ys.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dE(t),r})}function b0(t,e,n,r){return tt(t).onIdTokenChanged(e,n,r)}function S0(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}function C0(t,e,n,r){return tt(t).onAuthStateChanged(e,n,r)}function P0(t){return tt(t).signOut()}const xa="__sak";class pE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xa,"1"),this.storage.removeItem(xa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const N0=1e3,k0=10;class gE extends pE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);GP()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,k0):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},N0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gE.type="LOCAL";const D0=gE;class mE extends pE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mE.type="SESSION";const _E=mE;function O0(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class vc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new vc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async u=>u(n.origin,i)),l=await O0(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vc.receivers=[];function vh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class V0{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const u=vh("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function vn(){return window}function x0(t){vn().location.href=t}function yE(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function M0(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L0(){return navigator?.serviceWorker?.controller||null}function F0(){return yE()?self:null}const EE="firebaseLocalStorageDb",U0=1,Ma="firebaseLocalStorage",vE="fbase_key";class yo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Tc(t,e){return t.transaction([Ma],e?"readwrite":"readonly").objectStore(Ma)}function B0(){const t=indexedDB.deleteDatabase(EE);return new yo(t).toPromise()}function su(){const t=indexedDB.open(EE,U0);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ma,{keyPath:vE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ma)?e(r):(r.close(),await B0(),e(await su()))})})}async function Hp(t,e,n){const r=Tc(t,!0).put({[vE]:e,value:n});return new yo(r).toPromise()}async function j0(t,e){const n=Tc(t,!1).get(e),r=await new yo(n).toPromise();return r===void 0?null:r.value}function Gp(t,e){const n=Tc(t,!0).delete(e);return new yo(n).toPromise()}const q0=800,$0=3;class TE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await su(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$0)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vc._getInstance(F0()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await M0(),!this.activeServiceWorker)return;this.sender=new V0(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||L0()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await su();return await Hp(e,xa,"1"),await Gp(e,xa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Hp(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>j0(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Tc(s,!1).getAll();return new yo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TE.type="LOCAL";const H0=TE;new go(3e4,6e4);function IE(t,e){return e?xn(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Th extends _h{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ns(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ns(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ns(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function G0(t){return fE(t.auth,new Th(t),t.bypassAuthState)}function W0(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),T0(n,new Th(t),t.bypassAuthState)}async function K0(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),v0(n,new Th(t),t.bypassAuthState)}class wE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return G0;case"linkViaPopup":case"linkViaRedirect":return K0;case"reauthViaPopup":case"reauthViaRedirect":return W0;default:jt(this.auth,"internal-error")}}resolve(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const z0=new go(2e3,1e4);class Es extends wE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Es.currentPopupAction&&Es.currentPopupAction.cancel(),Es.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){$n(this.filter.length===1,"Popup operations only handle one event");const e=vh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Es.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,z0.get())};e()}}Es.currentPopupAction=null;const Q0="pendingRedirect",ra=new Map;class Y0 extends wE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ra.get(this.auth._key());if(!e){try{const r=await J0(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ra.set(this.auth._key(),e)}return this.bypassAuthState||ra.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function J0(t,e){const n=RE(e),r=AE(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function X0(t,e){return AE(t)._set(RE(e),"true")}function Z0(t,e){ra.set(t._key(),e)}function AE(t){return xn(t._redirectPersistence)}function RE(t){return na(Q0,t.config.apiKey,t.name)}function eN(t,e,n){return tN(t,e,n)}async function tN(t,e,n){if(Pt(t.app))return Promise.reject(En(t));const r=Rn(t);RP(t,e,Eh),await r._initializationPromise;const s=IE(r,n);return await X0(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function nN(t,e){return await Rn(t)._initializationPromise,bE(t,e,!1)}async function bE(t,e,n=!1){if(Pt(t.app))return Promise.reject(En(t));const r=Rn(t),s=IE(r,e),o=await new Y0(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const rN=600*1e3;class sN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!SE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(yn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wp(e))}saveEventToCache(e){this.cachedEventUids.add(Wp(e)),this.lastProcessedEventTime=Date.now()}}function Wp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SE({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function iN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SE(t);default:return!1}}async function oN(t,e={}){return Wn(t,"GET","/v1/projects",e)}const aN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cN=/^https?/;async function lN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oN(t);for(const n of e)try{if(uN(n))return}catch{}jt(t,"unauthorized-domain")}function uN(t){const e=nu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!cN.test(n))return!1;if(aN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const hN=new go(3e4,6e4);function Kp(){const t=vn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fN(t){return new Promise((e,n)=>{function r(){Kp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kp(),n(yn(t,"network-request-failed"))},timeout:hN.get()})}if(vn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(vn().gapi?.load)r();else{const s=e0("iframefcb");return vn()[s]=()=>{gapi.load?r():n(yn(t,"network-request-failed"))},cE(`${ZP()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw sa=null,e})}let sa=null;function dN(t){return sa=sa||fN(t),sa}const pN=new go(5e3,15e3),gN="__/auth/iframe",mN="emulator/auth/iframe",_N={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EN(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ph(e,mN):`https://${t.config.authDomain}/${gN}`,r={apiKey:e.apiKey,appName:t.name,v:rs},s=yN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${oo(r).slice(1)}`}async function vN(t){const e=await dN(t),n=vn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:EN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_N,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=yn(t,"network-request-failed"),c=vn().setTimeout(()=>{i(o)},pN.get());function l(){vn().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(o)})}))}const TN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IN=500,wN=600,AN="_blank",RN="http://localhost";class zp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bN(t,e,n,r=IN,s=wN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l={...TN,width:r.toString(),height:s.toString(),top:i,left:o},u=Tt().toLowerCase();n&&(c=tE(u)?AN:n),Zy(u)&&(e=e||RN,l.scrollbars="yes");const f=Object.entries(l).reduce((g,[E,C])=>`${g}${E}=${C},`,"");if(HP(u)&&c!=="_self")return SN(e||"",c),new zp(null);const p=window.open(e||"",c,f);le(p,t,"popup-blocked");try{p.focus()}catch{}return new zp(p)}function SN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const CN="__/auth/handler",PN="emulator/auth/handler",NN=encodeURIComponent("fac");async function Qp(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:rs,eventId:s};if(e instanceof Eh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof _o){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await t._getAppCheckToken(),u=l?`#${NN}=${encodeURIComponent(l)}`:"";return`${kN(t)}?${oo(c).slice(1)}${u}`}function kN({config:t}){return t.emulator?ph(t,PN):`https://${t.authDomain}/${CN}`}const hl="webStorageSupport";class DN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_E,this._completeRedirectFn=bE,this._overrideRedirectResult=Z0}async _openPopup(e,n,r,s){$n(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Qp(e,n,r,nu(),s);return bN(e,i,vh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Qp(e,n,r,nu(),s);return x0(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):($n(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vN(e),r=new sN(e);return n.register("authEvent",s=>(le(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hl,{type:hl},s=>{const i=s?.[0]?.[hl];i!==void 0&&n(!!i),jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return oE()||eE()||mh()}}const ON=DN;var Yp="@firebase/auth",Jp="1.12.0";class VN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MN(t){Jr(new Tr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aE(t)},u=new YP(r,s,i,l);return o0(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Jr(new Tr("auth-internal",e=>{const n=Rn(e.getProvider("auth").getImmediate());return(r=>new VN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dn(Yp,Jp,xN(t)),dn(Yp,Jp,"esm2020")}const LN=300,FN=a_("authIdTokenMaxAge")||LN;let Xp=null;const UN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>FN)return;const s=n?.token;Xp!==s&&(Xp=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function BN(t=d_()){const e=Pu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=i0(t,{popupRedirectResolver:ON,persistence:[H0,D0,_E]}),r=a_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=UN(i.toString());S0(n,o,()=>o(n.currentUser)),b0(n,c=>o(c))}}const s=i_("auth");return s&&a0(n,`http://${s}`),n}function jN(){return document.getElementsByTagName("head")?.[0]??document}JP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=yn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",jN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MN("Browser");const qN={apiKey:"AIzaSyCQRcooWvTGBnna54XGy81H6IDD1YIbX2s",authDomain:"game-echo-75441.firebaseapp.com",projectId:"game-echo-75441",storageBucket:"game-echo-75441.firebasestorage.app",messagingSenderId:"137329665802",appId:"1:137329665802:web:765f73f5f0578ee991bcf3",measurementId:"G-QKZRSNQC50"},CE=f_(qN),qo=CC(CE),Ur=BN(CE),$N=wu("game",()=>{const t=Ih(),e=bu(),n=ze([]),r=ze([]),s=ze(!0);function i(){n.value=[],r.value=[],f.value=!1,g.value=null,E.value="",S.value=10}async function o(){s.value=!0;const te=await c();window.scrollTo({top:0,behavior:"smooth"}),n.value=te,r.value=te,s.value=!1}async function c(){if(!t.currentUser)return[];try{const te=wp(qo,"users",t.currentUser.uid,"games"),fe=BC(te,jC("updatedAt","desc"));return(await WC(fe)).docs.map(de=>({id:de.id,...de.data()}))}catch(te){return e.pushMessage(!1,""+te.message),[]}}const l=ze([{status:"completed",statusCN:""},{status:"playing",statusCN:""},{status:"paused",statusCN:""},{status:"todo",statusCN:""}]),u=St(()=>{const te=[{id:"all",status:"all",statusCN:""}];return l.value.forEach(fe=>{const _e=n.value.filter(de=>de.status===fe.status),ce=new Set;_e.forEach(de=>{de.category.forEach(lt=>ce.add(lt))}),te.push({id:fe.status,status:fe.status,statusCN:fe.statusCN,children:ce.size?Array.from(ce).map(de=>({id:`${fe.status}-${de.replace(/\s+/g,"_")}`,statusCN:de})):void 0})}),te}),f=ze(!1);function p(){f.value?(f.value=!1,document.body.style.overflow=""):(f.value=!0,document.body.style.overflow="hidden")}const g=ze(null),E=ze(""),C=ze([]);function k(te){if(S.value=10,te==="search"&&(r.value=n.value.filter(fe=>fe.name.toLowerCase().includes(E.value.toLowerCase()))),te==="menu"){if(g.value?.status==="all")r.value=n.value;else if(g.value?.status&&(C.value=n.value.filter(fe=>fe.status===g.value.status),r.value=C.value,g.value?.children))return;g.value?.status||(r.value=C.value.filter(fe=>fe.category.includes(g.value.statusCN)))}p(),S.value=Math.min(10,r.value.length)}const S=ze(10),L=St(()=>r.value.slice(0,S.value));function j(){S.value<r.value.length&&(S.value=Math.min(S.value+10,r.value.length))}const U=ze({img:"",name:"",status:"",platform:[],note:"",completedAt:"",startAt:"",category:[]}),$=ze(!1),z=ze(!1),J=Er({nameError:"",statusError:"",loading:!1});function R(te,fe){$.value=!0,document.body.style.overflow="hidden",z.value=te,z.value?U.value={img:"",name:"",status:"",platform:[],note:"",completedAt:"",startAt:"",category:[]}:U.value=JSON.parse(JSON.stringify(fe))}function y(){$.value=!1,J.nameError="",J.statusError="",document.body.style.overflow=""}async function _(){if(U.value?.name===""?J.nameError="":J.nameError="",U.value?.status===""?J.statusError="":J.statusError="",J.nameError!==""||J.statusError!=="")return;const te=t.currentUser?.uid;if(!te)return;const fe={...U.value,startAt:I(U.value.startAt),completedAt:I(U.value.completedAt),updatedAt:xe.now()};try{if(J.loading=!0,z.value)await QC(wp(qo,"users",te,"games"),fe),e.pushMessage(!0,"");else{const _e=U.value.id,ce=eu(qo,"users",te,"games",String(_e));await KC(ce,fe),e.pushMessage(!0,"")}y(),await o()}catch(_e){e.pushMessage(!1,""+_e.message)}finally{J.loading=!1}}function I(te){return te===null?null:te instanceof Date?te.toISOString().split("T")[0]??null:te}const w=Er({show:!1,msg:""});function A(){w.msg=` ${U.value.name} ?`,w.show=!0}async function v(){w.show=!1;const te=t.currentUser?.uid;if(te)try{const fe=U.value.id,_e=eu(qo,"users",te,"games",String(fe));await zC(_e),e.pushMessage(!0,""),y(),await o()}catch(fe){e.pushMessage(!1,""+fe.message)}}return{reset:i,games:n,gameIsLoading:s,loadGameData:o,loadMore:j,menu:u,menuIsOpen:f,menuControl:p,nowNode:g,searchText:E,visibleGames:L,useFilter:k,modalIsOpen:$,statusOrder:l,editData:U,isNew:z,editStatus:J,confirm:w,editModal:R,closeModal:y,submit:_,deleteGame:A,doubleCheck:v}}),Ih=wu("auth",()=>{const t=bu(),e=$N(),n=ze(null),r=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,s=Er({status:"login",email:"",emailError:"",password:"",passwordError:"",loading:!1});Wr(()=>s.status,()=>{s.email="",s.password="",s.emailError="",s.passwordError=""});const i=async()=>{const S=new On;S.setCustomParameters({prompt:"select_account"});try{await eN(Ur,S)}catch(L){t.pushMessage(!1,"Google "+L.code)}},o=async()=>{try{const S=await nN(Ur);if(console.log("Redirect Result:",S),S?.user)return n.value=S.user,await e.loadGameData(),t.pushMessage(!0,"Google "),vs.push("/"),!0}catch(S){console.error("Google redirect error:",S),t.pushMessage(!1,""+S.code)}return!1},c=()=>{C0(Ur,async S=>{S?(n.value=S,await e.loadGameData(),console.log("")):(n.value=null,console.log("")),l.value=!1})},l=ze(!0);function u(){s.email===""?s.emailError=" Email":r.test(s.email)?s.emailError="":s.emailError="Email "}function f(){s.password.length<6?s.passwordError="6":s.passwordError=""}const p=async()=>{if(u(),f(),!(s.emailError!==""||s.passwordError!==""))try{s.loading=!0,await A0(Ur,s.email,s.password),s.status="login",vs.push("/")}catch(S){S.code==="auth/email-already-in-use"?s.emailError=" Email ":t.pushMessage(!1,""+S.code)}finally{s.loading=!1}},g=async()=>{if(u(),s.emailError==="")try{s.loading=!0,await w0(Ur,s.email),t.pushMessage(!0,""),s.status="login"}catch(S){t.pushMessage(!1,""+S.code)}finally{s.loading=!1}},E=async()=>{if(u(),f(),!(s.emailError!==""||s.passwordError!==""))try{s.loading=!0,await R0(Ur,s.email,s.password),vs.push("/")}catch(S){t.pushMessage(!1,""+S.code)}finally{s.loading=!1}};function C(){s.email="test@gmail.com",s.password="abc123",E()}async function k(){try{await P0(Ur),n.value=null,vs.push("/login").then(()=>e.reset())}catch(S){t.pushMessage(!1,""+S.code)}}return{currentUser:n,loading:l,handleRedirect:o,initAuthListener:c,loginStatus:s,register:p,resetPassword:g,login:E,logout:k,googleLogin:i,testLogin:C}}),vs=qw({history:vw(),routes:[{path:"/login",name:"login",component:()=>td(()=>import("./Login-SvbXDzTh.js"),__vite__mapDeps([0,1,2,3]))},{path:"/",name:"home",component:()=>td(()=>import("./Home-Dyb9itQo.js"),__vite__mapDeps([4,1,2,5])),meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",redirect:"/"}]});vs.beforeEach(async t=>{const e=Ih();return e.loading?new Promise(n=>{const r=Wr(()=>e.loading,s=>{s||(r(),n(Zp(t,e)))})}):Zp(t,e)});function Zp(t,e){return t.meta.requiresAuth&&!e.currentUser?"/login":t.path==="/login"&&e.currentUser?"/":!0}const HN={key:0,class:"text-green-500 material-symbols-outlined"},GN={key:1,class:"text-[#FF4450] material-symbols-outlined"},WN=Qa({__name:"Message",setup(t){const e=bu(),{message:n}=OI(e);return(r,s)=>(zr(),Wo("div",{class:no([zt(n).active?"opacity-100 translate-y-0 z-20":"opacity-0 translate-y-1 z-[-1]","text-gray-600 border border-gray-200 fixed bottom-7 left-6 bg-white p-4 flex gap-3 rounded-sm shadow-md transition-all duration-500"])},[zt(n).status?(zr(),Wo("span",HN,"check_circle")):(zr(),Wo("span",GN,"cancel")),Rm(" "+lg(zt(n).text),1)],2))}}),KN=Qa({__name:"App",setup(t){return(e,n)=>{const r=iT("RouterView");return zr(),Wo(_t,null,[at(r),at(WN)],64)}}}),iu=AI(KN),zN=SI();iu.use(zN);const eg=Ih(),QN=async()=>{await eg.handleRedirect(),eg.initAuthListener(),iu.use(vs),iu.mount("#app")};QN();export{mk as $,St as A,XN as B,Er as C,kg as D,dg as E,_t as F,lv as G,JN as H,ak as I,ok as J,tk as K,sk as L,ik as M,YN as N,xT as O,Ho as P,gl as Q,Vv as R,$a as S,lk as T,ek as U,fn as V,gk as W,nk as X,Iu as Y,MT as Z,eT as _,Am as a,pk as a0,dk as a1,Le as a2,zt as b,Wo as c,Qa as d,at as e,ZN as f,Rm as g,$N as h,rk as i,iT as j,ck as k,Il as l,Zg as m,no as n,zr as o,gu as p,nm as q,ze as r,OI as s,lg as t,Ih as u,fk as v,qv as w,hk as x,uk as y,Wr as z};
